import{_ as z,y as M,j as c,D as q,E as B,o as L,z as U,G as D,r as $,c as o,a as n,e,d as F,f as p,n as _,q as g,v as H,s as x,b as P,p as y,t as r,F as C,h as j,k as I,w as K}from"./index-CNGFvYdt.js";import{l as G}from"./lodash-DjxWLlCR.js";const A={class:"min-h-screen bg-gray-50 py-8"},Q={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Y={class:"bg-white rounded-xl shadow-sm p-6 mb-8 hover:shadow-md transition-shadow"},W={class:"lg:hidden mb-4"},X={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5"},J={class:"relative"},O={class:"relative"},R={class:"relative"},Z={class:"relative"},ee={class:"mt-6 flex flex-col-reverse sm:flex-row gap-3 justify-end"},te={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6"},se={class:"text-gray-600 mb-3 sm:mb-0"},le={key:0},ae={key:1},ne={key:2,class:"font-medium"},oe={class:"flex items-center"},ie={class:"relative"},re={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},de={key:1,class:"bg-white rounded-xl shadow-sm p-10 text-center"},ue={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ce={class:"p-6 flex flex-col flex-grow"},ge={class:"flex items-center mb-4"},ve={class:"h-16 w-16 rounded-lg overflow-hidden bg-gray-100 flex items-center justify-center"},me=["src","alt"],fe={key:1,class:"h-full w-full flex items-center justify-center text-gray-400"},be={class:"ml-4"},pe={class:"text-lg font-medium text-gray-900 line-clamp-1 group-hover:text-blue-600"},xe={class:"flex items-center mt-1"},ye={class:"text-sm text-gray-600"},he={class:"mb-4 flex-grow"},we={class:"text-sm text-gray-600 line-clamp-3"},ke={class:"grid grid-cols-2 gap-4"},_e={class:"flex items-center"},Pe={class:"ml-2 text-sm text-gray-600 truncate"},Ce={class:"flex items-center"},je={class:"ml-2 text-sm text-gray-600 truncate"},Te={key:3,class:"mt-10 flex justify-center"},Se={class:"flex items-center space-x-2","aria-label":"Pagination"},Ee=["disabled"],Ve={class:"flex items-center space-x-2"},Ne=["onClick"],ze=["disabled"],Me={__name:"EnterpriseList",setup(qe){const V=M(),v=c(!0),m=c([]),f=c(!0),T=c(!1),i=c({currentPage:1,totalPages:1,totalItems:0,pageSize:10}),l=q({q:"",city:"",field:"",scale:"",page:1,pageSize:10,sortBy:"created_at"}),N=B(()=>{const a=i.value.totalPages,t=i.value.currentPage;if(a<=5)return Array.from({length:a},(E,k)=>k+1);let d=Math.max(t-2,1),s=Math.min(d+4,a);return s===a&&(d=Math.max(s-4,1)),Array.from({length:s-d+1},(E,k)=>d+k)}),b=async()=>{try{v.value=!0;const a=await V.searchEnterprises(l);a.success&&(m.value=a.data.data.results,i.value={currentPage:a.data.data.page,totalPages:a.data.data.total_pages,totalItems:a.data.data.total,pageSize:a.data.data.page_size})}catch(a){console.error("Error loading enterprises:",a)}finally{v.value=!1}},u=G.debounce(()=>{l.page=1,b()},300),S=()=>{l.q="",l.city="",l.field="",l.scale="",l.page=1,l.sortBy="created_at",b()},h=a=>{a>=1&&a<=i.value.totalPages&&(l.page=a,b(),window.scrollTo({top:document.querySelector(".grid").offsetTop-100,behavior:"smooth"}))},w=()=>{T.value=window.innerWidth<1024};return L(()=>{w(),window.addEventListener("resize",w),b()}),U(()=>{window.removeEventListener("resize",w)}),D([()=>l.city,()=>l.field,()=>l.scale],u),(a,t)=>{const d=$("router-link");return n(),o("div",A,[e("div",Q,[t[42]||(t[42]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl md:text-3xl font-bold text-gray-900 mb-2"},"Danh sách công ty"),e("p",{class:"text-sm md:text-base text-gray-600"},"Khám phá và tìm hiểu về các công ty đang hoạt động trên hệ thống")],-1)),e("div",Y,[e("div",W,[e("button",{onClick:t[0]||(t[0]=s=>f.value=!f.value),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[t[10]||(t[10]=e("span",{class:"flex items-center font-medium text-gray-800"},[e("i",{class:"fas fa-filter text-blue-500 mr-2"}),p(" Bộ lọc tìm kiếm ")],-1)),e("i",{class:_(["fas",f.value?"fa-chevron-up":"fa-chevron-down"])},null,2)])]),e("div",{class:_([{hidden:!f.value&&T.value},"lg:block"])},[e("div",X,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},"Từ khóa tìm kiếm",-1)),e("div",J,[g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.q=s),type:"text",class:"block w-full border border-gray-300 rounded-lg pl-10 pr-3 py-2.5 text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tên công ty..."},null,512),[[H,l.q]]),t[11]||(t[11]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-search text-gray-400"})],-1))])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},"Thành phố",-1)),e("div",O,[g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.city=s),class:"block w-full border border-gray-300 rounded-lg py-2.5 pl-10 pr-10 text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},t[13]||(t[13]=[e("option",{value:""},"Tất cả thành phố",-1),e("option",{value:"Hà Nội"},"Hà Nội",-1),e("option",{value:"Hồ Chí Minh"},"Hồ Chí Minh",-1),e("option",{value:"Đà Nẵng"},"Đà Nẵng",-1)]),512),[[x,l.city]]),t[14]||(t[14]=e("div",{class:"absolute inset-y-0 left-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-map-marker-alt text-gray-400"})],-1)),t[15]||(t[15]=e("div",{class:"absolute inset-y-0 right-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-chevron-down text-gray-400 text-xs"})],-1))])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},"Lĩnh vực hoạt động",-1)),e("div",R,[g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.field=s),class:"block w-full border border-gray-300 rounded-lg py-2.5 pl-10 pr-10 text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},t[17]||(t[17]=[P('<option value="" data-v-8852be02>Tất cả lĩnh vực</option><option value="Công nghệ thông tin" data-v-8852be02>Công nghệ thông tin</option><option value="Tài chính - Ngân hàng" data-v-8852be02>Tài chính - Ngân hàng</option><option value="Giáo dục" data-v-8852be02>Giáo dục</option><option value="Y tế" data-v-8852be02>Y tế</option>',5)]),512),[[x,l.field]]),t[18]||(t[18]=e("div",{class:"absolute inset-y-0 left-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-industry text-gray-400"})],-1)),t[19]||(t[19]=e("div",{class:"absolute inset-y-0 right-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-chevron-down text-gray-400 text-xs"})],-1))])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},"Quy mô",-1)),e("div",Z,[g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.scale=s),class:"block w-full border border-gray-300 rounded-lg py-2.5 pl-10 pr-10 text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},t[21]||(t[21]=[P('<option value="" data-v-8852be02>Tất cả quy mô</option><option value="1-50" data-v-8852be02>1-50 nhân viên</option><option value="51-150" data-v-8852be02>51-150 nhân viên</option><option value="151-300" data-v-8852be02>151-300 nhân viên</option><option value="301-500" data-v-8852be02>301-500 nhân viên</option><option value="501-1000" data-v-8852be02>501-1000 nhân viên</option><option value="1000+" data-v-8852be02>Trên 1000 nhân viên</option>',7)]),512),[[x,l.scale]]),t[22]||(t[22]=e("div",{class:"absolute inset-y-0 left-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-users text-gray-400"})],-1)),t[23]||(t[23]=e("div",{class:"absolute inset-y-0 right-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-chevron-down text-gray-400 text-xs"})],-1))])])]),e("div",ee,[e("button",{onClick:S,class:"px-4 py-2.5 border border-gray-300 rounded-lg text-gray-700 text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all flex items-center justify-center"},t[25]||(t[25]=[e("i",{class:"fas fa-redo-alt mr-2"},null,-1),p(" Đặt lại ")])),e("button",{onClick:t[5]||(t[5]=(...s)=>y(u)&&y(u)(...s)),class:"px-6 py-2.5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all flex items-center justify-center"},t[26]||(t[26]=[e("i",{class:"fas fa-search mr-2"},null,-1),p(" Tìm kiếm ")]))])],2)]),e("div",te,[e("div",se,[v.value?(n(),o("span",le,"Đang tải...")):m.value.length===0?(n(),o("span",ae,"Không tìm thấy kết quả")):(n(),o("span",ne,r(i.value.totalItems)+" công ty",1))]),e("div",oe,[t[29]||(t[29]=e("label",{for:"sort",class:"mr-2 text-sm text-gray-600"},"Sắp xếp:",-1)),e("div",ie,[g(e("select",{id:"sort","onUpdate:modelValue":t[6]||(t[6]=s=>l.sortBy=s),class:"pl-3 pr-8 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none cursor-pointer bg-white transition-all",onChange:t[7]||(t[7]=(...s)=>y(u)&&y(u)(...s))},t[27]||(t[27]=[e("option",{value:"created_at"},"Mới nhất",-1),e("option",{value:"name"},"Tên công ty",-1),e("option",{value:"size"},"Quy mô",-1)]),544),[[x,l.sortBy]]),t[28]||(t[28]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[e("i",{class:"fas fa-chevron-down text-xs"})],-1))])])]),v.value?(n(),o("div",re,[(n(),o(C,null,j(9,s=>e("div",{key:`skeleton-${s}`,class:"bg-white rounded-xl shadow-sm p-6 transition-all"},t[30]||(t[30]=[P('<div class="flex items-center mb-4" data-v-8852be02><div class="h-16 w-16 rounded-lg bg-gray-200 animate-pulse" data-v-8852be02></div><div class="ml-4 flex-1" data-v-8852be02><div class="h-5 bg-gray-200 rounded w-3/4 animate-pulse" data-v-8852be02></div><div class="h-4 bg-gray-200 rounded w-1/2 mt-2 animate-pulse" data-v-8852be02></div></div></div><div class="space-y-2 mb-6" data-v-8852be02><div class="h-4 bg-gray-200 rounded w-full animate-pulse" data-v-8852be02></div><div class="h-4 bg-gray-200 rounded w-full animate-pulse" data-v-8852be02></div><div class="h-4 bg-gray-200 rounded w-2/3 animate-pulse" data-v-8852be02></div></div><div class="grid grid-cols-2 gap-3" data-v-8852be02><div class="flex items-center" data-v-8852be02><div class="w-6 h-6 rounded-full bg-gray-200 mr-2 animate-pulse" data-v-8852be02></div><div class="h-4 bg-gray-200 rounded flex-1 animate-pulse" data-v-8852be02></div></div><div class="flex items-center" data-v-8852be02><div class="w-6 h-6 rounded-full bg-gray-200 mr-2 animate-pulse" data-v-8852be02></div><div class="h-4 bg-gray-200 rounded flex-1 animate-pulse" data-v-8852be02></div></div></div>',3)]))),64))])):m.value.length===0?(n(),o("div",de,[t[32]||(t[32]=e("div",{class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 text-gray-400 mb-4"},[e("i",{class:"fas fa-building text-3xl"})],-1)),t[33]||(t[33]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Không tìm thấy công ty nào",-1)),t[34]||(t[34]=e("p",{class:"mt-1 text-sm text-gray-500 max-w-md mx-auto"},"Không có kết quả phù hợp với tiêu chí tìm kiếm của bạn. Vui lòng thử lại với các bộ lọc khác.",-1)),e("button",{onClick:S,class:"mt-4 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all inline-flex items-center"},t[31]||(t[31]=[e("i",{class:"fas fa-redo-alt mr-2"},null,-1),p(" Đặt lại bộ lọc ")]))])):(n(),o("div",ue,[(n(!0),o(C,null,j(m.value,s=>(n(),I(d,{key:s.id,to:{name:"EnterpriseDetail",params:{id:s.id}},class:"bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-all hover:-translate-y-1 border border-gray-100 flex flex-col h-full"},{default:K(()=>[e("div",ce,[e("div",ge,[e("div",ve,[s.logo_url?(n(),o("img",{key:0,src:s.logo_url,alt:s.company_name,class:"h-full w-full object-contain"},null,8,me)):(n(),o("div",fe,t[35]||(t[35]=[e("i",{class:"fas fa-building text-2xl"},null,-1)])))]),e("div",be,[e("h3",pe,r(s.company_name),1),e("div",xe,[t[36]||(t[36]=e("i",{class:"fas fa-map-marker-alt text-red-500 mr-1 text-sm"},null,-1)),e("p",ye,r(s.city||"Chưa cập nhật"),1)])])]),e("div",he,[e("p",we,r(s.description||"Chưa có mô tả về công ty"),1)]),e("div",ke,[e("div",_e,[t[37]||(t[37]=e("div",{class:"w-8 h-8 rounded-full bg-blue-50 flex items-center justify-center flex-shrink-0"},[e("i",{class:"fas fa-users text-blue-500"})],-1)),e("span",Pe,r(s.scale||"Chưa cập nhật"),1)]),e("div",Ce,[t[38]||(t[38]=e("div",{class:"w-8 h-8 rounded-full bg-purple-50 flex items-center justify-center flex-shrink-0"},[e("i",{class:"fas fa-industry text-purple-500"})],-1)),e("span",je,r(s.field_of_activity||"Chưa cập nhật"),1)])])]),t[39]||(t[39]=e("div",{class:"px-6 py-3 bg-gray-50 flex justify-between items-center"},[e("span",{class:"text-sm text-blue-600 font-medium"},"Xem thông tin"),e("i",{class:"fas fa-arrow-right text-blue-600"})],-1))]),_:2},1032,["to"]))),128))])),i.value.totalPages>1?(n(),o("div",Te,[e("nav",Se,[e("button",{onClick:t[8]||(t[8]=s=>h(i.value.currentPage-1)),disabled:i.value.currentPage===1,class:"flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 bg-white text-gray-500 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},t[40]||(t[40]=[e("span",{class:"sr-only"},"Previous",-1),e("i",{class:"fas fa-chevron-left"},null,-1)]),8,Ee),e("div",Ve,[(n(!0),o(C,null,j(N.value,s=>(n(),o("button",{key:s,onClick:E=>h(s),class:_(["flex items-center justify-center w-10 h-10 rounded-lg transition-colors",s===i.value.currentPage?"bg-blue-600 text-white":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50"])},r(s),11,Ne))),128))]),e("button",{onClick:t[9]||(t[9]=s=>h(i.value.currentPage+1)),disabled:i.value.currentPage===i.value.totalPages,class:"flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 bg-white text-gray-500 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},t[41]||(t[41]=[e("span",{class:"sr-only"},"Next",-1),e("i",{class:"fas fa-chevron-right"},null,-1)]),8,ze)])])):F("",!0)])])}}},Ue=z(Me,[["__scopeId","data-v-8852be02"]]);export{Ue as default};
