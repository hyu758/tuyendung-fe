import{_ as v}from"./ChatContainer-QXWiWxtR.js";import{_ as x,U as f,i as _,E as b,j as w,G as y,o as k,O as i,z as M,r as C,c as r,a as l,e as s,d as m,f as u,g as o,p as d,N as c,t as S,w as N}from"./index-B8AWlpIq.js";const I={class:"relative min-h-screen bg-white pb-8"},U={class:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-6 px-4 md:py-8"},B={class:"container mx-auto"},V={class:"bg-white rounded-xl shadow-xl overflow-hidden border border-gray-100 transition-all duration-300 hover:shadow-2xl"},j={class:"p-5 md:p-6 border-b bg-gradient-to-r from-indigo-500 to-purple-600"},E={class:"text-xl md:text-2xl font-bold text-white flex items-center"},A={class:"inline-block mr-3 bg-white/20 backdrop-blur-sm text-white p-2 rounded-full"},D={key:0,class:"mt-4 ml-11"},Q={class:"inline-flex items-center bg-red-100 text-red-600 px-4 py-2 rounded-full text-sm font-medium shadow-sm"},T={key:0,class:"h-[calc(100vh-220px)]"},z={key:1,class:"h-[calc(100vh-220px)] flex items-center justify-center"},F={class:"text-center max-w-md mx-auto p-8 bg-white/60 backdrop-blur-sm rounded-xl shadow-md"},G={class:"bg-indigo-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6"},H={__name:"MessageCenter",setup(K){const n=f();_();const h=b(()=>n.unreadCount),a=w(!1),g=e=>{if(console.log("Nhận được tin nhắn socket trong MessageCenter:",e),e.type==="new_message"||e.data&&e.data.type==="new_message"){const t=e.data?e.data:e;t.message&&n.addMessage(t.message),n.fetchUnreadMessages()}};return y(()=>n.conversations,e=>{a.value=!e||e.length===0},{immediate:!0}),k(async()=>{i.connected||i.init(),i.onMessage(g),n.resetStore();try{await n.fetchConversations(),await n.fetchUnreadMessages(),a.value=!n.conversations||n.conversations.length===0;const e=setInterval(async()=>{await n.fetchUnreadMessages()},3e4);M(()=>{clearInterval(e),i.offMessage(g)})}catch(e){console.error("Lỗi khi tải dữ liệu cho MessageCenter:",e)}}),(e,t)=>{const p=C("router-link");return l(),r("div",I,[s("div",U,[s("div",B,[s("div",V,[s("div",j,[s("div",null,[s("h1",E,[s("span",A,[o(d(c),{icon:"comments"})]),t[0]||(t[0]=u(" Trung tâm tin nhắn "))]),t[1]||(t[1]=s("p",{class:"text-indigo-100 mt-1 pl-11"}," Quản lý và trả lời tin nhắn của ứng viên ",-1))]),h.value>0?(l(),r("div",D,[s("div",Q,[o(d(c),{icon:"envelope",class:"mr-2"}),u(" "+S(h.value)+" tin nhắn chưa đọc ",1)])])):m("",!0)]),a.value?m("",!0):(l(),r("div",T,[o(v)])),a.value?(l(),r("div",z,[s("div",F,[s("div",G,[o(d(c),{icon:"comments",class:"text-indigo-500 text-3xl"})]),t[3]||(t[3]=s("h3",{class:"text-xl font-medium text-gray-800 mb-3"},"Hộp tin nhắn trống",-1)),t[4]||(t[4]=s("p",{class:"text-gray-600 mb-6 leading-relaxed"}," Bạn chưa có cuộc trò chuyện nào với ứng viên. Khi ứng viên liên hệ, tin nhắn sẽ xuất hiện ở đây. ",-1)),o(p,{to:"/employer/posts",class:"inline-flex items-center px-5 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md hover:shadow-lg transform hover:-translate-y-1 duration-200"},{default:N(()=>[o(d(c),{icon:"briefcase",class:"mr-2"}),t[2]||(t[2]=u(" Quản lý tin tuyển dụng "))]),_:1})])])):m("",!0)])])])])}}},$=x(H,[["__scopeId","data-v-575b42bf"]]);export{$ as default};
