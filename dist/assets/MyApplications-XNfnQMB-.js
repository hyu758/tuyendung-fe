import{_ as R,u as I,j as v,E as K,k as $,r as M,c as r,o as i,d as t,b as p,f as a,t as l,m as z,p as F,e as u,w as S,F as X,g as H,n as k,q as j,X as U}from"./index-DrXs9fRt.js";const G={class:"bg-gray-50 min-h-screen py-4 sm:py-8"},J={class:"max-w-7xl mx-auto px-4 sm:px-6"},P={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4 sm:mb-6 shadow-sm"},Q={class:"flex items-center"},W={class:"font-medium"},O={class:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 mb-4 sm:mb-6"},Y={class:"bg-white rounded-lg border border-gray-200 p-3 sm:p-4 shadow-sm hover:shadow-md transition-shadow"},Z={class:"flex flex-col"},tt={class:"text-xl sm:text-2xl font-bold text-gray-900"},et={class:"bg-white rounded-lg border border-gray-200 p-3 sm:p-4 shadow-sm hover:shadow-md transition-shadow"},st={class:"flex flex-col"},nt={class:"text-xl sm:text-2xl font-bold text-yellow-600"},ot={class:"bg-white rounded-lg border border-gray-200 p-3 sm:p-4 shadow-sm hover:shadow-md transition-shadow"},lt={class:"flex flex-col"},rt={class:"text-xl sm:text-2xl font-bold text-green-600"},it={class:"bg-white rounded-lg border border-gray-200 p-3 sm:p-4 shadow-sm hover:shadow-md transition-shadow"},at={class:"flex flex-col"},dt={class:"text-xl sm:text-2xl font-bold text-red-600"},ut={class:"bg-white p-4 mb-4 sm:mb-6 rounded-lg shadow-sm"},mt={class:"flex flex-wrap items-end gap-4"},ct={class:"w-full sm:w-auto"},xt={class:"w-full sm:w-auto sm:ml-auto"},gt={class:"bg-white rounded-lg shadow-sm overflow-hidden"},vt={key:0,class:"p-8 text-center"},pt={key:1,class:"p-6 sm:p-8 text-center"},ht={class:"mx-auto h-16 sm:h-24 w-16 sm:w-24 text-gray-400"},ft={class:"mt-4 sm:mt-6"},bt={key:2},yt={class:"p-4"},_t={class:"space-y-4"},wt=["onClick"],kt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},jt={class:"flex items-center"},Ct={class:"flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12"},Dt=["src","alt"],Tt={key:1,class:"w-full h-full bg-gray-100 flex items-center justify-center rounded-lg text-gray-500"},Vt={class:"ml-3"},Mt={class:"text-sm sm:text-base font-medium text-gray-900 line-clamp-2"},St={class:"text-xs sm:text-sm text-gray-600"},Nt={class:"flex items-center justify-between sm:justify-end mt-2 sm:mt-0 w-full sm:w-auto"},qt={class:"text-xs text-gray-500 sm:ml-3"},At={class:"mt-3 pt-3 border-t border-gray-100"},Lt={class:"flex flex-wrap gap-2 justify-end"},Bt=["href"],Et=["onClick"],Rt={key:1,class:"mt-4 bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 rounded-lg shadow-sm"},It={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Kt={class:"text-sm text-gray-700"},$t={class:"font-medium"},zt={class:"font-medium"},Ft={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},Xt={class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},Ht={class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},Ut={key:2,class:"fixed inset-0 overflow-y-auto z-50"},Gt={class:"flex items-center justify-center min-h-screen px-4 py-6 sm:p-0"},Jt={class:"bg-white rounded-lg max-w-lg w-full mx-auto p-4 sm:p-6 shadow-xl transform transition-all relative"},Pt={class:"flex justify-between items-start mb-4"},Qt={class:"overflow-y-auto max-h-[70vh] pr-1"},Wt={class:"space-y-5"},Ot={class:"bg-blue-50 p-3 rounded-lg"},Yt={class:"flex items-start"},Zt={class:"flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12"},te=["src","alt"],ee={key:1,class:"w-full h-full bg-white flex items-center justify-center rounded-lg text-gray-500"},se={class:"ml-3"},ne={class:"text-sm sm:text-base font-medium text-gray-900"},oe={class:"text-xs sm:text-sm text-gray-600"},le={class:"flex items-center mt-1"},re={class:"text-xs text-gray-500"},ie={class:"text-sm font-medium text-gray-700 mb-2 flex items-center"},ae={class:"bg-gray-50 rounded-lg p-3"},de={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},ue={class:"text-sm font-medium"},me={class:"text-sm font-medium"},ce={class:"text-sm font-medium"},xe={class:"text-sm font-medium"},ge={class:"text-sm font-medium text-gray-700 mb-2 flex items-center"},ve={class:"bg-gray-50 rounded-lg p-3"},pe={class:"flex items-center"},he={key:0,class:"text-xs text-blue-600 flex items-center"},fe={key:1,class:"text-xs text-gray-500 flex items-center"},be={key:0,class:"mt-2 pt-2 border-t border-gray-200"},ye={class:"text-sm mt-1 p-2 bg-white rounded"},_e={key:0},we={class:"text-sm font-medium text-gray-700 mb-2 flex items-center"},ke={class:"bg-gray-50 rounded-lg p-3"},je={class:"text-sm whitespace-pre-wrap"},Ce={class:"mt-5 sm:mt-6 flex flex-col sm:flex-row gap-3 sm:justify-between"},De=["href"],Te={class:"flex gap-3 justify-end"},Ve={__name:"MyApplications",setup(Me){const N=I(),c=v([]),f=v(!0),C=v(!1),x=v(""),n=v(null),g=v({status:"",dateRange:""}),m=v({total:0,pending:0,approved:0,rejected:0}),q=async()=>{f.value=!0,C.value=!1,x.value="",localStorage.getItem("token");try{const s=await U.getApplications();c.value=s.data.data.results.map(e=>({...e,jobId:e.post})),A()}catch(s){if(console.error("Lỗi khi lấy dữ liệu đơn ứng tuyển:",s),c.value=[],m.value={total:0,pending:0,approved:0,rejected:0},s.value=!0,s.response)switch(s.response.status){case 401:x.value="Phiên đăng nhập hết hạn. Vui lòng đăng nhập lại.";break;case 403:x.value="Bạn không có quyền truy cập danh sách ứng tuyển. Liên hệ quản trị viên.";break;case 404:x.value="Không tìm thấy dữ liệu ứng tuyển.";break;default:x.value=`Lỗi máy chủ: ${s.response.status}. Vui lòng thử lại sau.`}else s.request?x.value="Không thể kết nối đến máy chủ. Vui lòng kiểm tra kết nối mạng.":x.value="Đã xảy ra lỗi khi xử lý yêu cầu."}finally{f.value=!1}},A=()=>{m.value={total:c.value.length,pending:0,approved:0,rejected:0},c.value.forEach(s=>{s.status==="pending"?m.value.pending++:s.status==="approved"?m.value.approved++:s.status==="rejected"&&m.value.rejected++})},D=K(()=>{let s=[...c.value];if(g.value.status&&(s=s.filter(e=>e.status===g.value.status)),g.value.dateRange){const e=new Date;let o;switch(g.value.dateRange){case"last7days":o=new Date(e.setDate(e.getDate()-7));break;case"last30days":o=new Date(e.setDate(e.getDate()-30));break;case"last3months":o=new Date(e.setMonth(e.getMonth()-3));break;case"last6months":o=new Date(e.setMonth(e.getMonth()-6));break}o&&(s=s.filter(h=>new Date(h.created_at)>=o))}return s.sort((e,o)=>new Date(o.created_at)-new Date(e.created_at))}),L=()=>{g.value={status:"",dateRange:""}},b=s=>{const e={year:"numeric",month:"numeric",day:"numeric"};return new Date(s).toLocaleDateString("vi-VN",e)},T=s=>s?s.split(" ").map(e=>e[0]).join("").substring(0,2).toUpperCase():"",y=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},_=s=>{switch(s){case"pending":return"Đang xử lý";case"approved":return"Đã duyệt";case"rejected":return"Từ chối";default:return"Không xác định"}},B=s=>{n.value=s},w=()=>{n.value=null},V=s=>{N.push({name:"candidate-messages",query:{user:s}})};return $(()=>{q()}),(s,e)=>{const o=M("font-awesome-icon"),h=M("router-link");return i(),r("div",G,[t("div",J,[e[42]||(e[42]=t("div",{class:"mb-4 sm:mb-6"},[t("h1",{class:"text-xl sm:text-2xl font-bold text-gray-900"},"Đơn ứng tuyển của tôi"),t("p",{class:"text-sm sm:text-base text-gray-600 mt-1"},"Quản lý tất cả đơn ứng tuyển của bạn")],-1)),C.value?(i(),r("div",P,[t("div",Q,[a(o,{icon:"exclamation-circle",class:"mr-2 text-red-500"}),t("p",W,l(x.value),1)]),e[4]||(e[4]=t("p",{class:"mt-2 text-sm"},"Vui lòng thử đăng nhập lại hoặc liên hệ quản trị viên nếu lỗi vẫn tiếp tục xảy ra.",-1))])):p("",!0),t("div",O,[t("div",Y,[t("div",Z,[e[5]||(e[5]=t("h3",{class:"text-xs sm:text-sm font-medium text-gray-500 mb-1"},"Tổng đơn",-1)),t("p",tt,l(m.value.total),1)])]),t("div",et,[t("div",st,[e[6]||(e[6]=t("h3",{class:"text-xs sm:text-sm font-medium text-gray-500 mb-1"},"Đang xử lý",-1)),t("p",nt,l(m.value.pending),1)])]),t("div",ot,[t("div",lt,[e[7]||(e[7]=t("h3",{class:"text-xs sm:text-sm font-medium text-gray-500 mb-1"},"Đã duyệt",-1)),t("p",rt,l(m.value.approved),1)])]),t("div",it,[t("div",at,[e[8]||(e[8]=t("h3",{class:"text-xs sm:text-sm font-medium text-gray-500 mb-1"},"Từ chối",-1)),t("p",dt,l(m.value.rejected),1)])])]),t("div",ut,[t("div",mt,[t("div",ct,[e[10]||(e[10]=t("label",{for:"status-filter",class:"block text-sm font-medium text-gray-700 mb-1.5"},"Trạng thái",-1)),z(t("select",{id:"status-filter","onUpdate:modelValue":e[0]||(e[0]=d=>g.value.status=d),class:"border border-gray-300 rounded-lg p-2 w-full sm:w-auto focus:ring-blue-500 focus:border-blue-500 text-sm"},e[9]||(e[9]=[t("option",{value:""},"Tất cả trạng thái",-1),t("option",{value:"pending"},"Đang xử lý",-1),t("option",{value:"approved"},"Đã duyệt",-1),t("option",{value:"rejected"},"Từ chối",-1)]),512),[[F,g.value.status]])]),t("div",xt,[t("button",{onClick:L,class:"w-full sm:w-auto py-2 px-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition flex items-center justify-center text-sm"},[a(o,{icon:"redo-alt",class:"mr-2"}),e[11]||(e[11]=u(" Đặt lại "))])])])]),t("div",gt,[f.value?(i(),r("div",vt,e[12]||(e[12]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Đang tải dữ liệu...",-1)]))):c.value.length===0?(i(),r("div",pt,[t("div",ht,[a(o,{icon:"file-alt",class:"text-5xl sm:text-6xl"})]),e[14]||(e[14]=t("h3",{class:"mt-2 text-base sm:text-lg font-medium text-gray-900"},"Không có đơn ứng tuyển",-1)),e[15]||(e[15]=t("p",{class:"mt-1 text-sm text-gray-500"},"Bạn chưa ứng tuyển công việc nào hoặc không có kết quả phù hợp với bộ lọc.",-1)),t("div",ft,[a(h,{to:"/job-search",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700"},{default:S(()=>[a(o,{icon:"search",class:"mr-2"}),e[13]||(e[13]=u(" Tìm việc ngay "))]),_:1})])])):(i(),r("div",bt,[t("div",yt,[e[19]||(e[19]=t("div",{class:"flex justify-between items-center mb-4"},[t("h2",{class:"text-base sm:text-lg font-medium text-gray-900"},"Việc làm đã ứng tuyển")],-1)),t("div",_t,[(i(!0),r(X,null,H(D.value,d=>(i(),r("div",{key:d.id,class:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition",onClick:E=>B(d)},[t("div",kt,[t("div",jt,[t("div",Ct,[d.enterprise_logo?(i(),r("img",{key:0,src:d.enterprise_logo,alt:d.enterprise_name,class:"w-full h-full object-contain rounded-lg"},null,8,Dt)):(i(),r("div",Tt,l(T(d.enterprise_name)),1))]),t("div",Vt,[t("h3",Mt,l(d.post_title),1),t("p",St,l(d.enterprise_name),1)])]),t("div",Nt,[t("span",{class:k(["px-2.5 py-1 text-xs rounded-full",y(d.status)])},l(_(d.status)),3),t("span",qt,l(b(d.created_at)),1)])]),t("div",At,[t("div",Lt,[d.cv_file_url?(i(),r("a",{key:0,href:d.cv_file_url,target:"_blank",onClick:e[1]||(e[1]=j(()=>{},["stop"])),class:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs sm:text-sm rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"},[a(o,{icon:"file-pdf",class:"mr-1.5"}),e[16]||(e[16]=u(" CV "))],8,Bt)):p("",!0),t("button",{onClick:j(E=>V(d.user),["stop"]),class:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs sm:text-sm rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"},[a(o,{icon:"comment",class:"mr-1.5"}),e[17]||(e[17]=u(" Nhắn tin "))],8,Et),a(h,{to:{name:"JobDetail",params:{id:d.post}},onClick:e[2]||(e[2]=j(()=>{},["stop"])),class:"inline-flex items-center px-3 py-1.5 border border-transparent shadow-sm text-xs sm:text-sm rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none"},{default:S(()=>[a(o,{icon:"eye",class:"mr-1.5"}),e[18]||(e[18]=u(" Xem việc làm "))]),_:2},1032,["to"])])])],8,wt))),128))])])]))]),c.value.length>0?(i(),r("div",Rt,[e[28]||(e[28]=t("div",{class:"flex-1 flex justify-between sm:hidden"},[t("button",{class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50"}," Trước "),t("button",{class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50"}," Sau ")],-1)),t("div",It,[t("div",null,[t("p",Kt,[e[20]||(e[20]=u(" Hiển thị ")),e[21]||(e[21]=t("span",{class:"font-medium"},"1",-1)),e[22]||(e[22]=u(" đến ")),t("span",$t,l(D.value.length),1),e[23]||(e[23]=u(" của ")),t("span",zt,l(c.value.length),1),e[24]||(e[24]=u(" kết quả "))])]),t("div",null,[t("nav",Ft,[t("button",Xt,[e[25]||(e[25]=t("span",{class:"sr-only"},"Trang trước",-1)),a(o,{icon:"chevron-left"})]),e[27]||(e[27]=t("button",{class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-blue-600 hover:bg-blue-50 border-blue-500"}," 1 ",-1)),t("button",Ht,[e[26]||(e[26]=t("span",{class:"sr-only"},"Trang sau",-1)),a(o,{icon:"chevron-right"})])])])])])):p("",!0),n.value?(i(),r("div",Ut,[t("div",Gt,[t("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:w}),t("div",Jt,[t("div",Pt,[e[29]||(e[29]=t("h3",{class:"text-lg sm:text-xl font-bold text-gray-900"},"Chi tiết đơn ứng tuyển",-1)),t("button",{onClick:w,class:"text-gray-400 hover:text-gray-500"},[a(o,{icon:"times",class:"text-xl"})])]),t("div",Qt,[t("div",Wt,[t("div",Ot,[t("div",Yt,[t("div",Zt,[n.value.enterprise_logo?(i(),r("img",{key:0,src:n.value.enterprise_logo,alt:n.value.enterprise_name,class:"w-full h-full object-contain rounded-lg bg-white p-1"},null,8,te)):(i(),r("div",ee,l(T(n.value.enterprise_name)),1))]),t("div",se,[t("h3",ne,l(n.value.post_title),1),t("p",oe,l(n.value.enterprise_name),1),t("div",le,[t("span",{class:k(["px-2 py-0.5 text-xs rounded-full mr-2",y(n.value.status)])},l(_(n.value.status)),3),t("span",re,l(b(n.value.created_at)),1)])])])]),t("div",null,[t("h4",ie,[a(o,{icon:"user",class:"mr-2 text-blue-500"}),e[30]||(e[30]=u(" Thông tin ứng viên "))]),t("div",ae,[t("div",de,[t("div",null,[e[31]||(e[31]=t("p",{class:"text-xs text-gray-500"},"Họ tên:",-1)),t("p",ue,l(n.value.name||"Chưa cập nhật"),1)]),t("div",null,[e[32]||(e[32]=t("p",{class:"text-xs text-gray-500"},"Email:",-1)),t("p",me,l(n.value.email||"Chưa cập nhật"),1)]),t("div",null,[e[33]||(e[33]=t("p",{class:"text-xs text-gray-500"},"Số điện thoại:",-1)),t("p",ce,l(n.value.phoneNumber||"Chưa cập nhật"),1)]),t("div",null,[e[34]||(e[34]=t("p",{class:"text-xs text-gray-500"},"Ngày ứng tuyển:",-1)),t("p",xe,l(b(n.value.created_at)),1)])])])]),t("div",null,[t("h4",ge,[a(o,{icon:"info-circle",class:"mr-2 text-blue-500"}),e[35]||(e[35]=u(" Trạng thái đơn "))]),t("div",ve,[t("div",pe,[t("span",{class:k(["px-2.5 py-1 text-xs rounded-full mr-2",y(n.value.status)])},l(_(n.value.status)),3),n.value.is_viewed?(i(),r("span",he,[a(o,{icon:"check-circle",class:"mr-1"}),e[36]||(e[36]=u(" Đã xem "))])):(i(),r("span",fe,[a(o,{icon:"clock",class:"mr-1"}),e[37]||(e[37]=u(" Chưa xem "))]))]),n.value.note?(i(),r("div",be,[e[38]||(e[38]=t("p",{class:"text-xs text-gray-500"},"Ghi chú:",-1)),t("p",ye,l(n.value.note),1)])):p("",!0)])]),n.value.description?(i(),r("div",_e,[t("h4",we,[a(o,{icon:"file-alt",class:"mr-2 text-blue-500"}),e[39]||(e[39]=u(" Nội dung đơn "))]),t("div",ke,[t("p",je,l(n.value.description),1)])])):p("",!0)])]),t("div",Ce,[t("div",null,[n.value.cv_file_url?(i(),r("a",{key:0,href:n.value.cv_file_url,target:"_blank",class:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none"},[a(o,{icon:"file-pdf",class:"mr-2"}),e[40]||(e[40]=u(" Xem CV đính kèm "))],8,De)):p("",!0)]),t("div",Te,[t("button",{onClick:e[3]||(e[3]=d=>V(n.value.user)),class:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg shadow-sm text-gray-700 bg-white hover:bg-gray-50"},[a(o,{icon:"comment",class:"mr-2"}),e[41]||(e[41]=u(" Nhắn tin "))]),t("button",{onClick:w,class:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg shadow-sm text-gray-700 bg-white hover:bg-gray-50"}," Đóng ")])])])])])):p("",!0)])])}}},Ne=R(Ve,[["__scopeId","data-v-2ba5987b"]]);export{Ne as default};
