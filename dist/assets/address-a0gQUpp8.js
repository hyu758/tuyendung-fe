import{I as c}from"./index-DrXs9fRt.js";const o=c("address",{state:()=>({provinces:[],selectedProvince:null,districts:[],loading:!1,error:null}),getters:{getDistrictsByProvince:e=>{if(!e.selectedProvince)return[];const t=e.provinces.find(s=>s.code===parseInt(e.selectedProvince));return t?t.districts:[]}},actions:{async fetchProvinces(){try{const e=localStorage.getItem("provinces");if(e){const{data:r,timestamp:i}=JSON.parse(e);if(Date.now()-i<24*60*60*1e3)return this.provinces=r,{success:!0,data:r}}this.loading=!0;const s=await(await fetch("https://provinces.open-api.vn/api/?depth=2")).json();return this.provinces=s,localStorage.setItem("provinces",JSON.stringify({data:s,timestamp:Date.now()})),{success:!0,data:s}}catch(e){return this.error=e.message,{success:!1,error:e.message}}finally{this.loading=!1}},setSelectedProvince(e){const t=parseInt(e);this.selectedProvince=t;const s=this.provinces.find(r=>r.code===t);s?this.districts=s.districts:this.districts=[]}}});export{o as u};
