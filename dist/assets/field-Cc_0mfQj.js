import{I as o,C as a}from"./index-7AGdmXRC.js";const c=o("field",{state:()=>({fields:[],positions:[],positionsCache:new Map,loading:!1,loadingPositions:!1,error:null}),actions:{async fetchFields(r={page:1,page_size:100}){var e,t;try{this.loading=!0;const s=await a.get("/api/fields/",{params:r});return this.fields=s.data.data.results,{success:!0,data:s.data.data.results}}catch(s){return this.error=((t=(e=s.response)==null?void 0:e.data)==null?void 0:t.message)||"Có lỗi xảy ra khi tải danh sách lĩnh vực",{success:!1,error:this.error}}finally{this.loading=!1}},async fetchPositionsByField(r){var e,t;if(this.positionsCache.has(r)){const s=this.positionsCache.get(r);return this.positions=s,{success:!0,data:s}}try{this.loadingPositions=!0;const i=(await a.get(`/api/positions/field/${r}/`)).data.data;return this.positionsCache.set(r,i),this.positions=i,{success:!0,data:i}}catch(s){return this.error=((t=(e=s.response)==null?void 0:e.data)==null?void 0:t.message)||"Có lỗi xảy ra khi tải danh sách vị trí",{success:!1,error:this.error}}finally{this.loadingPositions=!1}},async getPositionById(r){var e,t;try{return{success:!0,data:(await a.get(`/api/position/${r}/`)).data}}catch(s){return this.error=((t=(e=s.response)==null?void 0:e.data)==null?void 0:t.message)||"Có lỗi xảy ra khi tải thông tin vị trí",{success:!1,error:this.error}}},async getFieldById(r){var e,t;try{return{success:!0,data:(await a.get(`/api/fields/${r}/`)).data}}catch(s){return this.error=((t=(e=s.response)==null?void 0:e.data)==null?void 0:t.message)||"Có lỗi xảy ra khi tải thông tin lĩnh vực",{success:!1,error:this.error}}}}});export{c as u};
