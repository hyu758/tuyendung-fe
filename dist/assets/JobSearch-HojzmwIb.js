import{_ as X,j as x,o as G,D as N,c as n,a as d,e,f as h,d as b,q as y,v as O,s as L,F as T,h as U,t as u,A as E,K as w,x as ae,i as W,C as J,B as oe,u as ie,m as ne,E as de,G as R,r as ue,M as ce,n as M,g as K,b as ye,w as pe}from"./index-DfuhKBsv.js";import{u as me}from"./address-DmXN53oM.js";import{u as ge}from"./field-DfI6Dx5U.js";import{u as fe}from"./post-D_LgZ9e9.js";const xe={class:"bg-white rounded-xl shadow-sm p-5 transition-all hover:shadow-md relative"},ve={class:"flex justify-between items-center mb-5"},be={class:"relative"},he={class:"relative"},_e=["value"],we={class:"relative"},ke=["value"],$e={class:"space-y-2 max-h-52 overflow-y-auto bg-gray-50 rounded-lg p-2.5 border border-gray-100"},qe=["id","value"],Ce=["for"],Ve={class:"space-y-2 max-h-72 overflow-y-auto bg-gray-50 rounded-lg p-2.5 border border-gray-100"},Se={class:"flex items-center p-1 hover:bg-white rounded-md transition-colors"},Me={class:"flex items-center p-1 hover:bg-white rounded-md transition-colors"},Te={class:"flex items-center p-1 hover:bg-white rounded-md transition-colors"},Ue={class:"flex items-center p-1 hover:bg-white rounded-md transition-colors"},Pe={class:"flex items-center p-1 hover:bg-white rounded-md transition-colors"},Fe={class:"flex items-center p-1 hover:bg-white rounded-md transition-colors"},De={class:"flex items-center p-1 hover:bg-white rounded-md transition-colors"},ze={class:"flex items-center p-1 hover:bg-white rounded-md transition-colors"},Le={class:"flex items-center p-1 hover:bg-white rounded-md transition-colors"},Ke={class:"space-y-2 bg-gray-50 rounded-lg p-2.5 border border-gray-100"},Ne=["id","value"],Je=["for"],Ae={key:0,class:"mt-3"},Be={class:"bg-blue-50 rounded-lg p-3 border border-blue-100"},Ie={class:"flex items-center"},Ee={__name:"JobFilter",emits:["filter","close"],setup(Y,{emit:p}){const k=p,P=x([]),$=x([]),F=x(!1);async function V(){try{if(W().isAuthenticated)try{(await J.get("/api/criteria/")).data.status===200&&(F.value=!0)}catch{F.value=!1}const t=await me().fetchProvinces();t!=null&&t.data&&(P.value=t.data.map(C=>C.name));const m=await ge().fetchFields();console.log(m),m!=null&&m.data&&($.value=m.data.map(C=>C.name))}catch(_){console.error("Lỗi khi tải dữ liệu:",_)}}G(()=>{V()});const g=["Toàn thời gian","Bán thời gian","Thực tập","Freelance","Remote"],v=["Không yêu cầu kinh nghiệm","Dưới 1 năm","1-2 năm","3-5 năm","Trên 5 năm"],i=N({q:"",city:"",position:"",type_working:[],salary_type:"",experience:"",onlyMatching:!1}),D=()=>{let _="",s="",t=!1;if(i.salary_type)if(i.salary_type==="negotiable")t=!0;else{const[m,C]=i.salary_type.split("-").map(Number);_=m*1e6,s=C*1e6}const c={q:i.q,city:i.city,position:i.position,type_working:i.type_working.join(","),salary_min:_,salary_max:s,is_salary_negotiable:t,experience:i.experience,all:!i.onlyMatching};k("filter",c)},q=()=>{D(),k("close")},S=()=>{i.q="",i.city="",i.position="",i.type_working=[],i.salary_type="",i.experience="",i.onlyMatching=!1,k("filter",{q:"",city:"",position:"",type_working:"",salary_min:"",salary_max:"",is_salary_negotiable:!1,experience:"",all:!0})};return(_,s)=>(d(),n("div",xe,[e("div",ve,[s[17]||(s[17]=e("h3",{class:"text-lg font-semibold text-gray-800 flex items-center"},[e("i",{class:"fas fa-filter text-blue-500 mr-2"}),h(" Lọc kết quả ")],-1)),e("button",{onClick:s[0]||(s[0]=t=>_.$emit("close")),class:"lg:hidden w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors"},s[16]||(s[16]=[e("i",{class:"fas fa-times text-gray-500"},null,-1)]))]),e("form",{onSubmit:ae(D,["prevent"]),class:"space-y-5"},[e("div",null,[s[19]||(s[19]=e("label",{for:"keyword",class:"block text-sm font-medium text-gray-700 mb-1.5"},"Từ khóa",-1)),e("div",be,[s[18]||(s[18]=e("div",{class:"absolute inset-y-0 left-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-search text-gray-400"})],-1)),y(e("input",{id:"keyword","onUpdate:modelValue":s[1]||(s[1]=t=>i.q=t),type:"text",placeholder:"Tiêu đề, kỹ năng, công ty...",class:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"},null,512),[[O,i.q]])])]),e("div",null,[s[23]||(s[23]=e("label",{for:"location",class:"block text-sm font-medium text-gray-700 mb-1.5"},"Địa điểm",-1)),e("div",he,[s[21]||(s[21]=e("div",{class:"absolute inset-y-0 left-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-map-marker-alt text-gray-400"})],-1)),y(e("select",{id:"location","onUpdate:modelValue":s[2]||(s[2]=t=>i.city=t),class:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none bg-white transition-all"},[s[20]||(s[20]=e("option",{value:""},"Tất cả địa điểm",-1)),(d(!0),n(T,null,U(P.value,t=>(d(),n("option",{key:t,value:t},u(t),9,_e))),128))],512),[[L,i.city]]),s[22]||(s[22]=e("div",{class:"pointer-events-none absolute inset-y-0 right-3 flex items-center"},[e("i",{class:"fas fa-chevron-down text-gray-400 text-xs"})],-1))])]),e("div",null,[s[27]||(s[27]=e("label",{for:"category",class:"block text-sm font-medium text-gray-700 mb-1.5"},"Ngành nghề",-1)),e("div",we,[s[25]||(s[25]=e("div",{class:"absolute inset-y-0 left-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-briefcase text-gray-400"})],-1)),y(e("select",{id:"category","onUpdate:modelValue":s[3]||(s[3]=t=>i.position=t),class:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none bg-white transition-all"},[s[24]||(s[24]=e("option",{value:""},"Tất cả ngành nghề",-1)),(d(!0),n(T,null,U($.value,t=>(d(),n("option",{key:t,value:t},u(t),9,ke))),128))],512),[[L,i.position]]),s[26]||(s[26]=e("div",{class:"pointer-events-none absolute inset-y-0 right-3 flex items-center"},[e("i",{class:"fas fa-chevron-down text-gray-400 text-xs"})],-1))])]),e("div",null,[s[28]||(s[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Loại công việc",-1)),e("div",$e,[(d(),n(T,null,U(g,t=>e("div",{key:t,class:"flex items-center p-1 hover:bg-white rounded-md transition-colors"},[y(e("input",{id:t,"onUpdate:modelValue":s[4]||(s[4]=c=>i.type_working=c),value:t,type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors"},null,8,qe),[[E,i.type_working]]),e("label",{for:t,class:"ml-2 block text-sm text-gray-700 cursor-pointer w-full"},u(t),9,Ce)])),64))])]),e("div",null,[s[38]||(s[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mức lương",-1)),e("div",Ve,[e("div",Se,[y(e("input",{id:"salary-all","onUpdate:modelValue":s[5]||(s[5]=t=>i.salary_type=t),value:"",type:"radio",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 transition-colors"},null,512),[[w,i.salary_type]]),s[29]||(s[29]=e("label",{for:"salary-all",class:"ml-2 block text-sm text-gray-700 cursor-pointer w-full"}," Tất cả ",-1))]),e("div",Me,[y(e("input",{id:"salary-under-10","onUpdate:modelValue":s[6]||(s[6]=t=>i.salary_type=t),value:"0-10",type:"radio",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 transition-colors"},null,512),[[w,i.salary_type]]),s[30]||(s[30]=e("label",{for:"salary-under-10",class:"ml-2 block text-sm text-gray-700 cursor-pointer w-full"}," Dưới 10 triệu ",-1))]),e("div",Te,[y(e("input",{id:"salary-10-15","onUpdate:modelValue":s[7]||(s[7]=t=>i.salary_type=t),value:"10-15",type:"radio",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 transition-colors"},null,512),[[w,i.salary_type]]),s[31]||(s[31]=e("label",{for:"salary-10-15",class:"ml-2 block text-sm text-gray-700 cursor-pointer w-full"}," 10 - 15 triệu ",-1))]),e("div",Ue,[y(e("input",{id:"salary-15-20","onUpdate:modelValue":s[8]||(s[8]=t=>i.salary_type=t),value:"15-20",type:"radio",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 transition-colors"},null,512),[[w,i.salary_type]]),s[32]||(s[32]=e("label",{for:"salary-15-20",class:"ml-2 block text-sm text-gray-700 cursor-pointer w-full"}," 15 - 20 triệu ",-1))]),e("div",Pe,[y(e("input",{id:"salary-20-25","onUpdate:modelValue":s[9]||(s[9]=t=>i.salary_type=t),value:"20-25",type:"radio",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 transition-colors"},null,512),[[w,i.salary_type]]),s[33]||(s[33]=e("label",{for:"salary-20-25",class:"ml-2 block text-sm text-gray-700 cursor-pointer w-full"}," 20 - 25 triệu ",-1))]),e("div",Fe,[y(e("input",{id:"salary-25-30","onUpdate:modelValue":s[10]||(s[10]=t=>i.salary_type=t),value:"25-30",type:"radio",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 transition-colors"},null,512),[[w,i.salary_type]]),s[34]||(s[34]=e("label",{for:"salary-25-30",class:"ml-2 block text-sm text-gray-700 cursor-pointer w-full"}," 25 - 30 triệu ",-1))]),e("div",De,[y(e("input",{id:"salary-30-50","onUpdate:modelValue":s[11]||(s[11]=t=>i.salary_type=t),value:"30-50",type:"radio",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 transition-colors"},null,512),[[w,i.salary_type]]),s[35]||(s[35]=e("label",{for:"salary-30-50",class:"ml-2 block text-sm text-gray-700 cursor-pointer w-full"}," 30 - 50 triệu ",-1))]),e("div",ze,[y(e("input",{id:"salary-above-50","onUpdate:modelValue":s[12]||(s[12]=t=>i.salary_type=t),value:"50-999",type:"radio",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 transition-colors"},null,512),[[w,i.salary_type]]),s[36]||(s[36]=e("label",{for:"salary-above-50",class:"ml-2 block text-sm text-gray-700 cursor-pointer w-full"}," Trên 50 triệu ",-1))]),e("div",Le,[y(e("input",{id:"salary-negotiable","onUpdate:modelValue":s[13]||(s[13]=t=>i.salary_type=t),value:"negotiable",type:"radio",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 transition-colors"},null,512),[[w,i.salary_type]]),s[37]||(s[37]=e("label",{for:"salary-negotiable",class:"ml-2 block text-sm text-gray-700 cursor-pointer w-full"}," Thỏa thuận ",-1))])])]),e("div",null,[s[39]||(s[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kinh nghiệm",-1)),e("div",Ke,[(d(),n(T,null,U(v,t=>e("div",{key:t,class:"flex items-center p-1 hover:bg-white rounded-md transition-colors"},[y(e("input",{id:t,"onUpdate:modelValue":s[14]||(s[14]=c=>i.experience=c),value:t,type:"radio",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 transition-colors"},null,8,Ne),[[w,i.experience]]),e("label",{for:t,class:"ml-2 block text-sm text-gray-700 cursor-pointer w-full"},u(t),9,Je)])),64))])]),F.value?(d(),n("div",Ae,[e("div",Be,[e("div",Ie,[y(e("input",{id:"only-matching","onUpdate:modelValue":s[15]||(s[15]=t=>i.onlyMatching=t),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors"},null,512),[[E,i.onlyMatching]]),s[40]||(s[40]=e("label",{for:"only-matching",class:"ml-2 block text-sm text-blue-800 font-medium cursor-pointer w-full"}," Chỉ hiển thị việc làm phù hợp ",-1))]),s[41]||(s[41]=e("p",{class:"mt-1 text-xs text-blue-600 pl-6"},"Chỉ hiển thị các việc làm phù hợp với tiêu chí của bạn",-1))])])):b("",!0),e("div",{class:"grid grid-cols-2 gap-3 pt-2"},[e("button",{type:"button",onClick:S,class:"px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all flex items-center justify-center"},s[42]||(s[42]=[e("i",{class:"fas fa-redo-alt mr-2"},null,-1),h(" Xóa bộ lọc ")])),s[43]||(s[43]=e("button",{type:"submit",class:"px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all flex items-center justify-center"},[e("i",{class:"fas fa-search mr-2"}),h(" Áp dụng ")],-1))]),e("div",{class:"lg:hidden mt-4 sticky bottom-0 bg-white pt-2 pb-1 border-t border-gray-100"},[e("button",{type:"button",onClick:q,class:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all flex items-center justify-center"},s[44]||(s[44]=[e("i",{class:"fas fa-check mr-2"},null,-1),h(" Áp dụng và đóng ")]))])],32)]))}},H=X(Ee,[["__scopeId","data-v-8f1e1abb"]]),Re={class:"bg-gray-50 py-8 min-h-screen"},He={class:"container mx-auto px-4"},Xe={class:"bg-white rounded-xl shadow-sm p-5 mb-8 transition-all hover:shadow-md"},Ge={class:"flex flex-col md:flex-row md:space-x-4 space-y-4 md:space-y-0"},Oe={class:"flex-1 relative"},We={class:"lg:hidden sticky top-0 z-10 bg-gray-50 py-2"},Ye={class:"flex justify-between items-center bg-white rounded-xl shadow-sm p-4 mb-4"},Ze={class:"text-sm font-medium text-gray-800"},Qe={key:0,class:"h-5 bg-gray-200 rounded w-32 animate-pulse"},je={key:1,class:"flex items-center"},et={class:"flex items-center space-x-3"},tt={class:"relative"},st={class:"flex flex-col lg:flex-row space-y-6 lg:space-y-0 lg:space-x-6"},lt={class:"lg:hidden w-full"},rt={key:0,class:"mt-4"},at={class:"hidden lg:block lg:w-1/4 lg:sticky lg:top-4 lg:self-start"},ot={class:"lg:w-3/4"},it={class:"hidden lg:block bg-white rounded-xl shadow-sm p-5 mb-6"},nt={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-3 sm:space-y-0"},dt={class:"text-lg font-semibold text-gray-800"},ut={key:0,class:"h-7 bg-gray-200 rounded w-48 animate-pulse"},ct={key:1,class:"flex items-center"},yt={class:"flex items-center space-x-2"},pt={class:"relative"},mt={key:0,class:"space-y-6"},gt={key:1,class:"bg-white rounded-xl shadow-sm p-8 text-center"},ft={key:2},xt={class:"space-y-4"},vt={class:"relative"},bt=["onClick"],ht={class:"flex flex-col md:flex-row md:items-center"},_t={class:"mr-5 mb-4 md:mb-0"},wt={key:0,class:"w-16 h-16 rounded-lg overflow-hidden bg-white border border-gray-100 flex items-center justify-center"},kt=["src","alt"],$t={key:1,class:"w-16 h-16 rounded-lg flex items-center justify-center bg-blue-100 text-blue-700 font-bold text-xl"},qt={class:"flex-grow"},Ct={class:"text-lg font-semibold text-gray-900 mb-1 line-clamp-1 hover:text-blue-600 transition-colors"},Vt={class:"text-gray-600 text-sm mb-1"},St={class:"flex gap-2 items-center"},Mt={key:0},Tt={key:1},Ut={class:"flex flex-wrap gap-2 mt-3"},Pt={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs bg-gray-100 text-gray-800"},Ft={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs bg-gray-100 text-gray-800"},Dt={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs bg-blue-100 text-blue-800"},zt={class:"mt-4 md:mt-0 md:ml-4"},Lt={key:0,class:"text-green-600 font-medium"},Kt={key:1,class:"text-green-600 font-medium"},Nt={class:"text-gray-500 text-xs mt-1"},Jt={key:0,class:"flex justify-center mt-10"},At={class:"flex items-center space-x-2"},Bt=["disabled"],It={key:1,class:"px-2"},Et=["onClick"],Rt={key:2,class:"px-2"},Ht=["disabled"],Xt={class:"text-sm text-gray-500 ml-4 flex items-center"},Gt={__name:"JobSearch",setup(Y){const p=oe(),k=ie(),P=fe(),$=ne(),F=W(),V=x(!1),g=x([]),v=x(1),i=x(10),D=x(0),q=N({sort_by:p.query.sort_by||"created_at",sort_order:"desc"});x([]);const S=x(!1),_=x(!1),s=x(!1),t=N({q:p.query.q||"",city:p.query.city||"",position:p.query.position||"",experience:p.query.experience||"",type_working:p.query.type_working||"",salary_min:p.query.salary_min||"",salary_max:p.query.salary_max||"",scales:p.query.scales||"",field:p.query.field||"",page:p.query.page||1,page_size:p.query.page_size||10,sort_by:p.query.sort_by||"created_at",sort_order:"desc",all:p.query.all!=="false"}),c=x(1),m=de(()=>{const l=Math.floor(2.5),a=c.value;let o=Math.max(v.value-l,1),f=o+5-1;return f>a&&(f=a,o=Math.max(f-5+1,1)),Array.from({length:f-o+1},(le,re)=>o+re)}),C=r=>r?r.split(" ").map(l=>l[0]).join("").substring(0,2).toUpperCase():"JH",Z=(r,l)=>{if(!r&&!l)return"Thỏa thuận";const a=o=>o?(o/1e6).toLocaleString("vi-VN"):"";return r&&l?`${a(r)} - ${a(l)} triệu`:r?`Từ ${a(r)} triệu`:l?`Đến ${a(l)} triệu`:"Thỏa thuận"},Q=r=>{if(!r)return"";const l=new Date,a=new Date(r),o=Math.abs(l-a),f=Math.ceil(o/(1e3*60*60*24));return f===0?"Hôm nay":f===1?"Hôm qua":f<7?`${f} ngày trước`:f<30?`${Math.floor(f/7)} tuần trước`:a.toLocaleDateString("vi-VN")},j=async()=>{var r;if(F.isAuthenticated){s.value=!0;try{const l=await J.get("/api/criteria/");if(l.data.status===200){const a=l.data.data;_.value=!0,!t.city&&a.city&&(t.city=a.city),!t.experience&&a.experience&&(t.experience=a.experience),!t.type_working&&a.type_working&&(t.type_working=a.type_working),!t.scales&&a.scales&&(t.scales=a.scales),!t.salary_min&&a.salary_min&&(t.salary_min=a.salary_min),!t.field&&a.field&&(typeof a.field=="object"?t.field=a.field.id:t.field=a.field),!t.position&&a.position&&(typeof a.position=="object"?t.position=a.position.id:t.position=a.position)}}catch(l){((r=l.response)==null?void 0:r.status)!==404&&console.error("Lỗi khi lấy tiêu chí tìm việc:",l)}finally{s.value=!1}}};G(async()=>{await j(),A()}),R(()=>p.query,r=>{t.q=r.q||"",t.city=r.city||"",t.position=r.position||"",t.experience=r.experience||"",t.type_working=r.type_working||"",t.salary_min=r.salary_min||"",t.salary_max=r.salary_max||"",t.page=r.page||1,t.page_size=r.page_size||10,t.sort_by=r.sort_by||"created-at",t.sort_order=r.sort_order||"desc",t.all=r.all!=="false",A()},{deep:!0}),R(()=>q.sort_by,()=>{t.sort_by=q.sort_by,t.page=1,k.push({path:"/job-search",query:{...t}})});const A=async()=>{V.value=!0;try{const l=(await J.get("/api/posts/search/",{params:t})).data.data;console.log(l),g.value=l.results.map(a=>({id:a.id,title:a.title,location:`${a.city}${a.district?`, ${a.district}`:""}`,type_working:a.type_working,salary_min:a.salary_min,salary_max:a.salary_max,publishDate:new Date(a.created_at),experience:a.experience,description:a.description,required:a.required,interest:a.interest,isFeatured:!1,isSaved:a.is_saved||!1,is_enterprise_premium:a.is_enterprise_premium,enterprise_name:a.enterprise_name||"",enterprise_logo:a.enterprise_logo||"",matchesCriteria:_.value&&!s.value&&a.matches_criteria||!1})),c.value=l.total_pages,v.value=l.page,i.value=l.page_size,D.value=l.total}catch(r){console.error("Không thể lấy danh sách việc làm:",r),$.error("Có lỗi xảy ra khi tải danh sách việc làm")}finally{V.value=!1}},B=()=>{k.push({path:"/job-search",query:{q:t.q,city:t.city,position:t.position,experience:t.experience,type_working:t.type_working,salary_min:t.salary_min,salary_max:t.salary_max,scales:t.scales,field:t.field,page:1,page_size:t.page_size,sort_by:t.sort_by,sort_order:t.sort_order,all:t.all}})},I=r=>{t.q=r.q||t.q,t.city=r.city||t.city,t.position=r.position||t.position,t.experience=r.experience||t.experience,t.type_working=r.type_working||t.type_working,t.salary_min=r.salary_min||t.salary_min,t.salary_max=r.salary_max||t.salary_max,t.negotiable=r.is_salary_negotiable||t.negotiable,t.scales=r.scales||t.scales,t.field=r.field||t.field,t.all=r.all!==void 0?r.all:t.all,t.page=1,t.all===!1&&(r.q||(t.q=""),r.city||(t.city=""),r.position||(t.position=""),r.experience||(t.experience=""),r.type_working||(t.type_working=""),r.salary_min||(t.salary_min=""),r.salary_max||(t.salary_max=""),r.scales||(t.scales=""),r.field||(t.field="")),k.push({path:"/job-search",query:{...t}})},ee=()=>{t.q="",t.city="",t.position="",t.experience="",t.type_working="",t.salary_min="",t.salary_max="",t.page=1,t.sort_by="created_at",q.sort_by="",k.push({path:"/job-search"})},z=r=>{r<1||r>c.value||(t.page=r,k.push({path:"/job-search",query:{...t}}))},te=async r=>{try{const l=g.value.findIndex(a=>a.id===r.id);if(l===-1)return;if(g.value[l].isSaved){const a=await P.deleteSavedPostByPostId(r.id);a.success?(g.value[l].isSaved=!1,$.success("Đã bỏ lưu việc làm thành công")):$.error(a.error)}else{const a=await P.savePost(r.id);a.success?(g.value[l].isSaved=!0,$.success("Đã lưu việc làm thành công")):$.error(a.error)}}catch(l){console.error("Error handling save job:",l),$.error("Có lỗi xảy ra khi thực hiện thao tác")}},se=()=>{S.value=!S.value};return(r,l)=>{const a=ue("router-link");return d(),n("div",Re,[e("div",He,[l[29]||(l[29]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl md:text-3xl font-bold text-gray-900 mb-2"},"Tìm kiếm việc làm"),e("p",{class:"text-gray-600"},"Khám phá cơ hội nghề nghiệp phù hợp với bạn")],-1)),e("div",Xe,[e("div",Ge,[e("div",Oe,[l[8]||(l[8]=e("div",{class:"absolute inset-y-0 left-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-search text-gray-400"})],-1)),y(e("input",{"onUpdate:modelValue":l[0]||(l[0]=o=>t.q=o),type:"text",placeholder:"Tiêu đề công việc, vị trí, kỹ năng...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",onKeyup:ce(B,["enter"])},null,544),[[O,t.q]])]),e("div",null,[e("button",{onClick:B,class:"w-full px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-all transform active:scale-95 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},l[9]||(l[9]=[e("div",{class:"flex items-center justify-center"},[e("i",{class:"fas fa-search mr-2"}),h(" Tìm kiếm ")],-1)]))])])]),e("div",We,[e("div",Ye,[e("div",Ze,[V.value?(d(),n("div",Qe)):(d(),n("span",je,[l[10]||(l[10]=e("i",{class:"fas fa-clipboard-list text-blue-500 mr-2"},null,-1)),h(" "+u(g.value.length===0?"Không có kết quả":`${g.value.length} việc làm`),1)]))]),e("div",et,[e("div",tt,[y(e("select",{"onUpdate:modelValue":l[1]||(l[1]=o=>q.sort_by=o),class:"pl-2 pr-6 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 appearance-none cursor-pointer bg-white transition-all"},l[11]||(l[11]=[e("option",{value:"created_at"},"Mới nhất",-1),e("option",{value:"salary_max"},"Lương cao",-1)]),512),[[L,q.sort_by]]),l[12]||(l[12]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-gray-700"},[e("i",{class:"fas fa-chevron-down text-xs"})],-1))])])])]),e("div",st,[e("div",lt,[e("button",{onClick:se,class:"w-full flex items-center justify-between px-4 py-3 bg-white rounded-xl shadow-sm hover:shadow-md transition-all"},[l[13]||(l[13]=e("span",{class:"flex items-center font-medium text-gray-800"},[e("i",{class:"fas fa-filter text-blue-500 mr-2"}),h(" Bộ lọc tìm kiếm ")],-1)),e("i",{class:M(["fas",S.value?"fa-chevron-up":"fa-chevron-down"])},null,2)]),S.value?(d(),n("div",rt,[K(H,{onFilter:I,onClose:l[2]||(l[2]=o=>S.value=!1)})])):b("",!0)]),e("div",at,[K(H,{onFilter:I})]),e("div",ot,[e("div",it,[e("div",nt,[e("h2",dt,[V.value?(d(),n("div",ut)):(d(),n("span",ct,[l[14]||(l[14]=e("i",{class:"fas fa-clipboard-list text-blue-500 mr-2"},null,-1)),h(" "+u(g.value.length===0?"Không có kết quả":`Tìm thấy ${g.value.length} việc làm`),1)]))]),e("div",yt,[l[17]||(l[17]=e("label",{for:"sort",class:"text-sm text-gray-600"},"Sắp xếp:",-1)),e("div",pt,[y(e("select",{id:"sort","onUpdate:modelValue":l[3]||(l[3]=o=>q.sort_by=o),class:"pl-3 pr-8 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none cursor-pointer bg-white transition-all"},l[15]||(l[15]=[e("option",{value:"created_at"},"Mới nhất",-1),e("option",{value:"salary_max"},"Lương cao đến thấp",-1)]),512),[[L,q.sort_by]]),l[16]||(l[16]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[e("i",{class:"fas fa-chevron-down text-xs"})],-1))])])])]),V.value?(d(),n("div",mt,[(d(),n(T,null,U(3,o=>e("div",{key:`skeleton-${o}`,class:"bg-white rounded-xl shadow-sm p-5 animate-pulse"},l[18]||(l[18]=[ye('<div class="flex flex-col md:flex-row md:items-center" data-v-1e930c77><div class="md:w-16 md:h-16 w-12 h-12 bg-gray-200 rounded-lg mb-4 md:mb-0 md:mr-4" data-v-1e930c77></div><div class="flex-grow" data-v-1e930c77><div class="h-6 bg-gray-200 rounded w-3/4 mb-3" data-v-1e930c77></div><div class="h-4 bg-gray-200 rounded w-1/2 mb-2" data-v-1e930c77></div><div class="h-4 bg-gray-200 rounded w-1/4" data-v-1e930c77></div></div><div class="mt-4 md:mt-0 md:ml-4" data-v-1e930c77><div class="h-8 bg-gray-200 rounded w-24" data-v-1e930c77></div></div></div>',1)]))),64))])):g.value.length===0?(d(),n("div",gt,[l[20]||(l[20]=e("div",{class:"text-5xl text-blue-500 opacity-80 mb-4"},[e("i",{class:"fas fa-search"})],-1)),l[21]||(l[21]=e("h3",{class:"text-xl font-semibold text-gray-800 mb-2"},"Không tìm thấy việc làm phù hợp",-1)),l[22]||(l[22]=e("p",{class:"text-gray-600 mb-6 max-w-md mx-auto"},"Vui lòng thử lại với từ khóa khác hoặc bỏ bớt bộ lọc",-1)),e("button",{onClick:ee,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all flex items-center mx-auto"},l[19]||(l[19]=[e("i",{class:"fas fa-redo-alt mr-2"},null,-1),h(" Xóa bộ lọc ")]))])):(d(),n("div",ft,[e("div",xt,[(d(!0),n(T,null,U(g.value,o=>(d(),n("div",{key:o.id,class:M(["bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-all transform hover:-translate-y-1 border border-gray-100",{"border-l-4 border-l-green-500":o.matchesCriteria}])},[e("div",vt,[e("button",{onClick:f=>te(o),class:M(["absolute top-4 right-4 z-10 text-gray-400 hover:text-red-500 transition-colors focus:outline-none bg-white rounded-full w-8 h-8 flex items-center justify-center shadow-sm",{"text-red-500":o.isSaved}])},[e("i",{class:M(o.isSaved?"fas fa-heart":"far fa-heart")},null,2)],10,bt),K(a,{to:`/job/${o.id}`,class:"block p-5"},{default:pe(()=>[e("div",ht,[e("div",_t,[o.enterprise_logo?(d(),n("div",wt,[e("img",{src:o.enterprise_logo,alt:o.enterprise_name,class:"object-contain w-full h-full"},null,8,kt)])):(d(),n("div",$t,u(C(o.enterprise_name)),1))]),e("div",qt,[e("h3",Ct,u(o.title),1),e("p",Vt,u(o.enterprise_name||"Công ty ẩn danh"),1),e("div",St,[o!=null&&o.is_enterprise_premium?(d(),n("div",Mt,l[23]||(l[23]=[e("span",{class:"inline-flex items-center px-2 py-1 bg-amber-400 text-white rounded-full text-xs font-semibold shadow"}," Pro Company ",-1)]))):b("",!0),o.matchesCriteria?(d(),n("div",Tt,l[24]||(l[24]=[e("span",{class:"inline-flex items-center px-2 py-1 bg-green-500 text-white rounded-full text-xs font-semibold shadow"},[e("i",{class:"fas fa-check-circle mr-1"}),h(" Phù hợp ")],-1)]))):b("",!0)]),e("div",Ut,[o.location?(d(),n("div",Pt,[l[25]||(l[25]=e("i",{class:"fas fa-map-marker-alt text-gray-500 mr-1"},null,-1)),h(" "+u(o.location),1)])):b("",!0),o.experience?(d(),n("div",Ft,[l[26]||(l[26]=e("i",{class:"fas fa-briefcase text-gray-500 mr-1"},null,-1)),h(" "+u(o.experience),1)])):b("",!0),o.type_working?(d(),n("div",Dt,u(o.type_working),1)):b("",!0)])]),e("div",zt,[o.salary_min||o.salary_max?(d(),n("div",Lt,u(Z(o.salary_min,o.salary_max)),1)):(d(),n("div",Kt," Thỏa thuận ")),e("div",Nt,u(Q(o.publishDate)),1)])])]),_:2},1032,["to"])])],2))),128))]),c.value>1?(d(),n("div",Jt,[e("nav",At,[e("button",{class:M(["flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors",{"opacity-50 cursor-not-allowed":v.value===1}]),disabled:v.value===1,onClick:l[4]||(l[4]=o=>z(v.value-1))},l[27]||(l[27]=[e("i",{class:"fas fa-chevron-left text-gray-500"},null,-1)]),10,Bt),m.value.includes(1)?b("",!0):(d(),n("button",{key:0,onClick:l[5]||(l[5]=o=>z(1)),class:"flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 hover:bg-gray-50 text-gray-700"}," 1 ")),m.value[0]>2?(d(),n("span",It,"...")):b("",!0),(d(!0),n(T,null,U(m.value,o=>(d(),n("button",{key:o,onClick:f=>z(o),class:M(["flex items-center justify-center w-10 h-10 rounded-lg transition-colors",v.value===o?"bg-blue-600 text-white":"border border-gray-300 hover:bg-gray-50 text-gray-700"])},u(o),11,Et))),128)),m.value[m.value.length-1]<c.value-1?(d(),n("span",Rt,"...")):b("",!0),m.value.includes(c.value)?b("",!0):(d(),n("button",{key:3,onClick:l[6]||(l[6]=o=>z(c.value)),class:"flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 hover:bg-gray-50 text-gray-700"},u(c.value),1)),e("button",{class:M(["flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors",{"opacity-50 cursor-not-allowed":v.value===c.value}]),disabled:v.value===c.value,onClick:l[7]||(l[7]=o=>z(v.value+1))},l[28]||(l[28]=[e("i",{class:"fas fa-chevron-right text-gray-500"},null,-1)]),10,Ht)]),e("div",Xt," Trang "+u(v.value)+"/"+u(c.value)+" ("+u(D.value)+" kết quả) ",1)])):b("",!0)]))])])])])}}},Qt=X(Gt,[["__scopeId","data-v-1e930c77"]]);export{Qt as default};
