import{_ as ge,B as pe,u as ve,j as y,i as fe,D as Y,E as O,o as he,r as xe,c as u,a as r,e,d as f,F,h as P,b as A,t as i,g as d,p as a,N as c,k as Q,w as M,n as h,f as b,x as $,q as B,v as q,C as ye,O as W}from"./index-CV7pDqKO.js";import{u as be}from"./post-CJDrOfeK.js";import{_ as U}from"./BaseButton-lFzL_fWZ.js";import{u as _e}from"./useToast-B6sEZtkc.js";const we={class:"job-detail-container px-4 pb-8 pt-4"},ke={class:"max-w-5xl mx-auto"},Ce={key:0,class:"space-y-6"},De={class:"bg-white shadow-lg rounded-lg overflow-hidden mb-6"},Ie={class:"p-4 md:p-6"},Te={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 md:gap-6 mb-6"},Ve={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Se={class:"lg:col-span-2 space-y-6"},Le={class:"bg-white shadow-lg rounded-lg overflow-hidden"},je={class:"p-4 md:p-6"},Ne={class:"space-y-6"},Ee={class:"bg-white shadow-lg rounded-lg overflow-hidden"},Fe={class:"p-4 md:p-6"},Pe={class:"space-y-4"},Me={class:"bg-white shadow-lg rounded-lg overflow-hidden"},$e={class:"p-4 md:p-6"},Be={class:"flex flex-wrap gap-2"},qe={key:1},Ke={class:"bg-white shadow-lg rounded-lg overflow-hidden mb-6"},ze={class:"p-4 md:p-6"},Oe={class:"text-xl md:text-2xl font-bold text-gray-900 mb-4"},Ae={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 md:gap-6 mb-6"},Ue={class:"flex items-center transform hover:scale-105 transition-transform"},Ge={class:"w-10 h-10 md:w-12 md:h-12 bg-emerald-100 rounded-full flex items-center justify-center mr-3"},Re={class:"font-medium text-sm md:text-base"},He={class:"flex items-center transform hover:scale-105 transition-transform"},Xe={class:"w-10 h-10 md:w-12 md:h-12 bg-blue-100 rounded-full flex items-center justify-center mr-3"},Je={class:"font-medium text-sm md:text-base truncate max-w-[180px]"},Ye={class:"flex items-center transform hover:scale-105 transition-transform"},Qe={class:"w-10 h-10 md:w-12 md:h-12 bg-purple-100 rounded-full flex items-center justify-center mr-3"},We={class:"font-medium text-sm md:text-base"},Ze={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},et={class:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto mb-4 sm:mb-0"},tt={class:"text-white font-medium"},st={key:0,class:"hidden sm:flex items-center gap-2 bg-green-50 px-4 py-2 rounded-lg border border-green-100 shadow-sm"},nt={class:"text-gray-700 text-sm"},at={key:0,class:"sm:hidden mt-4 flex items-center gap-2 bg-green-50 px-4 py-3 rounded-lg border border-green-100 shadow-sm"},lt={class:"text-gray-700 text-sm"},it={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ot={class:"lg:col-span-2 space-y-6"},rt={class:"bg-white shadow-lg rounded-lg overflow-hidden transform hover:shadow-xl transition-all duration-300"},dt={class:"p-4 md:p-6"},ut={class:"flex flex-wrap items-center gap-2 mb-4"},ct={class:"text-gray-600 bg-gray-100 px-3 py-1 rounded-full text-xs md:text-sm hover:bg-gray-200 transition-colors"},mt={class:"text-gray-600 bg-gray-100 px-3 py-1 rounded-full text-xs md:text-sm hover:bg-gray-200 transition-colors"},gt={class:"mb-8"},pt={class:"prose text-gray-600 text-sm md:text-base whitespace-pre-line"},vt={class:"mb-8"},ft={class:"prose text-gray-600 text-sm md:text-base whitespace-pre-line"},ht={class:"prose text-gray-600 text-sm md:text-base whitespace-pre-line"},xt={class:"space-y-6"},yt={class:"bg-white shadow-lg rounded-lg overflow-hidden transform hover:shadow-xl transition-all duration-300"},bt={class:"p-4 md:p-6"},_t={class:"flex items-center mb-6"},wt=["src"],kt={class:"ml-3"},Ct={class:"font-bold text-gray-900 text-sm md:text-base"},Dt={key:0},It={class:"space-y-4 text-gray-600 text-sm md:text-base"},Tt={class:"flex items-start"},Vt={class:"bg-white shadow-lg rounded-lg overflow-hidden transform hover:shadow-xl transition-all duration-300"},St={class:"p-4 md:p-6"},Lt={class:"space-y-4"},jt={class:"flex items-center transform hover:scale-105 transition-transform"},Nt={class:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0"},Et={class:"font-medium text-sm md:text-base"},Ft={class:"flex items-center transform hover:scale-105 transition-transform"},Pt={class:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0"},Mt={class:"font-medium text-sm md:text-base"},$t={class:"flex items-center transform hover:scale-105 transition-transform"},Bt={class:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0"},qt={class:"font-medium text-sm md:text-base"},Kt={class:"flex items-center transform hover:scale-105 transition-transform"},zt={class:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0"},Ot={class:"font-medium text-sm md:text-base"},At={class:"flex items-center gap-1"},Ut={key:0,class:"flex items-center gap-2 bg-blue-50 py-2 px-3 rounded-lg text-blue-700 transform hover:scale-105 transition-all duration-300"},Gt={class:"font-medium"},Rt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center px-4"},Ht={class:"flex items-center justify-between p-4 border-b"},Xt={class:"text-lg md:text-xl font-bold text-gray-900 pr-6"},Jt={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md text-red-700"},Yt={class:"flex items-center"},Qt={class:"space-y-4"},Wt={key:0,class:"mt-1 text-sm text-red-500"},Zt={key:0,class:"mt-1 text-sm text-red-500"},es={key:0,class:"mt-1 text-sm text-red-500"},ts={key:0,class:"mt-1 text-sm text-red-500"},ss={key:0,class:"flex items-center justify-between"},ns={class:"flex items-center"},as={class:"truncate"},ls={class:"font-medium text-gray-900 text-sm md:text-base truncate"},is={class:"text-xs md:text-sm text-gray-500"},os={key:1,class:"flex flex-col items-center justify-center"},rs={class:"text-center text-gray-500 text-sm md:text-base"},ds={class:"text-blue-600 cursor-pointer hover:underline"},us={key:0,class:"mt-1 text-sm text-red-500"},cs={class:"mt-6 flex flex-col-reverse sm:flex-row sm:justify-end gap-2"},ms=["disabled"],gs={key:0,class:"flex items-center justify-center"},ps={key:1},vs={key:1,class:"fixed inset-0 z-50 flex items-center justify-center px-4"},fs={class:"p-4 md:p-6"},hs={class:"flex items-center justify-center mb-4"},xs={class:"bg-yellow-100 p-3 rounded-full"},ys={class:"flex flex-col sm:flex-row justify-center gap-2 sm:space-x-4"},bs={class:"p-4 flex items-center"},_s={class:"flex-1 mr-2"},ws={__name:"JobDetail",setup(ks){const L=pe(),C=ve(),n=y({}),K=y(!0),V=y(!1),D=y(!1),S=y(!1),_=y(null),j=y(!1),o=fe(),{addToast:w}=_e(),p=Y({name:"",email:"",phone_number:"",description:""}),l=Y({name:"",email:"",phone_number:"",description:"",cv:""}),G=y(""),k=y(""),I=y(!1),x=y("success"),Z=s=>{s.target.src="/default-company-logo.png"},N=s=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(s),ee=s=>s.is_salary_negotiable?"Thoả thuận":s.salary_min===0&&s.salary_max>0?`Tới ${N(s.salary_max)}`:s.salary_max===0&&s.salary_min>0?`Từ ${N(s.salary_min)}`:s.salary_min>0&&s.salary_max>0?`${N(s.salary_min)} - ${N(s.salary_max)}`:"Thoả thuận",te=async()=>{try{K.value=!0;const t=await be().fetchPostById(L.params.id);n.value=t.data.data}catch(s){console.error("Error fetching job details:",s)}finally{K.value=!1}},E=()=>{V.value=!1,Object.keys(p).forEach(s=>{p[s]=""}),Object.keys(l).forEach(s=>{l[s]=""}),_.value=null,S.value=!1,k.value=""},se=s=>{const t=s.target.files[0];t&&R(t)},ne=s=>{S.value=!1;const t=s.dataTransfer.files[0];t&&R(t)},R=s=>{if(l.cv="",!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(s.type)){l.cv="Chỉ chấp nhận file PDF, DOC hoặc DOCX";return}if(s.size>5*1024*1024){l.cv="Kích thước file không được vượt quá 5MB";return}_.value=s},ae=()=>{_.value=null},le=s=>{if(s===0)return"0 Bytes";const t=1024,g=["Bytes","KB","MB","GB"],v=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,v)).toFixed(2))+" "+g[v]},ie=()=>{let s=!0;return Object.keys(l).forEach(t=>{l[t]=""}),p.name.trim()||(l.name="Vui lòng nhập họ và tên",s=!1),p.email.trim()?/^\S+@\S+\.\S+$/.test(p.email)||(l.email="Email không hợp lệ",s=!1):(l.email="Vui lòng nhập email",s=!1),p.phone_number.trim()?/^[0-9]{10}$/.test(p.phone_number.replace(/\s/g,""))||(l.phone_number="Số điện thoại không hợp lệ",s=!1):(l.phone_number="Vui lòng nhập số điện thoại",s=!1),p.description.trim()||(l.description="Vui lòng nhập giới thiệu bản thân",s=!1),_.value||(l.cv="Vui lòng tải lên CV của bạn",s=!1),s},oe=async()=>{var s,t;if(ie())try{j.value=!0,k.value="";const g=new FormData;g.append("post",n.value.id),g.append("name",p.name),g.append("email",p.email),g.append("phone_number",p.phone_number),g.append("description",p.description),g.append("cv",_.value),(await ye.post("/api/cv/create/",g,{headers:{"Content-Type":"multipart/form-data"}})).data.status===201&&(E(),ue("Ứng tuyển thành công! CV của bạn đã được gửi đến nhà tuyển dụng.","success"),n.value.appliedDate=new Date().toLocaleDateString("vi-VN"))}catch(g){if(console.error("Error submitting application:",g),(t=(s=g.response)==null?void 0:s.data)!=null&&t.errors){const v=g.response.data.errors;Object.keys(v).forEach(T=>{l.hasOwnProperty(T)&&(l[T]=v[T])}),k.value="Vui lòng kiểm tra lại thông tin đã nhập."}else k.value="Có lỗi xảy ra khi gửi ứng tuyển. Vui lòng thử lại sau."}finally{j.value=!1}},re=()=>{if(!o.isLoggedIn){w({title:"Cần đăng nhập",message:"Vui lòng đăng nhập để ứng tuyển công việc này",type:"warning"}),C.push({name:"Login",query:{redirect:L.fullPath}});return}if(!o.isCandidate){w({title:"Không thể ứng tuyển",message:"Chỉ tài khoản ứng viên mới có thể ứng tuyển công việc",type:"error"});return}V.value=!0},de=()=>{D.value=!1,C.push({name:"Login",query:{redirect:L.fullPath}})},ue=(s,t="success")=>{localStorage.setItem("notification",JSON.stringify({message:s,type:t,timestamp:new Date().getTime()})),G.value=t==="success"?s:"",k.value=t==="error"?s:"",x.value=t,I.value=!0,setTimeout(()=>{I.value=!1},5e3)},H=O(()=>{var s;return!!((s=n.value)!=null&&s.latest_application_date)});O(()=>{var s;return((s=n.value)==null?void 0:s.can_chat_with_employer)===!0}),O(()=>{var s,t;return o.isLoggedIn&&((s=o.userInfo)!=null&&s.is_premium)?!0:((t=n.value)==null?void 0:t.can_view_applicants)===!0});const ce=s=>{if(!s)return"Không xác định";const t=new Date(s);return new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"}).format(t)},z=s=>{let t="Tính năng Premium",g="",v="crown";s==="chat"?(t="Trò chuyện với nhà tuyển dụng",g="Nâng cấp lên gói Premium để có thể trò chuyện trực tiếp với nhà tuyển dụng và tăng cơ hội được nhận việc!",v="comment-dots"):s==="view-applicants"&&(t="Xem số lượng ứng viên",g="Nâng cấp lên gói Premium để xem số lượng người đã ứng tuyển vào vị trí này và đánh giá mức độ cạnh tranh!",v="users"),w({title:t,message:g,type:"premium",icon:v,duration:7e3,action:{text:"Nâng cấp ngay",callback:()=>C.push({name:"CandidatePremium"})}}),setTimeout(()=>{C.push({name:"CandidatePremium"})},3e3)},me=()=>{var t,g;if(console.log("------------ DEBUG CHAT WITH EMPLOYER ------------"),console.log("Auth status:",{isLoggedIn:o.isLoggedIn,isAuthenticated:o.isAuthenticated,userRole:o.userRole,isCandidate:o.isCandidate,isPremium:(t=o.userInfo)==null?void 0:t.is_premium,token:!!localStorage.getItem("token")}),!o.isLoggedIn){console.error("Không thể chat: Người dùng chưa đăng nhập"),w({title:"Cần đăng nhập",message:"Vui lòng đăng nhập để nhắn tin với nhà tuyển dụng",type:"warning"}),C.push({name:"Login",query:{redirect:L.fullPath}});return}if(!o.isCandidate){console.error("Không thể chat: Người dùng không phải là ứng viên"),w({title:"Không thể nhắn tin",message:"Chỉ tài khoản ứng viên mới có thể nhắn tin với nhà tuyển dụng",type:"error"});return}if(!((g=o.userInfo)!=null&&g.is_premium)){console.error("Không thể chat: Người dùng không phải là Premium"),z("chat");return}if(!n.value){w({title:"Lỗi",message:"Không tìm thấy thông tin công việc",type:"error"});return}let s=null;if(console.log("Thông tin job để nhắn tin:",{id:n.value.id,title:n.value.title,user_id:n.value.user_id,enterprise_id:n.value.enterprise_id,enterprise:n.value.enterprise,enterprise_name:n.value.enterprise_name}),n.value.user_id?(s=n.value.user_id,console.log("Sử dụng user_id:",s)):n.value.enterprise_id?(s=n.value.enterprise_id,console.log("Sử dụng enterprise_id:",s)):n.value.enterprise&&(s=n.value.enterprise,console.log("Sử dụng enterprise:",s)),!s){w({title:"Lỗi",message:"Không tìm thấy thông tin nhà tuyển dụng",type:"error"});return}W.connected||(console.log("Đang khởi tạo kết nối Socket trước khi chuyển trang..."),W.init()),console.log(`Chuyển hướng đến trang nhắn tin với nhà tuyển dụng ID: ${s}`),setTimeout(()=>{C.push({name:"candidate-messages",query:{user:s}}).catch(v=>{console.error("Lỗi chuyển hướng đến trang chat:",v),w({title:"Lỗi chuyển hướng",message:"Không thể mở trang chat, vui lòng thử lại sau",type:"error"})})},300)};return he(()=>{o.fetchUserProfile().then(()=>{var s;console.log("[DEBUG] Thông tin người dùng sau khi tải profile:",o.userInfo),console.log("[DEBUG] Trạng thái premium sau khi tải profile:",(s=o.userInfo)==null?void 0:s.is_premium)}),te()}),(s,t)=>{var v,T,X,J;const g=xe("router-link");return r(),u("div",we,[e("div",ke,[K.value?(r(),u("div",Ce,[e("div",De,[e("div",Ie,[t[13]||(t[13]=e("div",{class:"h-8 bg-gray-200 rounded w-full md:w-2/3 mb-4 animate-pulse"},null,-1)),e("div",Te,[(r(),u(F,null,P(3,m=>e("div",{key:m,class:"flex items-center animate-pulse"},t[12]||(t[12]=[e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gray-200 rounded-full mr-3"},null,-1),e("div",{class:"flex-1"},[e("div",{class:"h-4 bg-gray-200 rounded w-20 mb-2"}),e("div",{class:"h-5 bg-gray-200 rounded w-32"})],-1)]))),64))]),t[14]||(t[14]=e("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between animate-pulse"},[e("div",{class:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto mb-4 sm:mb-0"},[e("div",{class:"h-10 w-full sm:w-32 bg-gray-200 rounded-lg"}),e("div",{class:"h-10 w-full sm:w-24 bg-gray-200 rounded-lg"})])],-1))])]),e("div",Ve,[e("div",Se,[e("div",Le,[e("div",je,[t[16]||(t[16]=e("div",{class:"flex gap-2 mb-4 animate-pulse"},[e("div",{class:"h-6 w-24 bg-gray-200 rounded-full"}),e("div",{class:"h-6 w-24 bg-gray-200 rounded-full"})],-1)),(r(),u(F,null,P(3,m=>e("div",{key:m,class:"mb-8 animate-pulse"},t[15]||(t[15]=[A('<div class="h-7 bg-gray-200 rounded w-48 mb-4" data-v-fda6175a></div><div class="space-y-2" data-v-fda6175a><div class="h-4 bg-gray-200 rounded w-full" data-v-fda6175a></div><div class="h-4 bg-gray-200 rounded w-5/6" data-v-fda6175a></div><div class="h-4 bg-gray-200 rounded w-4/6" data-v-fda6175a></div></div>',2)]))),64))])])]),e("div",Ne,[t[20]||(t[20]=A('<div class="bg-white shadow-lg rounded-lg overflow-hidden" data-v-fda6175a><div class="p-4 md:p-6 animate-pulse" data-v-fda6175a><div class="flex items-center mb-6" data-v-fda6175a><div class="w-16 h-16 bg-gray-200 rounded mr-4" data-v-fda6175a></div><div class="flex-1" data-v-fda6175a><div class="h-5 bg-gray-200 rounded w-3/4 mb-2" data-v-fda6175a></div><div class="h-4 bg-gray-200 rounded w-1/2" data-v-fda6175a></div></div></div><div class="space-y-4" data-v-fda6175a><div class="h-4 bg-gray-200 rounded w-full" data-v-fda6175a></div><div class="h-4 bg-gray-200 rounded w-2/3" data-v-fda6175a></div></div></div></div>',1)),e("div",Ee,[e("div",Fe,[t[18]||(t[18]=e("div",{class:"h-6 bg-gray-200 rounded w-40 mb-4 animate-pulse"},null,-1)),e("div",Pe,[(r(),u(F,null,P(5,m=>e("div",{key:m,class:"flex items-center animate-pulse"},t[17]||(t[17]=[e("div",{class:"w-10 h-10 bg-gray-200 rounded-full mr-3"},null,-1),e("div",{class:"flex-1"},[e("div",{class:"h-4 bg-gray-200 rounded w-20 mb-1"}),e("div",{class:"h-5 bg-gray-200 rounded w-32"})],-1)]))),64))])])]),e("div",Me,[e("div",$e,[t[19]||(t[19]=e("div",{class:"h-6 bg-gray-200 rounded w-40 mb-4 animate-pulse"},null,-1)),e("div",Be,[(r(),u(F,null,P(5,m=>e("div",{key:m,class:"h-6 bg-gray-200 rounded-full w-24 animate-pulse"})),64))])])])])])])):(r(),u("div",qe,[e("div",Ke,[e("div",ze,[e("h1",Oe,i(n.value.title),1),e("div",Ae,[e("div",Ue,[e("div",Ge,[d(a(c),{icon:"money-bill",class:"text-emerald-500 text-lg md:text-xl"})]),e("div",null,[t[21]||(t[21]=e("div",{class:"text-gray-500 text-xs md:text-sm"},"Mức lương",-1)),e("div",Re,i(ee(n.value)),1)])]),e("div",He,[e("div",Xe,[d(a(c),{icon:"map-marker-alt",class:"text-blue-500 text-lg md:text-xl"})]),e("div",null,[t[22]||(t[22]=e("div",{class:"text-gray-500 text-xs md:text-sm"},"Địa điểm",-1)),e("div",Je,i(n.value.city)+i(n.value.district?`, ${n.value.district}`:""),1)])]),e("div",Ye,[e("div",Qe,[d(a(c),{icon:"briefcase",class:"text-purple-500 text-lg md:text-xl"})]),e("div",null,[t[23]||(t[23]=e("div",{class:"text-gray-500 text-xs md:text-sm"},"Kinh nghiệm",-1)),e("div",We,i(n.value.experience),1)])])]),e("div",Ze,[e("div",et,[d(U,{text:"Ứng tuyển ngay",variant:"primary",size:"md",class:h(["relative w-full sm:w-auto px-4 md:px-6 py-2.5 md:py-3 flex items-center justify-center gap-2 transform hover:scale-105 transition-all duration-300 shadow-md hover:shadow-lg bg-gradient-to-r from-blue-600 to-indigo-600 rounded-md overflow-hidden",{"animate-pulse-gentle":!a(o).isLoggedIn}]),disabled:H.value,onClick:re},{default:M(()=>[d(a(c),{icon:"paper-plane",class:"text-white"}),e("span",tt,i(H.value?"Đã ứng tuyển":"Ứng tuyển ngay"),1)]),_:1},8,["class","disabled"]),a(o).isCandidate&&a(o).isLoggedIn&&((v=a(o).userInfo)!=null&&v.is_premium)?(r(),Q(U,{key:0,type:"button",variant:"secondary",size:"md",class:"w-full sm:w-auto px-4 md:px-6 py-2.5 md:py-3 flex items-center justify-center gap-2 transform hover:scale-105 transition-all duration-300 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 hover:border-blue-300 shadow-md hover:shadow-lg",onClick:me},{default:M(()=>[d(a(c),{icon:"comment-dots",class:"text-blue-600"}),t[24]||(t[24]=e("span",{class:"text-blue-600 font-medium"},"Nhắn tin",-1))]),_:1})):a(o).isCandidate&&a(o).isLoggedIn&&!((T=a(o).userInfo)!=null&&T.is_premium)?(r(),Q(U,{key:1,type:"button",variant:"secondary",size:"md",class:"w-full sm:w-auto px-4 md:px-6 py-2.5 md:py-3 flex items-center justify-center gap-2 transform hover:scale-105 transition-all duration-300 bg-gradient-to-r from-yellow-50 to-amber-50 border border-yellow-200 hover:border-yellow-300 shadow-md hover:shadow-lg",onClick:t[0]||(t[0]=m=>z("chat"))},{default:M(()=>[d(a(c),{icon:"comment-dots",class:"text-yellow-600"}),t[25]||(t[25]=e("span",{class:"text-yellow-600 font-medium"},"Nâng cấp để nhắn tin",-1))]),_:1})):f("",!0)]),a(o).isLoggedIn&&n.value.latest_application_date?(r(),u("div",st,[d(a(c),{icon:"check-circle",class:"text-green-500"}),e("div",nt,[e("span",null,"Đã ứng tuyển: "+i(n.value.latest_application_date),1),t[26]||(t[26]=e("a",{href:"my-applications",class:"text-blue-600 hover:underline ml-2 font-medium"},"Xem CV",-1))])])):f("",!0)]),a(o).isLoggedIn&&n.value.latest_application_date?(r(),u("div",at,[d(a(c),{icon:"check-circle",class:"text-green-500"}),e("div",lt,[e("span",null,"Đã ứng tuyển: "+i(n.value.latest_application_date),1),t[27]||(t[27]=e("a",{href:"my-applications",class:"text-blue-600 hover:underline ml-2 font-medium"},"Xem CV",-1))])])):f("",!0)])]),e("div",it,[e("div",ot,[e("div",rt,[e("div",dt,[e("div",ut,[e("span",ct,i(n.value.position_name),1),e("span",mt,i(n.value.field_name),1)]),e("section",gt,[t[28]||(t[28]=e("h2",{class:"text-lg md:text-xl font-bold text-gray-900 mb-4"},"Mô tả công việc",-1)),e("div",pt,i(n.value.description),1)]),e("section",vt,[t[29]||(t[29]=e("h2",{class:"text-lg md:text-xl font-bold text-gray-900 mb-4"},"Yêu cầu ứng viên",-1)),e("div",ft,i(n.value.required),1)]),e("section",null,[t[30]||(t[30]=e("h2",{class:"text-lg md:text-xl font-bold text-gray-900 mb-4"},"Quyền lợi",-1)),e("div",ht,i(n.value.interest),1)])])])]),e("div",xt,[e("div",yt,[e("div",bt,[e("div",_t,[e("img",{src:n.value.enterprise_logo,alt:"Company logo",class:"w-14 h-14 md:w-16 md:h-16 object-contain bg-white rounded p-1",onError:Z},null,40,wt),e("div",kt,[e("h3",Ct,i(n.value.enterprise_name),1),n.value.is_enterprise_premium?(r(),u("div",Dt,t[31]||(t[31]=[e("span",{class:"inline-flex items-center px-2 py-1 bg-amber-400 text-white rounded-full text-xs font-semibold shadow"},"Pro Company",-1)]))):f("",!0)])]),e("div",It,[e("div",Tt,[d(a(c),{icon:"map-marker-alt",class:"w-5 h-5 mr-3 mt-0.5 flex-shrink-0"}),e("span",null,i(n.value.enterprise_address),1)]),d(g,{to:{name:"EnterpriseDetail",params:{id:n.value.enterprise}},class:"text-blue-600 hover:underline flex items-center group"},{default:M(()=>[d(a(c),{icon:"external-link-alt",class:"w-5 h-5 mr-3 transition-transform group-hover:translate-x-1 flex-shrink-0"}),t[32]||(t[32]=b(" Xem trang công ty "))]),_:1},8,["to"])])])]),e("div",Vt,[e("div",St,[t[42]||(t[42]=e("h3",{class:"font-bold text-gray-900 mb-4 text-base md:text-lg"},"Thông tin chung",-1)),e("div",Lt,[e("div",jt,[e("div",Nt,[d(a(c),{icon:"graduation-cap",class:"text-emerald-500"})]),e("div",null,[t[33]||(t[33]=e("div",{class:"text-gray-500 text-xs md:text-sm"},"Cấp bậc",-1)),e("div",Et,i(n.value.level),1)])]),e("div",Ft,[e("div",Pt,[d(a(c),{icon:"users",class:"text-purple-500"})]),e("div",null,[t[34]||(t[34]=e("div",{class:"text-gray-500 text-xs md:text-sm"},"Số lượng tuyển",-1)),e("div",Mt,i(n.value.quantity)+" người",1)])]),e("div",$t,[e("div",Bt,[d(a(c),{icon:"clock",class:"text-orange-500"})]),e("div",null,[t[35]||(t[35]=e("div",{class:"text-gray-500 text-xs md:text-sm"},"Thời gian làm việc",-1)),e("div",qt,i(n.value.time_working),1)])]),e("div",Kt,[e("div",zt,[d(a(c),{icon:"briefcase",class:"text-orange-500"})]),e("div",null,[t[36]||(t[36]=e("div",{class:"text-gray-500 text-xs md:text-sm"},"Hình thức làm việc",-1)),e("div",Ot,i(n.value.type_working),1)])]),e("div",At,[t[37]||(t[37]=e("i",{class:"fas fa-calendar-alt text-green-500"},null,-1)),e("span",null,"Hạn nộp: "+i(ce(n.value.deadline)),1)]),a(o).isLoggedIn&&((X=a(o).userInfo)!=null&&X.is_premium)&&n.value.total_applicants!==void 0?(r(),u("div",Ut,[t[39]||(t[39]=e("i",{class:"fas fa-users text-blue-500"},null,-1)),e("div",null,[e("span",Gt,i(n.value.total_applicants)+" ứng viên",1),t[38]||(t[38]=e("span",{class:"text-sm text-blue-600"}," đã ứng tuyển",-1))]),t[40]||(t[40]=e("i",{class:"fas fa-crown text-yellow-500 ml-1"},null,-1))])):n.value.has_applicants&&!(a(o).isLoggedIn&&((J=a(o).userInfo)!=null&&J.is_premium))?(r(),u("div",{key:1,onClick:t[1]||(t[1]=m=>z("view-applicants")),class:"flex items-center justify-between gap-2 bg-gray-50 border border-gray-200 py-2 px-3 rounded-lg text-gray-700 cursor-pointer hover:bg-yellow-50 transform hover:scale-105 transition-all duration-300"},t[41]||(t[41]=[A('<div class="flex items-center gap-2" data-v-fda6175a><i class="fas fa-lock text-gray-400" data-v-fda6175a></i><div data-v-fda6175a><span class="font-medium" data-v-fda6175a>?? ứng viên</span><span class="text-sm text-gray-500" data-v-fda6175a> đã ứng tuyển</span></div></div><div class="flex items-center gap-1 text-yellow-600 font-medium text-sm" data-v-fda6175a><i class="fas fa-crown text-yellow-500" data-v-fda6175a></i><span data-v-fda6175a>Nâng cấp Premium</span><i class="fas fa-arrow-right text-xs" data-v-fda6175a></i></div>',2)]))):f("",!0)])])])])])]))]),V.value?(r(),u("div",Rt,[e("div",{class:"absolute inset-0 bg-black/50",onClick:E}),e("div",{class:h(["relative bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto transform transition-all duration-300",{"translate-y-0 opacity-100 scale-100":V.value,"translate-y-4 opacity-0 scale-95":!V.value}])},[e("div",Ht,[e("h3",Xt,"Ứng tuyển vị trí: "+i(n.value.title),1),e("button",{onClick:E,class:"text-gray-400 hover:text-gray-600"},[d(a(c),{icon:"times",class:"text-xl"})])]),e("form",{onSubmit:$(oe,["prevent"]),class:"p-4 md:p-6"},[k.value?(r(),u("div",Jt,[e("div",Yt,[d(a(c),{icon:"exclamation-circle",class:"mr-2 flex-shrink-0"}),e("span",null,i(k.value),1)])])):f("",!0),e("div",Qt,[e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[b("Họ và tên "),e("span",{class:"text-red-500"},"*")],-1)),B(e("input",{"onUpdate:modelValue":t[2]||(t[2]=m=>p.name=m),type:"text",required:"",class:h(["w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":l.name}])},null,2),[[q,p.name]]),l.name?(r(),u("p",Wt,i(l.name),1)):f("",!0)]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[b("Email "),e("span",{class:"text-red-500"},"*")],-1)),B(e("input",{"onUpdate:modelValue":t[3]||(t[3]=m=>p.email=m),type:"email",required:"",class:h(["w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":l.email}])},null,2),[[q,p.email]]),l.email?(r(),u("p",Zt,i(l.email),1)):f("",!0)]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[b("Số điện thoại "),e("span",{class:"text-red-500"},"*")],-1)),B(e("input",{"onUpdate:modelValue":t[4]||(t[4]=m=>p.phone_number=m),type:"tel",required:"",class:h(["w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":l.phone_number}])},null,2),[[q,p.phone_number]]),l.phone_number?(r(),u("p",es,i(l.phone_number),1)):f("",!0)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[b("Giới thiệu bản thân "),e("span",{class:"text-red-500"},"*")],-1)),B(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=m=>p.description=m),rows:"3",required:"",class:h(["w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":l.description}]),placeholder:"Giới thiệu ngắn gọn về bản thân bạn, kinh nghiệm và lý do muốn ứng tuyển vị trí này..."},null,2),[[q,p.description]]),l.description?(r(),u("p",ts,i(l.description),1)):f("",!0)]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[b("CV của bạn "),e("span",{class:"text-red-500"},"*")],-1)),e("div",{class:h(["relative border-2 border-dashed border-gray-300 rounded-lg p-4 md:p-6 transition-all",{"border-blue-500 bg-blue-50":S.value,"border-red-300":l.cv}]),onDragover:t[6]||(t[6]=$(m=>S.value=!0,["prevent"])),onDragleave:t[7]||(t[7]=$(m=>S.value=!1,["prevent"])),onDrop:$(ne,["prevent"])},[_.value?(r(),u("div",ss,[e("div",ns,[d(a(c),{icon:"file-pdf",class:"text-red-500 text-xl mr-3 flex-shrink-0"}),e("div",as,[e("p",ls,i(_.value.name),1),e("p",is,i(le(_.value.size)),1)])]),e("button",{type:"button",onClick:ae,class:"text-gray-400 hover:text-red-500 ml-2 flex-shrink-0"},[d(a(c),{icon:"times"})])])):(r(),u("div",os,[d(a(c),{icon:"cloud-upload-alt",class:"text-gray-400 text-2xl md:text-3xl mb-3"}),e("p",rs,[t[48]||(t[48]=b("Kéo thả file CV của bạn vào đây hoặc ")),e("label",ds,[t[47]||(t[47]=b(" tải lên từ máy tính ")),e("input",{type:"file",class:"hidden",onChange:se,accept:".pdf,.doc,.docx"},null,32)])]),t[49]||(t[49]=e("p",{class:"text-xs md:text-sm text-gray-400 mt-1"},"Chấp nhận PDF, DOCX (Tối đa 5MB)",-1))]))],34),l.cv?(r(),u("p",us,i(l.cv),1)):f("",!0)])]),e("div",cs,[e("button",{type:"button",onClick:E,class:"px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"}," Hủy "),e("button",{type:"submit",class:"px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed mb-2 sm:mb-0",disabled:j.value},[j.value?(r(),u("span",gs,[d(a(c),{icon:"circle-notch",class:"fa-spin mr-2"}),t[51]||(t[51]=b(" Đang gửi... "))])):(r(),u("span",ps,"Gửi ứng tuyển"))],8,ms)])],32)],2)])):f("",!0),D.value?(r(),u("div",vs,[e("div",{class:"absolute inset-0 bg-black/50",onClick:t[8]||(t[8]=m=>D.value=!1)}),e("div",{class:h(["relative bg-white rounded-lg shadow-xl w-full max-w-md transform transition-all duration-300",{"translate-y-0 opacity-100 scale-100":D.value,"translate-y-4 opacity-0 scale-95":!D.value}])},[e("div",fs,[e("div",hs,[e("div",xs,[d(a(c),{icon:"exclamation-triangle",class:"text-yellow-500 text-xl md:text-2xl"})])]),t[52]||(t[52]=e("h3",{class:"text-lg font-medium text-center text-gray-900 mb-2"},"Yêu cầu đăng nhập",-1)),t[53]||(t[53]=e("p",{class:"text-gray-500 text-center mb-6"},"Bạn cần đăng nhập để có thể ứng tuyển vào vị trí này",-1)),e("div",ys,[e("button",{onClick:t[9]||(t[9]=m=>D.value=!1),class:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 order-2 sm:order-1"}," Để sau "),e("button",{onClick:de,class:"px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 order-1 sm:order-2 mb-2 sm:mb-0"}," Đăng nhập ngay ")])])],2)])):f("",!0),I.value?(r(),u("div",{key:2,class:h(["fixed bottom-4 right-4 z-50 max-w-md w-full sm:w-auto shadow-xl rounded-lg overflow-hidden transform transition-all duration-300",{"translate-y-0 opacity-100":I.value,"translate-y-4 opacity-0":!I.value,"bg-green-50 border border-green-200":x.value==="success","bg-red-50 border border-red-200":x.value==="error"}])},[e("div",bs,[e("div",{class:h(["flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center mr-3",{"bg-green-100":x.value==="success","bg-red-100":x.value==="error"}])},[d(a(c),{icon:x.value==="success"?"check-circle":"exclamation-circle",class:h({"text-green-500":x.value==="success","text-red-500":x.value==="error"})},null,8,["icon","class"])],2),e("div",_s,[e("p",{class:h(["font-medium text-sm",{"text-green-800":x.value==="success","text-red-800":x.value==="error"}])},i(x.value==="success"?G.value:k.value),3)]),e("button",{onClick:t[10]||(t[10]=m=>I.value=!1),class:"flex-shrink-0 text-gray-400 hover:text-gray-600"},[d(a(c),{icon:"times"})])])],2)):f("",!0),e("button",{onClick:t[11]||(t[11]=m=>s.$router.go(-1)),class:"fixed bottom-6 left-6 z-30 bg-white shadow-lg rounded-full p-3 hover:shadow-xl transition-all duration-300 focus:outline-none","aria-label":"Quay lại"},[d(a(c),{icon:"arrow-left",class:"text-gray-600"})])])}}},Vs=ge(ws,[["__scopeId","data-v-fda6175a"]]);export{Vs as default};
