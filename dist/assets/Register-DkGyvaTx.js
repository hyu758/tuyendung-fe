import{i as B,u as $,k as a,r as T,c as V,a as v,e as l,s as C,d as y,l as g,z as q,n as k,g as r,q as A,m as N,p as E,t as U,A as z,f as w,w as D}from"./index-DKWVIqlT.js";import{_ as p}from"./BaseInput-B_u3sZeO.js";import{_ as H}from"./BaseButton-DQhn4BYZ.js";const O={class:"bg-gradient-to-r from-blue-50 to-indigo-50 min-h-screen py-12 px-4 sm:px-6 lg:px-8"},P={class:"max-w-lg mx-auto"},R={class:"bg-white py-8 px-6 shadow-xl rounded-xl transition-all duration-300 transform hover:shadow-2xl"},L={class:"mb-8"},X={class:"flex space-x-4"},F={class:"flex items-center mb-3"},G={class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3"},J={class:"flex items-center mb-3"},K={class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3"},Q={class:"space-y-8"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-7"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-7"},Z={class:"relative"},ee={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},le={class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},se={key:0,class:"mt-1 text-sm text-red-600"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-7"},re={class:"bg-gray-50 p-3 rounded-lg border border-gray-100 flex items-center"},oe={key:0,class:"text-sm text-red-600 mt-1 italic"},ae={class:"pt-2"},ne={class:"mt-8 text-center"},ie={class:"text-gray-600"},ve={__name:"Register",setup(ue){const n=B(),I=$(),i=a("applicant"),d=a(""),m=a(""),c=a(""),_=a("male"),u=a(""),b=a(""),s=a({}),f=a(!1),h=a(""),M=async()=>{if(s.value={},n.error=null,S(),!(Object.keys(s.value).length>0))try{const x={username:d.value,email:m.value,password:u.value,fullname:c.value,gender:_.value,role:i.value==="recruiter"?"employer":"candidate"},e=await n.register(x);e.success?(h.value=e.message||"Đăng ký thành công! Vui lòng kiểm tra email để kích hoạt tài khoản.",d.value="",m.value="",u.value="",b.value="",c.value="",f.value=!1,setTimeout(()=>{I.push({name:"Login"})},3e3)):(console.log("Received errors from backend:",e.errors),e.errors&&Object.keys(e.errors).forEach(o=>{Array.isArray(e.errors[o])?s.value[o]=e.errors[o][0]:s.value[o]=e.errors[o]}),Object.keys(s.value).length===0&&e.error&&(n.error=e.error))}catch(x){console.error("Lỗi khi đăng ký:",x),n.error="Có lỗi xảy ra khi đăng ký. Vui lòng thử lại sau."}},S=()=>{d.value||(s.value.username="Vui lòng nhập tên đăng nhập"),m.value||(s.value.email="Vui lòng nhập email"),c.value||(s.value.fullname="Vui lòng nhập họ và tên"),u.value||(s.value.password="Vui lòng nhập mật khẩu"),u.value!==b.value&&(s.value.confirmPassword="Mật khẩu xác nhận không khớp"),f.value||(s.value.acceptTerms="Vui lòng đồng ý với điều khoản sử dụng")};return(x,e)=>{const o=T("font-awesome-icon"),j=T("router-link");return v(),V("div",O,[l("div",P,[e[19]||(e[19]=l("div",{class:"text-center mb-10"},[l("h1",{class:"text-4xl font-extrabold text-gray-900 mb-3 animate__animated animate__fadeIn"},"Đăng ký tài khoản"),l("p",{class:"text-lg text-gray-600"},"Tạo tài khoản mới để sử dụng đầy đủ tính năng của JobHub")],-1)),l("div",R,[g(n).error?(v(),C(q,{key:0,variant:"error",message:g(n).error,show:!!g(n).error,class:"mb-6"},null,8,["message","show"])):y("",!0),h.value?(v(),C(q,{key:1,variant:"success",message:h.value,show:!!h.value,class:"mb-6"},null,8,["message","show"])):y("",!0),l("div",L,[e[13]||(e[13]=l("label",{class:"block text-sm font-semibold text-gray-700 mb-3"},"Bạn là?",-1)),l("div",X,[l("div",{class:k(["flex-1 rounded-lg border-2 p-5 cursor-pointer transition-all duration-200 transform hover:scale-105",{"border-blue-500 bg-blue-50 shadow-md":i.value==="applicant","border-gray-200 hover:border-blue-300":i.value!=="applicant"}]),onClick:e[0]||(e[0]=t=>i.value="applicant")},[l("div",F,[l("div",G,[r(o,{icon:"user",class:"text-blue-600 text-lg"})]),e[9]||(e[9]=l("h3",{class:"font-bold text-lg"},"Ứng viên",-1))]),e[10]||(e[10]=l("p",{class:"text-sm text-gray-600"},"Tìm kiếm công việc phù hợp từ nhà tuyển dụng uy tín",-1))],2),l("div",{class:k(["flex-1 rounded-lg border-2 p-5 cursor-pointer transition-all duration-200 transform hover:scale-105",{"border-blue-500 bg-blue-50 shadow-md":i.value==="recruiter","border-gray-200 hover:border-blue-300":i.value!=="recruiter"}]),onClick:e[1]||(e[1]=t=>i.value="recruiter")},[l("div",J,[l("div",K,[r(o,{icon:"building",class:"text-blue-600 text-lg"})]),e[11]||(e[11]=l("h3",{class:"font-bold text-lg"},"Nhà tuyển dụng",-1))]),e[12]||(e[12]=l("p",{class:"text-sm text-gray-600"},"Đăng tin tuyển dụng và tìm kiếm ứng viên phù hợp",-1))],2)])]),l("form",{onSubmit:A(M,["prevent"]),class:"transform transition-all duration-300"},[l("div",Q,[l("div",W,[r(p,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=t=>d.value=t),label:"Tên đăng nhập",placeholder:"Tên đăng nhập",required:"",prefixIcon:"user",error:s.value.username,class:"transform transition-all duration-200 focus-within:scale-105"},null,8,["modelValue","error"]),r(p,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=t=>m.value=t),type:"email",label:"Email",placeholder:"Email của bạn",autocomplete:"email",required:"",prefixIcon:"envelope",error:s.value.email,class:"transform transition-all duration-200 focus-within:scale-105"},null,8,["modelValue","error"])]),l("div",Y,[r(p,{modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=t=>c.value=t),label:"Họ và tên",placeholder:"Họ và tên đầy đủ",required:"",prefixIcon:"user",error:s.value.fullname,class:"transform transition-all duration-200 focus-within:scale-105"},null,8,["modelValue","error"]),l("div",null,[e[15]||(e[15]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Giới tính",-1)),l("div",Z,[N(l("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>_.value=t),class:k(["appearance-none block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",{"border-red-500":s.value.gender}])},e[14]||(e[14]=[l("option",{value:"male"},"Nam",-1),l("option",{value:"female"},"Nữ",-1),l("option",{value:"other"},"Khác",-1)]),2),[[E,_.value]]),l("div",ee,[r(o,{icon:"venus-mars",class:"text-gray-400"})]),l("div",le,[r(o,{icon:"chevron-down",class:"text-gray-400"})])]),s.value.gender?(v(),V("div",se,U(s.value.gender),1)):y("",!0)])]),l("div",te,[r(p,{modelValue:u.value,"onUpdate:modelValue":e[6]||(e[6]=t=>u.value=t),type:"password",label:"Mật khẩu",placeholder:"Tạo mật khẩu",autocomplete:"new-password",required:"",prefixIcon:"lock",error:s.value.password,class:"transform transition-all duration-200 focus-within:scale-105"},null,8,["modelValue","error"]),r(p,{modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=t=>b.value=t),type:"password",label:"Xác nhận mật khẩu",placeholder:"Xác nhận mật khẩu",autocomplete:"new-password",required:"",prefixIcon:"lock",error:s.value.confirmPassword,class:"transform transition-all duration-200 focus-within:scale-105"},null,8,["modelValue","error"])]),l("div",re,[N(l("input",{id:"terms",type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=t=>f.value=t),class:k(["h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-all",{"border-red-500":s.value.acceptTerms}]),required:""},null,2),[[z,f.value]]),e[16]||(e[16]=l("label",{for:"terms",class:"ml-3 block text-sm text-gray-700"},[w(" Tôi đồng ý với "),l("a",{href:"#",class:"text-blue-600 hover:text-blue-800 font-medium"},"Điều khoản sử dụng"),w(" và "),l("a",{href:"#",class:"text-blue-600 hover:text-blue-800 font-medium"},"Chính sách bảo mật")],-1))]),s.value.acceptTerms?(v(),V("div",oe,U(s.value.acceptTerms),1)):y("",!0),l("div",ae,[r(H,{type:"submit",variant:"primary",size:"lg",label:"Đăng ký tài khoản",loading:g(n).loading,disabled:g(n).loading,class:"w-full transform transition-all duration-300 hover:shadow-lg hover:scale-105 rounded-lg py-4 text-lg font-bold"},null,8,["loading","disabled"])])])],32)]),l("div",ne,[l("p",ie,[e[18]||(e[18]=w(" Đã có tài khoản? ")),r(j,{to:"/login",class:"font-bold text-blue-600 hover:text-blue-800 transition-colors duration-300 ml-1"},{default:D(()=>e[17]||(e[17]=[w(" Đăng nhập ngay ")])),_:1})])])])])}}};export{ve as default};
