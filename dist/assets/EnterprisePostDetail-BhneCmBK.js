import{_ as Z,B as A,u as G,j as v,E as $,k as I,S as H,r as J,c as i,o as d,d as t,l as K,a as P,F as h,g as w,b as f,t as a,n as p,e as _,f as j,w as D,m as L,p as R}from"./index-7AGdmXRC.js";import{u as W}from"./post-BtEmu9Ds.js";import{u as Y}from"./cv-Bq9MO5h4.js";const tt={class:"min-h-screen bg-gray-50 py-4 sm:py-8"},et={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},st={class:"flex items-center mb-4 sm:mb-6"},lt={key:0,class:"space-y-4 sm:space-y-6"},at={class:"block sm:hidden space-y-3"},it={class:"hidden sm:block bg-white shadow rounded-lg overflow-hidden"},dt={class:"min-w-full divide-y divide-gray-200"},nt={class:"bg-white divide-y divide-gray-200"},ot={key:1},rt={class:"bg-white shadow rounded-lg overflow-hidden mb-4 sm:mb-6"},ut={class:"p-4 sm:p-6"},ct={class:"flex flex-col md:flex-row md:items-center justify-between"},mt={class:"text-lg sm:text-xl font-bold text-gray-900"},vt={class:"text-xs sm:text-sm text-gray-500 mt-1"},xt={class:"mt-3 md:mt-0"},gt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-5 sm:mt-6"},ft={class:"flex flex-col"},pt={class:"text-sm sm:text-base text-gray-900"},bt={class:"flex flex-col"},yt={class:"text-sm sm:text-base text-gray-900"},ht={class:"flex flex-col"},wt={class:"text-sm sm:text-base text-gray-900"},_t={class:"flex items-center justify-between mb-3 sm:mb-4"},kt={class:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-medium"},Ct={key:0,class:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start gap-3"},Vt={class:"text-sm text-gray-600 mt-1"},Tt={class:"bg-white shadow rounded-lg p-3 sm:p-4 mb-4"},jt={class:"mb-3 sm:mb-4 border-b border-gray-200 overflow-x-auto"},Dt={class:"-mb-px flex space-x-4 whitespace-nowrap"},St={key:0,class:"flex flex-wrap items-center gap-2"},Ft={class:"w-full sm:w-auto mb-2 sm:mb-0 sm:mr-4"},Bt={class:"w-full sm:w-auto mb-2 sm:mb-0 sm:mr-4"},Et={class:"block sm:hidden space-y-3"},Nt={class:"flex items-center mb-3"},$t={class:"ml-3 flex-1"},It={class:"text-sm font-medium text-gray-900"},Pt={class:"text-xs text-gray-500 mt-0.5"},Lt={class:"text-xs text-gray-900 space-y-1.5"},Rt={class:"flex items-center"},Ut={class:"truncate"},zt={class:"flex items-center"},Mt={class:"mt-3 flex justify-between items-center"},Xt={class:"flex space-x-4"},qt=["href"],Ot={class:"relative"},Qt=["onClick"],Zt={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-20"},At={class:"py-1"},Gt=["onClick"],Ht=["onClick"],Jt=["onClick"],Kt={key:0,class:"bg-white shadow rounded-lg p-6 text-center"},Wt={class:"hidden sm:block bg-white shadow rounded-lg overflow-hidden"},Yt={class:"overflow-x-auto"},te={class:"min-w-full divide-y divide-gray-200"},ee={class:"bg-white divide-y divide-gray-200"},se={class:"px-6 py-4"},le={class:"flex items-center"},ae={class:"ml-4"},ie={class:"text-sm font-medium text-gray-900"},de={class:"text-sm text-gray-500 mt-1"},ne={class:"px-6 py-4"},oe={class:"text-sm text-gray-900"},re={class:"flex items-center"},ue={class:"text-sm text-gray-900 mt-1"},ce={class:"flex items-center"},me={class:"px-6 py-4 text-center"},ve={class:"px-6 py-4 text-center"},xe={class:"flex justify-center space-x-3"},ge=["href"],fe={key:0},pe={__name:"EnterprisePostDetail",setup(be){const S=A(),U=G(),z=W(),b=Y(),x=v(!0),n=v({}),F=$(()=>b.cvs),o=v(null),r=v("all"),u=v("all"),c=v("all"),k=v(!0),B=l=>{o.value!==null&&(o.value=null)};I(()=>{document.addEventListener("click",B)}),H(()=>{document.removeEventListener("click",B)});const M=l=>{event.stopPropagation(),o.value===l?o.value=null:o.value=l},X=l=>{try{if(!l)return"";const e=new Date(l.replace("+07:00","Z"));return isNaN(e.getTime())?"":new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"}).format(e)}catch(e){return console.error("Error formatting date:",e),""}},E=l=>l.status==="approved"?"bg-green-100 text-green-800":l.status==="rejected"?"bg-red-100 text-red-800":l.is_viewed?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800",N=l=>l.status==="approved"?"Đã tiếp nhận":l.status==="rejected"?"Đã từ chối":l.is_viewed?"Đã xem":"Chưa xem",q=async()=>{try{x.value=!0;const l=S.params.id,e=await z.fetchPostById(l);e.success?(n.value=e.data.data,k.value=n.value.can_view_applicants||!0,await b.fetchCVsByPostId(l)):console.error("Error loading post:",e.error)}catch(l){console.error("Error loading data:",l)}finally{x.value=!1}},C=async(l,e)=>{try{o.value=null,await b.updateCVStatus(l,e)}catch(m){console.error("Error updating CV status:",m)}},g=$(()=>{if(c.value==="all")return F.value;let l=F.value;return r.value!=="all"&&(l=l.filter(e=>e.status===r.value)),u.value!=="all"&&(l=l.filter(e=>e.is_viewed===(u.value==="viewed"))),l}),V=async()=>{try{if(x.value=!0,c.value==="filter"){const l=r.value!=="all"?r.value:null,e=u.value!=="all"?u.value==="viewed":null,m=S.params.id;await b.fetchCVsByPostId(m)}}catch(l){console.error("Error applying filters:",l)}finally{x.value=!1}},O=async()=>{await V()},Q=()=>{r.value="all",u.value="all",V()};return I(q),(l,e)=>{const m=J("router-link");return d(),i("div",tt,[t("div",et,[t("div",st,[t("button",{onClick:e[0]||(e[0]=s=>K(U).back()),class:"mr-3 sm:mr-4 p-2 rounded-full hover:bg-gray-200 transition-colors",title:"Quay lại"},e[5]||(e[5]=[t("i",{class:"fas fa-arrow-left text-gray-600"},null,-1)])),e[6]||(e[6]=t("h1",{class:"text-xl sm:text-2xl font-bold text-gray-900 truncate"},"Thông tin bài đăng",-1))]),x.value?(d(),i("div",lt,[e[10]||(e[10]=P('<div class="bg-white shadow rounded-lg overflow-hidden mb-4 sm:mb-6" data-v-573b7878><div class="p-4 sm:p-6" data-v-573b7878><div class="flex flex-col md:flex-row md:items-center justify-between" data-v-573b7878><div class="flex-1" data-v-573b7878><div class="h-7 bg-gray-200 rounded w-3/5 animate-pulse" data-v-573b7878></div><div class="flex mt-2 items-center" data-v-573b7878><div class="h-5 bg-gray-200 rounded w-24 animate-pulse" data-v-573b7878></div><div class="mx-2 h-5 bg-gray-200 rounded w-1 animate-pulse" data-v-573b7878></div><div class="h-5 bg-gray-200 rounded w-24 animate-pulse" data-v-573b7878></div></div></div><div class="mt-4 md:mt-0" data-v-573b7878><div class="h-6 bg-gray-200 rounded-full w-24 animate-pulse" data-v-573b7878></div></div></div><div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6" data-v-573b7878><div class="flex flex-col" data-v-573b7878><div class="h-5 bg-gray-200 rounded w-32 animate-pulse" data-v-573b7878></div><div class="h-6 bg-gray-200 rounded w-40 mt-1 animate-pulse" data-v-573b7878></div></div><div class="flex flex-col" data-v-573b7878><div class="h-5 bg-gray-200 rounded w-32 animate-pulse" data-v-573b7878></div><div class="h-6 bg-gray-200 rounded w-40 mt-1 animate-pulse" data-v-573b7878></div></div><div class="flex flex-col" data-v-573b7878><div class="h-5 bg-gray-200 rounded w-32 animate-pulse" data-v-573b7878></div><div class="h-6 bg-gray-200 rounded w-16 mt-1 animate-pulse" data-v-573b7878></div></div></div></div></div><div class="flex items-center justify-between mb-3 sm:mb-4" data-v-573b7878><div class="h-6 bg-gray-200 rounded w-48 animate-pulse" data-v-573b7878></div><div class="h-6 bg-gray-200 rounded-full w-24 animate-pulse" data-v-573b7878></div></div>',2)),t("div",at,[(d(),i(h,null,w(3,s=>t("div",{key:`mobile-${s}`,class:"bg-white shadow rounded-lg p-4 animate-pulse"},e[7]||(e[7]=[P('<div class="flex items-center mb-3" data-v-573b7878><div class="flex-shrink-0 h-10 w-10 rounded-full bg-gray-200" data-v-573b7878></div><div class="ml-3 flex-1" data-v-573b7878><div class="h-5 bg-gray-200 rounded w-40 mb-1" data-v-573b7878></div><div class="h-4 bg-gray-200 rounded w-32" data-v-573b7878></div></div></div><div class="flex flex-col space-y-2" data-v-573b7878><div class="flex items-center" data-v-573b7878><div class="w-5 h-5 bg-gray-200 rounded-full mr-3" data-v-573b7878></div><div class="h-5 bg-gray-200 rounded w-32" data-v-573b7878></div></div><div class="flex items-center" data-v-573b7878><div class="w-5 h-5 bg-gray-200 rounded-full mr-3" data-v-573b7878></div><div class="h-5 bg-gray-200 rounded w-24" data-v-573b7878></div></div></div><div class="mt-3 flex justify-between items-center" data-v-573b7878><div class="h-6 bg-gray-200 rounded-full w-24" data-v-573b7878></div><div class="flex space-x-3" data-v-573b7878><div class="w-5 h-5 bg-gray-200 rounded-full" data-v-573b7878></div><div class="w-5 h-5 bg-gray-200 rounded-full" data-v-573b7878></div><div class="w-5 h-5 bg-gray-200 rounded-full" data-v-573b7878></div></div></div>',3)]))),64))]),t("div",it,[t("table",dt,[e[9]||(e[9]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ứng viên"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Thông tin liên hệ"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Trạng thái"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Thao tác")])],-1)),t("tbody",nt,[(d(),i(h,null,w(3,s=>t("tr",{key:s,class:"animate-pulse"},e[8]||(e[8]=[t("td",{class:"px-6 py-4"},[t("div",{class:"flex items-center"},[t("div",{class:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-200"}),t("div",{class:"ml-4"},[t("div",{class:"h-5 bg-gray-200 rounded w-40 mb-2"}),t("div",{class:"h-4 bg-gray-200 rounded w-32"})])])],-1),t("td",{class:"px-6 py-4"},[t("div",{class:"flex items-center mb-2"},[t("div",{class:"w-5 h-5 bg-gray-200 rounded-full mr-3"}),t("div",{class:"h-5 bg-gray-200 rounded w-32"})]),t("div",{class:"flex items-center"},[t("div",{class:"w-5 h-5 bg-gray-200 rounded-full mr-3"}),t("div",{class:"h-5 bg-gray-200 rounded w-24"})])],-1),t("td",{class:"px-6 py-4 text-center"},[t("div",{class:"h-6 bg-gray-200 rounded-full w-24 mx-auto"})],-1),t("td",{class:"px-6 py-4 text-center"},[t("div",{class:"flex justify-center space-x-3"},[t("div",{class:"w-5 h-5 bg-gray-200 rounded-full"}),t("div",{class:"w-5 h-5 bg-gray-200 rounded-full"}),t("div",{class:"w-5 h-5 bg-gray-200 rounded-full"})])],-1)]))),64))])])])])):(d(),i("div",ot,[t("div",rt,[t("div",ut,[t("div",ct,[t("div",null,[t("h2",mt,a(n.value.title),1),t("div",vt,[t("span",null,a(X(n.value.created_at)),1),e[11]||(e[11]=t("span",{class:"mx-1"},"•",-1)),t("span",null,a(n.value.city),1)])]),t("div",xt,[t("span",{class:p(["px-3 py-1 text-xs font-medium rounded-full",n.value.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(n.value.is_active?"Đang hiển thị":"Đã ẩn"),3)])]),t("div",gt,[t("div",ft,[e[12]||(e[12]=t("span",{class:"text-xs sm:text-sm font-medium text-gray-500"},"Tiêu đề tin đăng",-1)),t("span",pt,a(n.value.title),1)]),t("div",bt,[e[13]||(e[13]=t("span",{class:"text-xs sm:text-sm font-medium text-gray-500"},"Vị trí",-1)),t("span",yt,a(n.value.position_name),1)]),t("div",ht,[e[14]||(e[14]=t("span",{class:"text-xs sm:text-sm font-medium text-gray-500"},"Số lượng",-1)),t("span",wt,a(n.value.quantity),1)])])])]),t("div",_t,[e[15]||(e[15]=t("h2",{class:"text-base sm:text-lg font-semibold text-gray-900"},"Danh sách ứng viên",-1)),t("span",kt,a(k.value?`${g.value.length} ứng viên`:"Nâng cấp để xem"),1)]),k.value?f("",!0):(d(),i("div",Ct,[e[19]||(e[19]=t("i",{class:"fas fa-crown text-yellow-500 mt-0.5"},null,-1)),t("div",null,[e[18]||(e[18]=t("h3",{class:"font-medium text-gray-900"},"Tính năng giới hạn",-1)),t("p",Vt,[e[17]||(e[17]=_(" Bạn cần nâng cấp lên gói Premium để xem số lượng CV đã nộp cho bài đăng này. ")),j(m,{to:"/premium",class:"text-blue-600 hover:underline font-medium"},{default:D(()=>e[16]||(e[16]=[_("Nâng cấp ngay")])),_:1})])])])),t("div",Tt,[t("div",jt,[t("nav",Dt,[t("button",{onClick:e[1]||(e[1]=s=>c.value="all"),class:p(["py-2 px-1 border-b-2 font-medium text-xs sm:text-sm",c.value==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Tất cả ứng viên ",2),t("button",{onClick:e[2]||(e[2]=s=>{c.value="filter",O()}),class:p(["py-2 px-1 border-b-2 font-medium text-xs sm:text-sm",c.value==="filter"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Lọc ứng viên ",2)])]),c.value==="filter"?(d(),i("div",St,[t("div",Ft,[e[21]||(e[21]=t("label",{for:"statusFilter",class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1"},"Trạng thái",-1)),L(t("select",{id:"statusFilter","onUpdate:modelValue":e[3]||(e[3]=s=>r.value=s),class:"block w-full pl-3 pr-10 py-1.5 sm:py-2 text-sm border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md"},e[20]||(e[20]=[t("option",{value:"all"},"Tất cả",-1),t("option",{value:"pending"},"Chưa xử lý",-1),t("option",{value:"approved"},"Đã tiếp nhận",-1),t("option",{value:"rejected"},"Đã từ chối",-1)]),512),[[R,r.value]])]),t("div",Bt,[e[23]||(e[23]=t("label",{for:"viewFilter",class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1"},"Đã xem",-1)),L(t("select",{id:"viewFilter","onUpdate:modelValue":e[4]||(e[4]=s=>u.value=s),class:"block w-full pl-3 pr-10 py-1.5 sm:py-2 text-sm border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md"},e[22]||(e[22]=[t("option",{value:"all"},"Tất cả",-1),t("option",{value:"viewed"},"Đã xem",-1),t("option",{value:"not_viewed"},"Chưa xem",-1)]),512),[[R,u.value]])]),t("div",{class:"flex space-x-2 mt-2 sm:mt-auto"},[t("button",{onClick:V,class:"inline-flex items-center px-3 sm:px-4 py-1.5 sm:py-2 border border-transparent text-xs sm:text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},e[24]||(e[24]=[t("i",{class:"fas fa-search mr-1 sm:mr-2"},null,-1),_(" Lọc ")])),t("button",{onClick:Q,class:"inline-flex items-center px-3 sm:px-4 py-1.5 sm:py-2 border border-gray-300 shadow-sm text-xs sm:text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},e[25]||(e[25]=[t("i",{class:"fas fa-redo-alt mr-1 sm:mr-2"},null,-1),_(" Đặt lại ")]))])])):f("",!0)]),t("div",Et,[(d(!0),i(h,null,w(g.value,(s,y)=>(d(),i("div",{key:`mobile-${s.id}`,class:"bg-white shadow rounded-lg p-4 hover:bg-gray-50 transition-colors duration-200"},[t("div",Nt,[e[26]||(e[26]=t("div",{class:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},[t("i",{class:"fas fa-user text-gray-500"})],-1)),t("div",$t,[t("div",It,a(s.name),1),t("div",Pt,a(s.description),1)])]),t("div",Lt,[t("div",Rt,[e[27]||(e[27]=t("i",{class:"fas fa-envelope text-gray-400 w-4 mr-2"},null,-1)),t("span",Ut,a(s.email),1)]),t("div",zt,[e[28]||(e[28]=t("i",{class:"fas fa-phone text-gray-400 w-4 mr-2"},null,-1)),t("span",null,a(s.phone_number),1)])]),t("div",Mt,[t("span",{class:p(["px-2.5 py-1 text-xs font-medium rounded-full",E(s)])},a(N(s)),3),t("div",Xt,[j(m,{to:{name:"CVDetail",params:{id:s.id}},class:"text-gray-500 hover:text-blue-600 transition-colors",title:"Xem chi tiết CV"},{default:D(()=>e[29]||(e[29]=[t("i",{class:"fas fa-eye"},null,-1)])),_:2},1032,["to"]),t("a",{href:s.cv_file_url,download:"",class:"text-gray-500 hover:text-blue-600 transition-colors",title:"Tải xuống CV"},e[30]||(e[30]=[t("i",{class:"fas fa-download"},null,-1)]),8,qt),t("div",Ot,[t("button",{onClick:T=>M(y),class:"text-gray-500 hover:text-blue-600 transition-colors",title:"Thay đổi trạng thái"},e[31]||(e[31]=[t("i",{class:"fas fa-ellipsis-v"},null,-1)]),8,Qt),o.value===y?(d(),i("div",Zt,[t("div",At,[t("button",{onClick:T=>C(s.id,"pending"),class:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Chưa xử lý ",8,Gt),t("button",{onClick:T=>C(s.id,"approved"),class:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Tiếp nhận ",8,Ht),t("button",{onClick:T=>C(s.id,"rejected"),class:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Từ chối ",8,Jt)])])):f("",!0)])])])]))),128)),g.value.length===0?(d(),i("div",Kt,e[32]||(e[32]=[t("div",{class:"flex flex-col items-center"},[t("i",{class:"fas fa-file-alt text-3xl text-gray-300 mb-2"}),t("h3",{class:"text-base font-medium text-gray-900"},"Chưa có ứng viên nào"),t("p",{class:"mt-1 text-xs text-gray-500"},"Bài đăng chưa nhận được CV ứng tuyển")],-1)]))):f("",!0)]),t("div",Wt,[t("div",Yt,[t("table",te,[e[39]||(e[39]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ứng viên"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Thông tin liên hệ"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Trạng thái")])],-1)),t("tbody",ee,[(d(!0),i(h,null,w(g.value,(s,y)=>(d(),i("tr",{key:y,class:"hover:bg-gray-50"},[t("td",se,[t("div",le,[e[33]||(e[33]=t("div",{class:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},[t("i",{class:"fas fa-user text-gray-500"})],-1)),t("div",ae,[t("div",ie,a(s.name),1),t("div",de,a(s.description),1)])])]),t("td",ne,[t("div",oe,[t("div",re,[e[34]||(e[34]=t("i",{class:"fas fa-envelope text-gray-400 w-5"},null,-1)),t("span",null,a(s.email),1)])]),t("div",ue,[t("div",ce,[e[35]||(e[35]=t("i",{class:"fas fa-phone text-gray-400 w-5"},null,-1)),t("span",null,a(s.phone_number),1)])])]),t("td",me,[t("span",{class:p(["px-3 py-1 text-xs font-medium rounded-full",E(s)])},a(N(s)),3)]),t("td",ve,[t("div",xe,[j(m,{to:{name:"CVDetail",params:{id:s.id}},class:"text-gray-400 hover:text-blue-500 transition-colors duration-200 cursor-pointer",title:"Xem chi tiết CV"},{default:D(()=>e[36]||(e[36]=[t("i",{class:"fas fa-eye"},null,-1)])),_:2},1032,["to"]),t("a",{href:s.cv_file_url,download:"",class:"text-gray-400 hover:text-blue-500 transition-colors duration-200 cursor-pointer",title:"Tải xuống CV"},e[37]||(e[37]=[t("i",{class:"fas fa-download"},null,-1)]),8,ge)])])]))),128)),g.value.length===0?(d(),i("tr",fe,e[38]||(e[38]=[t("td",{colspan:"4",class:"px-6 py-10 text-center"},[t("div",{class:"flex flex-col items-center"},[t("i",{class:"fas fa-file-alt text-4xl text-gray-300 mb-3"}),t("h3",{class:"text-lg font-medium text-gray-900"},"Chưa có ứng viên nào"),t("p",{class:"mt-1 text-sm text-gray-500"},"Bài đăng chưa nhận được CV ứng tuyển")])],-1)]))):f("",!0)])])])])]))])])}}},_e=Z(pe,[["__scopeId","data-v-573b7878"]]);export{_e as default};
