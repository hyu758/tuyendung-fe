import{_ as A,u as R,k as d,o as Z,r as G,c as o,a as l,d as b,e,n as h,t as i,g as E,w as H,f as x,F as I,i as V}from"./index-DjN2xGKQ.js";import{u as J}from"./post-BGeIosOW.js";const O={class:"min-h-screen bg-gradient-to-br from-thang-long-cultured-white to-white py-8"},Q={key:0,class:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50"},W={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl transform transition-all animate-slideUp"},Y={class:"flex justify-end space-x-3"},tt={key:1,class:"fixed top-4 right-4 z-50 animate-slideIn"},et={class:"flex items-center"},nt={key:2,class:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50"},at={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl transform transition-all animate-slideUp"},st={class:"text-lg font-medium text-thang-long-indigo mb-4"},ot={key:0,class:"text-gray-600 mb-6"},lt={key:1,class:"text-gray-600 mb-6"},rt={class:"flex justify-end space-x-4"},it={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},dt={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-8 gap-4"},gt={key:0,class:"flex justify-center py-12"},ut={key:1,class:"text-center py-12"},ct={class:"bg-white rounded-lg p-8 shadow-lg transform transition-all duration-300 hover:shadow-xl"},ht={class:"mt-6"},mt={key:2,class:"bg-white shadow-lg rounded-lg overflow-hidden transform transition-all duration-300 hover:shadow-xl"},vt={class:"overflow-x-auto"},xt={class:"min-w-full divide-y divide-gray-200"},ft={class:"bg-white divide-y divide-gray-200"},yt={class:"px-4 sm:px-6 py-4"},pt={class:"text-sm text-thang-long-indigo font-medium"},bt={class:"text-xs text-gray-500 mt-1"},wt={class:"px-2 sm:px-6 py-4 text-center text-sm text-gray-500 whitespace-nowrap"},_t={class:"inline-flex items-center justify-center px-2 py-1 rounded-full bg-gradient-to-r from-thang-long-mid-blue to-thang-long-light-blue text-white text-xs font-medium"},kt={class:"px-2 sm:px-6 py-4 text-center text-sm whitespace-nowrap"},Pt={class:"px-4 sm:px-6 py-4 text-center text-sm whitespace-nowrap"},Ct={class:"flex flex-wrap justify-center gap-1 sm:gap-3"},Dt=["onClick","title"],St=["onClick","title"],$t=["onClick"],jt=["onClick","title"],zt={key:0,class:"px-4 sm:px-6 py-3 flex flex-col sm:flex-row items-center justify-between bg-gradient-to-r from-thang-long-cultured-white to-white"},Nt={class:"text-sm text-thang-long-indigo mb-2 sm:mb-0"},Tt={class:"font-medium"},Et={class:"font-medium"},Ht={class:"font-medium"},It={class:"flex space-x-1"},Vt=["disabled"],Bt=["onClick"],Xt=["disabled"],Mt={__name:"PostList",setup(Kt){const w=R(),_=J(),k=d(!0),u=d([]),f=d(!1),r=d(null),P=d(!1),C=d(""),$=d(""),c=d(!1),s=d({currentPage:1,totalPages:1,totalItems:0,pageSize:10}),m=n=>{if(!n||!n.deadline)return!1;const t=new Date(n.deadline),g=new Date;return g.setHours(0,0,0,0),t<g},j=n=>{try{if(!n)return"";const t=new Date(n.replace("+07:00","Z"));return isNaN(t.getTime())?"":new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"}).format(t)}catch(t){return console.error("Error formatting date:",t),""}},B=()=>{const n=s.value.totalPages,t=s.value.currentPage;return n<=5?Array.from({length:n},(g,y)=>y+1):t<=3?[1,2,3,4,5]:t>=n-2?[n-4,n-3,n-2,n-1,n]:[t-2,t-1,t,t+1,t+2]},D=async()=>{try{k.value=!0;const n=await _.fetchPostByEmployer(s.value.currentPage,s.value.pageSize);n.success&&(u.value=n.data.data.results||[],s.value={currentPage:n.data.data.page||1,totalPages:n.data.data.total_pages||1,totalItems:n.data.data.total||0,pageSize:n.data.data.page_size||10})}catch(n){console.error("Error loading posts:",n)}finally{k.value=!1}},S=n=>{n>=1&&n<=s.value.totalPages&&(s.value.currentPage=n,D())},X=n=>{w.push({name:"EditPost",params:{id:n.id}})},M=n=>{c.value=!1,w.push({name:"EditPost",params:{id:n.id},query:{focus:"deadline"}})},K=n=>{w.push({name:"PostDetail",params:{id:n.id}})},L=n=>{r.value=n,f.value=!0},v=(n,t)=>{C.value=n,$.value=t,P.value=!0,setTimeout(()=>{P.value=!1},3e3)},F=async n=>{try{f.value=!1;const t=await _.deletePost(n.id);t.success?(v("success","Xóa tin tuyển dụng thành công"),await D()):v("error",t.error||"Có lỗi xảy ra khi xóa tin tuyển dụng")}catch(t){console.error("Error deleting post:",t),v("error","Có lỗi xảy ra khi xóa tin tuyển dụng")}},U=n=>{r.value=n,c.value=!0},q=async()=>{if(r.value)try{if(!r.value.is_active&&m(r.value)){v("error","Không thể kích hoạt vì hạn ứng tuyển đã hết"),c.value=!1;return}if((await _.togglePostStatus(r.value.id)).success){const t=u.value.findIndex(g=>g.id===r.value.id);t!==-1&&(u.value[t].is_active=!u.value[t].is_active),v("success",u.value[t].is_active?"Đã kích hoạt tin tuyển dụng":"Đã ẩn tin tuyển dụng"),c.value=!1}}catch(n){console.error("Error toggling post status:",n),v("error","Có lỗi xảy ra khi thay đổi trạng thái tin tuyển dụng"),c.value=!1}};return Z(D),(n,t)=>{var y,z,N,T;const g=G("router-link");return l(),o("div",O,[f.value?(l(),o("div",Q,[e("div",W,[t[6]||(t[6]=e("h3",{class:"text-lg font-medium text-thang-long-indigo mb-4"},"Xác nhận xóa",-1)),t[7]||(t[7]=e("p",{class:"text-gray-500 mb-6"},"Bạn có chắc chắn muốn xóa tin tuyển dụng này? Hành động này không thể hoàn tác.",-1)),e("div",Y,[e("button",{onClick:t[0]||(t[0]=a=>f.value=!1),class:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-all duration-300 transform hover:-translate-y-0.5"}," Hủy "),e("button",{onClick:t[1]||(t[1]=a=>F(r.value)),class:"px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-gradient-to-r from-thang-long-scarlet to-thang-long-mid-blue hover:from-thang-long-mid-blue hover:to-thang-long-scarlet transition-all duration-300 transform hover:-translate-y-0.5 shadow-thang-long hover:shadow-thang-long-hover"}," Xóa ")])])])):b("",!0),P.value?(l(),o("div",tt,[e("div",{class:h(["rounded-lg p-4 shadow-lg transform transition-all duration-300",C.value==="success"?"bg-gradient-to-r from-thang-long-mid-blue to-thang-long-light-blue text-white":"bg-gradient-to-r from-thang-long-scarlet to-thang-long-mid-blue text-white"])},[e("div",et,[e("i",{class:h(["mr-2",C.value==="success"?"fas fa-check-circle":"fas fa-exclamation-circle"])},null,2),e("span",null,i($.value),1)])],2)])):b("",!0),c.value?(l(),o("div",nt,[e("div",at,[e("h3",st,i((y=r.value)!=null&&y.is_active?"Ẩn bài đăng":"Hiển thị bài đăng"),1),!((z=r.value)!=null&&z.is_active)&&m(r.value)?(l(),o("p",ot," Không thể kích hoạt tin tuyển dụng vì hạn ứng tuyển đã hết. Vui lòng cập nhật hạn ứng tuyển trước. ")):(l(),o("p",lt," Bạn có chắc chắn muốn "+i((N=r.value)!=null&&N.is_active?"ẩn":"hiển thị")+" bài đăng này? ",1)),e("div",rt,[e("button",{onClick:t[2]||(t[2]=a=>c.value=!1),class:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-all duration-300 transform hover:-translate-y-0.5"}," Hủy "),!((T=r.value)!=null&&T.is_active)&&m(r.value)?(l(),o("button",{key:0,onClick:t[3]||(t[3]=a=>M(r.value)),class:"px-4 py-2 bg-gradient-to-r from-thang-long-mid-blue to-thang-long-light-blue text-white rounded-lg text-sm font-medium hover:from-thang-long-light-blue hover:to-thang-long-mid-blue transition-all duration-300 transform hover:-translate-y-0.5 shadow-thang-long hover:shadow-thang-long-hover"}," Cập nhật hạn ứng tuyển ")):(l(),o("button",{key:1,onClick:q,class:"px-4 py-2 bg-gradient-to-r from-thang-long-mid-blue to-thang-long-light-blue text-white rounded-lg text-sm font-medium hover:from-thang-long-light-blue hover:to-thang-long-mid-blue transition-all duration-300 transform hover:-translate-y-0.5 shadow-thang-long hover:shadow-thang-long-hover"}," Xác nhận "))])])])):b("",!0),e("div",it,[e("div",dt,[t[9]||(t[9]=e("h1",{class:"text-2xl font-bold text-thang-long-indigo"},"Danh sách tin tuyển dụng",-1)),E(g,{to:"/employer/posts/create",class:"inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-thang-long-scarlet to-thang-long-mid-blue hover:from-thang-long-mid-blue hover:to-thang-long-scarlet transition-all duration-300 transform hover:-translate-y-0.5 shadow-thang-long hover:shadow-thang-long-hover w-full sm:w-auto"},{default:H(()=>t[8]||(t[8]=[e("i",{class:"fas fa-plus mr-2"},null,-1),x(" Tạo tin mới ")])),_:1})]),k.value?(l(),o("div",gt,t[10]||(t[10]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-thang-long-scarlet"},null,-1)]))):u.value.length===0?(l(),o("div",ut,[e("div",ct,[t[12]||(t[12]=e("i",{class:"fas fa-briefcase text-4xl text-thang-long-mid-blue mb-4"},null,-1)),t[13]||(t[13]=e("h3",{class:"text-lg font-medium text-thang-long-indigo"},"Chưa có tin tuyển dụng nào",-1)),t[14]||(t[14]=e("p",{class:"mt-1 text-sm text-gray-500"},"Bắt đầu bằng cách tạo tin tuyển dụng mới",-1)),e("div",ht,[E(g,{to:"/employer/posts/create",class:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-thang-long-scarlet to-thang-long-mid-blue hover:from-thang-long-mid-blue hover:to-thang-long-scarlet transition-all duration-300 transform hover:-translate-y-0.5 shadow-thang-long hover:shadow-thang-long-hover"},{default:H(()=>t[11]||(t[11]=[e("i",{class:"fas fa-plus mr-2"},null,-1),x(" Tạo tin mới ")])),_:1})])])])):(l(),o("div",mt,[e("div",vt,[e("table",xt,[t[19]||(t[19]=e("thead",{class:"bg-gradient-to-r from-thang-long-scarlet to-thang-long-mid-blue"},[e("tr",null,[e("th",{class:"px-4 sm:px-6 py-3 text-left text-xs sm:text-sm font-medium text-white uppercase tracking-wider"},"Tin tuyển dụng"),e("th",{class:"px-2 sm:px-6 py-3 text-center text-xs sm:text-sm font-medium text-white uppercase tracking-wider"},"CV"),e("th",{class:"px-2 sm:px-6 py-3 text-center text-xs sm:text-sm font-medium text-white uppercase tracking-wider"},"Hạn ứng tuyển"),e("th",{class:"px-4 sm:px-6 py-3 text-center text-xs sm:text-sm font-medium text-white uppercase tracking-wider"},"Thao tác")])],-1)),e("tbody",ft,[(l(!0),o(I,null,V(u.value,a=>(l(),o("tr",{key:a.id,class:"hover:bg-thang-long-cultured-white/50 transition-colors duration-300"},[e("td",yt,[e("div",pt,i(a.title),1),e("div",bt,[e("span",null,i(j(a.created_at)),1),t[15]||(t[15]=e("span",{class:"mx-1"},"•",-1)),e("span",null,i(a.city),1)])]),e("td",wt,[e("span",_t,i(a.total_cvs),1)]),e("td",kt,[e("span",{class:h(["text-xs font-medium px-2 py-1 rounded-full",m(a)?"bg-gradient-to-r from-thang-long-scarlet to-thang-long-mid-blue text-white":"bg-gradient-to-r from-thang-long-mid-blue to-thang-long-light-blue text-white"])},i(j(a.deadline)),3)]),e("td",Pt,[e("div",Ct,[e("button",{onClick:p=>a.is_active?null:X(a),class:h(["text-gray-400 transition-all duration-300 p-1.5 transform hover:scale-110",{"hover:text-thang-long-mid-blue cursor-pointer":!a.is_active,"opacity-50 cursor-not-allowed":a.is_active}]),title:a.is_active?"Không thể chỉnh sửa bài đăng đang hoạt động":"Chỉnh sửa"},t[16]||(t[16]=[e("i",{class:"fas fa-edit"},null,-1)]),10,Dt),e("button",{onClick:p=>U(a),class:"text-gray-400 hover:text-thang-long-mid-blue transition-all duration-300 cursor-pointer p-1.5 transform hover:scale-110",title:a.is_active?"Đang hoạt động":m(a)?"Hạn ứng tuyển đã hết":"Đã ẩn"},[e("i",{class:h([a.is_active?"fas fa-toggle-on text-thang-long-mid-blue":"fas fa-toggle-off text-gray-400",m(a)&&!a.is_active?"text-thang-long-scarlet":""])},null,2)],8,St),e("button",{class:"text-gray-400 hover:text-thang-long-mid-blue transition-all duration-300 cursor-pointer p-1.5 transform hover:scale-110",title:"Xem chi tiết",onClick:p=>K(a)},t[17]||(t[17]=[e("i",{class:"fas fa-file-alt"},null,-1)]),8,$t),e("button",{onClick:p=>a.is_active?null:L(a),class:h(["text-gray-400 transition-all duration-300 p-1.5 transform hover:scale-110",{"hover:text-thang-long-scarlet cursor-pointer":!a.is_active,"opacity-50 cursor-not-allowed":a.is_active}]),title:a.is_active?"Không thể xóa bài đăng đang hoạt động":"Xóa"},t[18]||(t[18]=[e("i",{class:"fas fa-trash"},null,-1)]),10,jt)])])]))),128))])])]),s.value.totalPages>1?(l(),o("div",zt,[e("div",Nt,[t[20]||(t[20]=x(" Hiển thị ")),e("span",Tt,i((s.value.currentPage-1)*s.value.pageSize+1),1),t[21]||(t[21]=x(" đến ")),e("span",Et,i(Math.min(s.value.currentPage*s.value.pageSize,s.value.totalItems)),1),t[22]||(t[22]=x(" của ")),e("span",Ht,i(s.value.totalItems),1),t[23]||(t[23]=x(" bài đăng "))]),e("div",It,[e("button",{onClick:t[4]||(t[4]=a=>S(s.value.currentPage-1)),disabled:s.value.currentPage===1,class:"px-3 py-1 border border-gray-300 rounded-md text-sm bg-white text-thang-long-indigo hover:bg-thang-long-cultured-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:-translate-y-0.5"},t[24]||(t[24]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,Vt),(l(!0),o(I,null,V(B(),a=>(l(),o("button",{key:a,onClick:p=>S(a),class:h(["px-3 py-1 border rounded-md text-sm transition-all duration-300 transform hover:-translate-y-0.5",a===s.value.currentPage?"bg-gradient-to-r from-thang-long-scarlet to-thang-long-mid-blue text-white border-transparent":"bg-white border-gray-300 text-thang-long-indigo hover:bg-thang-long-cultured-white"])},i(a),11,Bt))),128)),e("button",{onClick:t[5]||(t[5]=a=>S(s.value.currentPage+1)),disabled:s.value.currentPage===s.value.totalPages,class:"px-3 py-1 border border-gray-300 rounded-md text-sm bg-white text-thang-long-indigo hover:bg-thang-long-cultured-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:-translate-y-0.5"},t[25]||(t[25]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,Xt)])])):b("",!0)]))])])}}},Ut=A(Mt,[["__scopeId","data-v-cd5a0135"]]);export{Ut as default};
