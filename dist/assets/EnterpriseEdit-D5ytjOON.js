import{u as q,x as N,j as b,D as S,k as B,c as s,o as r,d as t,l as V,e as a,q as M,R as u,f as C,m,b as p,v as c,n as g,t as d,p as y,a as T,F as L,g as j}from"./index-B7EK3ATv.js";import{B as U}from"./BaseFileUpload-BtBR5MJJ.js";const P={class:"min-h-screen bg-gray-50 py-8"},F={class:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8"},K={key:0,class:"flex justify-center py-12"},R={key:1,class:"bg-white shadow-xl rounded-lg overflow-hidden"},D={class:"p-8"},H={class:"flex items-center justify-between mb-8"},J={class:"mb-8"},Q={class:"flex flex-col lg:flex-row lg:items-start gap-6"},Y={class:"flex-shrink-0"},$={class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},z={key:0,class:"relative"},O={class:"h-60 border border-gray-200 rounded-lg overflow-hidden bg-white"},W=["src"],A={key:1,class:"h-60 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},X={key:0,class:"mt-1 text-sm text-red-500"},Z={key:0,class:"mt-1 text-sm text-red-500"},ee={key:0,class:"mt-1 text-sm text-red-500"},te={key:0,class:"mt-1 text-sm text-red-500"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},le={key:0,class:"mt-1 text-sm text-red-500"},ne={key:0,class:"mt-1 text-sm text-red-500"},se={key:0,class:"mt-1 text-sm text-red-500"},re=["value"],ie={key:0,class:"mt-1 text-sm text-red-500"},ae={key:0,class:"mt-1 text-sm text-red-500"},ue={key:0,class:"mt-1 text-sm text-red-500"},de=["disabled"],me={key:0,class:"flex items-center"},pe={key:1},fe={__name:"EnterpriseEdit",setup(ge){const v=q(),x=N(),h=b(!0),f=b(!1);b(null),b(null);const o=b({}),k=b([]),l=S({company_name:"",tax:"",address:"",phone_number:"",email_company:"",business_certificate:null,business_certificate_public_id:null,field_of_activity:"",scale:"",description:"",city:"",link_web_site:"",logo:null,logo_public_id:null,background_image:null,background_image_public_id:null}),G=async()=>{try{const e=await(await fetch("https://provinces.open-api.vn/api/?depth=1")).json();k.value=e}catch(i){console.error("Lỗi khi lấy danh sách tỉnh thành:",i)}},w=()=>{if(l.link_web_site)try{new URL(l.link_web_site),o.value.link_web_site=""}catch{o.value.link_web_site="URL không hợp lệ. Vui lòng nhập đúng định dạng (ví dụ: https://example.com)"}},E=async()=>{var i,e;try{if(f.value=!0,o.value={},l.link_web_site&&(w(),o.value.link_web_site))return;(await x.updateEnterprise(l)).success&&v.push("/employer/company")}catch(n){(e=(i=n.response)==null?void 0:i.data)!=null&&e.errors?o.value=n.response.data.errors:console.error("Error updating enterprise:",n)}finally{f.value=!1}};B(async()=>{try{await G();const i=await x.fetchUserEnterprise();if(i.success){const e=i.data[0];console.log(e),Object.keys(l).forEach(n=>{e[n]!==void 0&&(l[n]=e[n])}),l.business_certificate=e.business_certificate_url,l.background_image=e.background_image_url,l.logo=e.logo_url}}catch(i){console.error("Error loading enterprise:",i)}finally{h.value=!1}});const _=(i,e)=>{i?o.value[e]=i:o.value[e]=""};return(i,e)=>(r(),s("div",P,[t("div",F,[h.value?(r(),s("div",K,e[27]||(e[27]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"},null,-1)]))):(r(),s("div",R,[t("div",D,[t("div",H,[e[29]||(e[29]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Chỉnh sửa thông tin doanh nghiệp",-1)),t("button",{onClick:e[0]||(e[0]=n=>V(v).back()),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},e[28]||(e[28]=[t("i",{class:"fas fa-arrow-left mr-2"},null,-1),a(" Quay lại ")]))]),t("form",{onSubmit:M(E,["prevent"]),class:"space-y-8"},[t("div",null,[e[31]||(e[31]=t("h2",{class:"text-lg font-medium text-gray-900 mb-6"},"Hình ảnh doanh nghiệp",-1)),t("div",J,[t("div",Q,[t("div",Y,[C(U,{modelValue:l.logo,"onUpdate:modelValue":e[1]||(e[1]=n=>l.logo=n),label:"Logo công ty",error:o.value.logo,accept:"image/*",icon:"fas fa-building",previewType:"cover",previewContainerClass:"h-32 w-32 mx-auto lg:mx-0",helpText:"Tải lên logo công ty (JPG, PNG, tối đa 2MB)",onError:e[2]||(e[2]=n=>_(n,"logo"))},null,8,["modelValue","error"])]),e[30]||(e[30]=t("div",{class:"flex-1 lg:ml-4"},[t("h3",{class:"text-sm font-medium text-gray-900 mb-2"},"Hướng dẫn logo"),t("ul",{class:"text-sm text-gray-600 space-y-1"},[t("li",null,"• Kích thước khuyến nghị: 200x200px hoặc lớn hơn"),t("li",null,"• Định dạng: JPG, PNG"),t("li",null,"• Nền trong suốt (PNG) để hiển thị tốt nhất"),t("li",null,"• Logo sẽ được hiển thị dạng hình vuông")])],-1))])]),t("div",null,[C(U,{modelValue:l.background_image,"onUpdate:modelValue":e[3]||(e[3]=n=>l.background_image=n),label:"Ảnh nền doanh nghiệp",error:o.value.background_image,accept:"image/*",icon:"fas fa-image",previewContainerClass:"h-48 w-full",helpText:"Tải lên ảnh nền doanh nghiệp (JPG, PNG, tối đa 2MB) - Kích thước khuyến nghị: 1200x400px",onError:e[4]||(e[4]=n=>_(n,"background_image"))},null,8,["modelValue","error"])])]),t("div",null,[e[35]||(e[35]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Giấy phép kinh doanh",-1)),t("div",$,[e[34]||(e[34]=t("div",{class:"flex items-center mb-3"},[t("i",{class:"fas fa-file-alt text-gray-500 mr-2"}),t("span",{class:"text-sm font-medium text-gray-700"},"Giấy phép kinh doanh hiện tại")],-1)),l.business_certificate?(r(),s("div",z,[t("div",O,[t("img",{src:l.business_certificate,alt:"Giấy phép kinh doanh",class:"w-full h-full object-contain"},null,8,W)]),e[32]||(e[32]=t("p",{class:"text-xs text-gray-500 mt-2"},[t("i",{class:"fas fa-info-circle mr-1"}),a(" Giấy phép kinh doanh đã được xác thực. Liên hệ admin để thay đổi. ")],-1))])):(r(),s("div",A,e[33]||(e[33]=[t("div",{class:"text-center"},[t("i",{class:"fas fa-file-alt text-gray-400 text-3xl mb-2"}),t("p",{class:"text-sm text-gray-500"},"Chưa có giấy phép kinh doanh")],-1)])))])]),t("div",null,[e[42]||(e[42]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Thông tin cơ bản",-1)),t("div",I,[u([l.company_name,o.value.company_name],()=>(r(),s("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[a("Tên công ty "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[5]||(e[5]=n=>l.company_name=n),type:"text",required:"",class:g(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.company_name}])},null,2),[[c,l.company_name]]),o.value.company_name?(r(),s("p",X,d(o.value.company_name),1)):p("",!0)])),e,6),u([l.tax,o.value.tax],()=>(r(),s("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[a("Mã số thuế "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[7]||(e[7]=n=>l.tax=n),type:"text",required:"",class:g(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.tax}])},null,2),[[c,l.tax]]),o.value.tax?(r(),s("p",Z,d(o.value.tax),1)):p("",!0)])),e,8),u([l.field_of_activity,o.value.field_of_activity],()=>(r(),s("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[a("Lĩnh vực hoạt động "),t("span",{class:"text-red-500"},"*")],-1)),m(t("select",{"onUpdate:modelValue":e[9]||(e[9]=n=>l.field_of_activity=n),required:"",class:g(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.field_of_activity}])},e[38]||(e[38]=[T('<option value="">Chọn lĩnh vực</option><option value="Công nghệ thông tin">Công nghệ thông tin</option><option value="Tài chính - Ngân hàng">Tài chính - Ngân hàng</option><option value="Marketing - Truyền thông">Marketing - Truyền thông</option><option value="Giáo dục">Giáo dục</option><option value="Y tế - Chăm sóc sức khỏe">Y tế - Chăm sóc sức khỏe</option><option value="Sản xuất - Công nghiệp">Sản xuất - Công nghiệp</option><option value="Bán lẻ - Thương mại">Bán lẻ - Thương mại</option><option value="Khác">Khác</option>',9)]),2),[[y,l.field_of_activity]]),o.value.field_of_activity?(r(),s("p",ee,d(o.value.field_of_activity),1)):p("",!0)])),e,10),u([l.scale,o.value.scale],()=>(r(),s("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[a("Quy mô công ty "),t("span",{class:"text-red-500"},"*")],-1)),m(t("select",{"onUpdate:modelValue":e[11]||(e[11]=n=>l.scale=n),required:"",class:g(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.scale}])},e[40]||(e[40]=[T('<option value="">Chọn quy mô</option><option value="1-10">1-10 nhân viên</option><option value="11-50">11-50 nhân viên</option><option value="51-200">51-200 nhân viên</option><option value="201-500">201-500 nhân viên</option><option value="501-1000">501-1000 nhân viên</option><option value="1000+">1000+ nhân viên</option>',7)]),2),[[y,l.scale]]),o.value.scale?(r(),s("p",te,d(o.value.scale),1)):p("",!0)])),e,12)])]),t("div",null,[e[49]||(e[49]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Thông tin liên hệ",-1)),t("div",oe,[u([l.email_company,o.value.email_company],()=>(r(),s("div",null,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[a("Email công ty "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[13]||(e[13]=n=>l.email_company=n),type:"email",required:"",class:g(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.email_company}])},null,2),[[c,l.email_company]]),o.value.email_company?(r(),s("p",le,d(o.value.email_company),1)):p("",!0)])),e,14),u([l.phone_number,o.value.phone_number],()=>(r(),s("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[a("Số điện thoại "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[15]||(e[15]=n=>l.phone_number=n),type:"tel",required:"",class:g(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.phone_number}])},null,2),[[c,l.phone_number]]),o.value.phone_number?(r(),s("p",ne,d(o.value.phone_number),1)):p("",!0)])),e,16),u([l.link_web_site,o.value.link_web_site],()=>(r(),s("div",null,[e[45]||(e[45]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Website",-1)),m(t("input",{"onUpdate:modelValue":e[17]||(e[17]=n=>l.link_web_site=n),type:"url",placeholder:"https://",class:g(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.link_web_site}]),onBlur:w},null,34),[[c,l.link_web_site]]),o.value.link_web_site?(r(),s("p",se,d(o.value.link_web_site),1)):p("",!0)])),e,18),u([l.city,o.value.city],()=>(r(),s("div",null,[e[47]||(e[47]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[a("Thành phố / Tỉnh "),t("span",{class:"text-red-500"},"*")],-1)),m(t("select",{"onUpdate:modelValue":e[19]||(e[19]=n=>l.city=n),required:"",class:g(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.city}])},[e[46]||(e[46]=t("option",{value:""},"Chọn thành phố/tỉnh",-1)),(r(!0),s(L,null,j(k.value,n=>(r(),s("option",{key:n.code,value:n.name},d(n.name),9,re))),128))],2),[[y,l.city]]),o.value.city?(r(),s("p",ie,d(o.value.city),1)):p("",!0)])),e,20),u([l.address,o.value.address],()=>(r(),s("div",{class:"md:col-span-2"},[e[48]||(e[48]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[a("Địa chỉ "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[21]||(e[21]=n=>l.address=n),type:"text",required:"",class:g(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.address}])},null,2),[[c,l.address]]),o.value.address?(r(),s("p",ae,d(o.value.address),1)):p("",!0)])),e,22)])]),u([l.description,o.value.description],()=>(r(),s("div",null,[e[50]||(e[50]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Giới thiệu công ty",-1)),t("div",null,[m(t("textarea",{"onUpdate:modelValue":e[23]||(e[23]=n=>l.description=n),rows:"4",required:"",class:g(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.description}]),placeholder:"Mô tả về công ty, sản phẩm, dịch vụ và văn hóa doanh nghiệp..."},null,2),[[c,l.description]]),o.value.description?(r(),s("p",ue,d(o.value.description),1)):p("",!0)])])),e,24),u([f.value],()=>(r(),s("div",{class:"flex justify-end space-x-4 pt-6 border-t"},[t("button",{type:"button",onClick:e[25]||(e[25]=n=>V(v).back()),class:"px-6 py-2.5 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Hủy "),t("button",{type:"submit",disabled:f.value,class:"px-6 py-2.5 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(r(),s("span",me,e[51]||(e[51]=[t("i",{class:"fas fa-circle-notch fa-spin mr-2"},null,-1),a(" Đang lưu... ")]))):(r(),s("span",pe,"Lưu thay đổi"))],8,de)])),e,26)],32)])]))])]))}};export{fe as default};
