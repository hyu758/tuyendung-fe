import{_ as T,r as P,c as u,a as c,e as s,b,d as w,f as r,t as v,g as f,w as g,B as V,i as S,J as I,j as N,E as y,o as B}from"./index-JLNOkUTm.js";const C={name:"PaymentResult",setup(){const l=V(),t=S(),p=I(),e=N(!0),h=y(()=>l.path.includes("payment-success")),k=y(()=>{var n;return(n=t.user)==null?void 0:n.premium_expiry}),i=y(()=>{if(!l.query.package)return null;const n=parseInt(l.query.package);let m=l.query.name||"",d="Đang tải...";const x=p.packages.find(a=>a.id===n);if(x){m||(m=x.name);const a=x.duration_days;if(a%365===0){const o=a/365;d=o>1?`${o} năm`:"1 năm"}else if(a%30===0){const o=a/30;d=o>1?`${o} tháng`:"1 tháng"}else if(a%7===0){const o=a/7;d=o>1?`${o} tuần`:"1 tuần"}else d=`${a} ngày`}return{id:n,name:m,duration:d}}),_=n=>n?new Date(n).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}):"Không xác định";return B(async()=>{if(h.value){await t.updateUserFromToken();try{await p.fetchPremiumPackages()}catch(n){console.error("Lỗi khi lấy thông tin gói Premium:",n)}finally{e.value=!1}}}),{isSuccess:h,packageInfo:i,loadingPackage:e,premiumExpiry:k,formatDate:_}}},D={class:"payment-result-page"},j={class:"container mx-auto px-4 py-16"},E={class:"max-w-lg mx-auto bg-white rounded-lg shadow-lg p-8"},q={key:0,class:"text-center"},L={key:0,class:"bg-gray-50 rounded-lg p-4 mb-8 text-left"},M={key:0},R={class:"flex flex-col space-y-3"},A={key:1,class:"text-center"},F={class:"flex flex-col space-y-3"};function H(l,t,p,e,h,k){const i=P("router-link");return c(),u("div",D,[s("div",j,[s("div",E,[e.isSuccess?(c(),u("div",q,[t[6]||(t[6]=b('<div class="w-20 h-20 bg-green-100 text-green-500 rounded-full flex items-center justify-center mx-auto mb-6" data-v-092ff389><svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-092ff389><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" data-v-092ff389></path></svg></div><h1 class="text-3xl font-bold text-gray-800 mb-4" data-v-092ff389>Thanh toán thành công!</h1><p class="text-gray-600 mb-6" data-v-092ff389>Tài khoản của bạn đã được nâng cấp lên Premium.</p>',3)),e.packageInfo?(c(),u("div",L,[t[3]||(t[3]=s("h2",{class:"font-semibold text-lg mb-2"},"Thông tin gói Premium:",-1)),s("p",null,[t[0]||(t[0]=s("span",{class:"font-medium"},"Tên gói:",-1)),r(" "+v(e.packageInfo.name),1)]),s("p",null,[t[1]||(t[1]=s("span",{class:"font-medium"},"Thời hạn:",-1)),r(" "+v(e.packageInfo.duration),1)]),e.premiumExpiry?(c(),u("p",M,[t[2]||(t[2]=s("span",{class:"font-medium"},"Hiệu lực đến:",-1)),r(" "+v(e.formatDate(e.premiumExpiry)),1)])):w("",!0)])):w("",!0),s("div",R,[f(i,{to:"/profile",class:"bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700"},{default:g(()=>t[4]||(t[4]=[r(" Xem tài khoản của bạn ")])),_:1}),f(i,{to:"/",class:"text-blue-600 hover:text-blue-800"},{default:g(()=>t[5]||(t[5]=[r(" Về trang chủ ")])),_:1})])])):(c(),u("div",A,[t[9]||(t[9]=b('<div class="w-20 h-20 bg-red-100 text-red-500 rounded-full flex items-center justify-center mx-auto mb-6" data-v-092ff389><svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-092ff389><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-092ff389></path></svg></div><h1 class="text-3xl font-bold text-gray-800 mb-4" data-v-092ff389>Thanh toán thất bại!</h1><p class="text-gray-600 mb-8" data-v-092ff389> Có lỗi xảy ra trong quá trình thanh toán. Vui lòng thử lại hoặc liên hệ với chúng tôi để được hỗ trợ. </p>',3)),s("div",F,[f(i,{to:"/premium",class:"bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700"},{default:g(()=>t[7]||(t[7]=[r(" Thử lại ")])),_:1}),f(i,{to:"/",class:"text-blue-600 hover:text-blue-800"},{default:g(()=>t[8]||(t[8]=[r(" Về trang chủ ")])),_:1})])]))])])])}const K=T(C,[["render",H],["__scopeId","data-v-092ff389"]]);export{K as default};
