import{u as S,y as N,k as b,D as R,o as J,c as o,a as n,e as t,q as M,f as u,h as K,Q as a,d,t as c,s as g,v as f,n as m,x as k,b as V,F as z,i as O}from"./index-DjN2xGKQ.js";const D={class:"min-h-screen bg-gray-50 py-8"},Q={class:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8"},F={key:0,class:"flex justify-center py-12"},Y={key:1,class:"bg-white shadow-xl rounded-lg overflow-hidden"},$={class:"p-8"},H={class:"flex items-center justify-between mb-8"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},A={class:"flex items-center"},I={class:"relative w-32 h-32"},X=["src"],Z={key:1,class:"w-full h-full flex items-center justify-center bg-gray-100 rounded-lg border-2 border-dashed border-gray-300"},ee={class:"ml-5"},te={class:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},se={class:"flex items-center"},le={class:"relative w-48 h-32"},oe=["src"],ne={key:1,class:"w-full h-full flex items-center justify-center bg-gray-100 rounded-lg border-2 border-dashed border-gray-300"},re={class:"ml-5"},ie={class:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},ue={class:"flex items-center"},ae={class:"relative w-48 h-32"},de=["src"],ce={key:1,class:"w-full h-full flex items-center justify-center bg-gray-100 rounded-lg border-2 border-dashed border-gray-300"},ge={class:"ml-5"},me={class:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},be={key:0,class:"mt-1 text-sm text-red-500"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},pe={key:0,class:"mt-1 text-sm text-red-500"},ve={key:0,class:"mt-1 text-sm text-red-500"},ye={key:0,class:"mt-1 text-sm text-red-500"},xe={key:0,class:"mt-1 text-sm text-red-500"},he={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ke={key:0,class:"mt-1 text-sm text-red-500"},_e={key:0,class:"mt-1 text-sm text-red-500"},we={key:0,class:"mt-1 text-sm text-red-500"},Ce=["value"],Ue={key:0,class:"mt-1 text-sm text-red-500"},Me={key:0,class:"mt-1 text-sm text-red-500"},Ve={key:0,class:"mt-1 text-sm text-red-500"},Be=["disabled"],Le={key:0,class:"flex items-center"},Te={key:1},Ee={__name:"EnterpriseEdit",setup(je){const h=S(),_=N(),w=b(!0),x=b(!1),p=b(null),v=b(null),y=b(null),s=b({}),C=b([]),l=R({company_name:"",tax:"",address:"",phone_number:"",email_company:"",business_certificate:null,business_certificate_public_id:null,field_of_activity:"",scale:"",description:"",city:"",link_web_site:"",logo:null,logo_public_id:null,background_image:null,background_image_public_id:null}),B=async()=>{try{const e=await(await fetch("https://provinces.open-api.vn/api/?depth=1")).json();C.value=e}catch(i){console.error("Lỗi khi lấy danh sách tỉnh thành:",i)}},L=i=>{const e=i.target.files[0];if(e){if(e.size>2*1024*1024){s.value.logo="Kích thước file không được vượt quá 2MB";return}if(!e.type.match("image.*")){s.value.logo="Vui lòng chọn file hình ảnh";return}l.logo=e,p.value=URL.createObjectURL(e),s.value.logo=""}},T=i=>{const e=i.target.files[0];if(e){if(e.size>2*1024*1024){s.value.background_image="Kích thước file không được vượt quá 2MB";return}if(!e.type.match("image.*")){s.value.background_image="Vui lòng chọn file hình ảnh";return}l.background_image=e,v.value=URL.createObjectURL(e),s.value.background_image=""}},j=()=>{l.logo=null,p.value=null},q=()=>{l.background_image=null,v.value=null},U=()=>{if(l.link_web_site)try{new URL(l.link_web_site),s.value.link_web_site=""}catch{s.value.link_web_site="URL không hợp lệ. Vui lòng nhập đúng định dạng (ví dụ: https://example.com)"}},E=i=>{const e=i.target.files[0];if(e){if(e.size>2*1024*1024){s.value.business_certificate="Kích thước file không được vượt quá 2MB";return}if(!e.type.match("image.*")){s.value.business_certificate="Vui lòng chọn file hình ảnh";return}l.business_certificate=e,y.value=URL.createObjectURL(e),s.value.business_certificate=""}},G=()=>{l.business_certificate=null,y.value=null},P=async()=>{var i,e;try{if(x.value=!0,s.value={},l.link_web_site&&(U(),s.value.link_web_site))return;(await _.updateEnterprise(l)).success&&h.push("/employer/company")}catch(r){(e=(i=r.response)==null?void 0:i.data)!=null&&e.errors?s.value=r.response.data.errors:console.error("Error updating enterprise:",r)}finally{x.value=!1}};return J(async()=>{try{await B();const i=await _.fetchUserEnterprise();if(i.success){const e=i.data[0];console.log(e),Object.keys(l).forEach(r=>{e[r]!==void 0&&(l[r]=e[r])}),l.business_certificate=e.business_certificate_url,l.background_image=e.background_image_url,l.logo=e.logo_url}}catch(i){console.error("Error loading enterprise:",i)}finally{w.value=!1}}),(i,e)=>(n(),o("div",D,[t("div",Q,[w.value?(n(),o("div",F,e[26]||(e[26]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"},null,-1)]))):(n(),o("div",Y,[t("div",$,[t("div",H,[e[28]||(e[28]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Chỉnh sửa thông tin doanh nghiệp",-1)),t("button",{onClick:e[0]||(e[0]=r=>M(h).back()),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},e[27]||(e[27]=[t("i",{class:"fas fa-arrow-left mr-2"},null,-1),u(" Quay lại ")]))]),t("form",{onSubmit:K(P,["prevent"]),class:"space-y-8"},[t("div",W,[a([p.value,l.logo],()=>(n(),o("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Logo công ty",-1)),t("div",A,[t("div",I,[p.value||l.logo?(n(),o("img",{key:0,src:p.value||l.logo,class:"w-full h-full object-cover rounded-lg border-2 border-gray-200",alt:"Logo preview"},null,8,X)):(n(),o("div",Z,e[29]||(e[29]=[t("i",{class:"fas fa-image text-3xl text-gray-400"},null,-1)]))),p.value||l.logo?(n(),o("button",{key:2,type:"button",class:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 focus:outline-none",onClick:j},e[30]||(e[30]=[t("i",{class:"fas fa-times"},null,-1)]))):d("",!0)]),t("div",ee,[t("label",te,[e[31]||(e[31]=t("i",{class:"fas fa-upload mr-2"},null,-1)),e[32]||(e[32]=u(" Tải logo lên ")),t("input",{type:"file",class:"hidden",accept:"image/*",onChange:L},null,32)]),e[33]||(e[33]=t("p",{class:"mt-2 text-xs text-gray-500"},"PNG, JPG, JPEG (Max. 2MB)",-1))])])])),e,1),a([v.value,l.background_image],()=>(n(),o("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ảnh nền",-1)),t("div",se,[t("div",le,[v.value||l.background_image?(n(),o("img",{key:0,src:v.value||l.background_image,class:"w-full h-full object-cover rounded-lg border-2 border-gray-200",alt:"Background preview"},null,8,oe)):(n(),o("div",ne,e[35]||(e[35]=[t("i",{class:"fas fa-image text-3xl text-gray-400"},null,-1)]))),v.value||l.background_image?(n(),o("button",{key:2,type:"button",class:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 focus:outline-none",onClick:q},e[36]||(e[36]=[t("i",{class:"fas fa-times"},null,-1)]))):d("",!0)]),t("div",re,[t("label",ie,[e[37]||(e[37]=t("i",{class:"fas fa-upload mr-2"},null,-1)),e[38]||(e[38]=u(" Tải ảnh nền ")),t("input",{type:"file",class:"hidden",accept:"image/*",onChange:T},null,32)]),e[39]||(e[39]=t("p",{class:"mt-2 text-xs text-gray-500"},"PNG, JPG, JPEG (Max. 2MB)",-1))])])])),e,2),a([y.value,l.business_certificate,s.value.business_certificate],()=>(n(),o("div",null,[e[46]||(e[46]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Giấy phép kinh doanh "),t("span",{class:"text-red-500"},"*")],-1)),t("div",ue,[t("div",ae,[y.value||l.business_certificate?(n(),o("img",{key:0,src:y.value||l.business_certificate,class:"w-full h-full object-cover rounded-lg border-2 border-gray-200",alt:"Business certificate preview"},null,8,de)):(n(),o("div",ce,e[41]||(e[41]=[t("i",{class:"fas fa-file-alt text-3xl text-gray-400"},null,-1)]))),y.value||l.business_certificate?(n(),o("button",{key:2,type:"button",class:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 focus:outline-none",onClick:G},e[42]||(e[42]=[t("i",{class:"fas fa-times"},null,-1)]))):d("",!0)]),t("div",ge,[t("label",me,[e[43]||(e[43]=t("i",{class:"fas fa-upload mr-2"},null,-1)),e[44]||(e[44]=u(" Tải giấy phép ")),t("input",{type:"file",class:"hidden",accept:"image/*",onChange:E},null,32)]),e[45]||(e[45]=t("p",{class:"mt-2 text-xs text-gray-500"},"PNG, JPG, JPEG (Max. 2MB)",-1))])]),s.value.business_certificate?(n(),o("p",be,c(s.value.business_certificate),1)):d("",!0)])),e,3)]),t("div",null,[e[53]||(e[53]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Thông tin cơ bản",-1)),t("div",fe,[a([l.company_name,s.value.company_name],()=>(n(),o("div",null,[e[47]||(e[47]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Tên công ty "),t("span",{class:"text-red-500"},"*")],-1)),g(t("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>l.company_name=r),type:"text",required:"",class:m(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.company_name}])},null,2),[[f,l.company_name]]),s.value.company_name?(n(),o("p",pe,c(s.value.company_name),1)):d("",!0)])),e,5),a([l.tax,s.value.tax],()=>(n(),o("div",null,[e[48]||(e[48]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Mã số thuế "),t("span",{class:"text-red-500"},"*")],-1)),g(t("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>l.tax=r),type:"text",required:"",class:m(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.tax}])},null,2),[[f,l.tax]]),s.value.tax?(n(),o("p",ve,c(s.value.tax),1)):d("",!0)])),e,7),a([l.field_of_activity,s.value.field_of_activity],()=>(n(),o("div",null,[e[50]||(e[50]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Lĩnh vực hoạt động "),t("span",{class:"text-red-500"},"*")],-1)),g(t("select",{"onUpdate:modelValue":e[8]||(e[8]=r=>l.field_of_activity=r),required:"",class:m(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.field_of_activity}])},e[49]||(e[49]=[V('<option value="">Chọn lĩnh vực</option><option value="Công nghệ thông tin">Công nghệ thông tin</option><option value="Tài chính - Ngân hàng">Tài chính - Ngân hàng</option><option value="Marketing - Truyền thông">Marketing - Truyền thông</option><option value="Giáo dục">Giáo dục</option><option value="Y tế - Chăm sóc sức khỏe">Y tế - Chăm sóc sức khỏe</option><option value="Sản xuất - Công nghiệp">Sản xuất - Công nghiệp</option><option value="Bán lẻ - Thương mại">Bán lẻ - Thương mại</option><option value="Khác">Khác</option>',9)]),2),[[k,l.field_of_activity]]),s.value.field_of_activity?(n(),o("p",ye,c(s.value.field_of_activity),1)):d("",!0)])),e,9),a([l.scale,s.value.scale],()=>(n(),o("div",null,[e[52]||(e[52]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Quy mô công ty "),t("span",{class:"text-red-500"},"*")],-1)),g(t("select",{"onUpdate:modelValue":e[10]||(e[10]=r=>l.scale=r),required:"",class:m(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.scale}])},e[51]||(e[51]=[V('<option value="">Chọn quy mô</option><option value="1-10">1-10 nhân viên</option><option value="11-50">11-50 nhân viên</option><option value="51-200">51-200 nhân viên</option><option value="201-500">201-500 nhân viên</option><option value="501-1000">501-1000 nhân viên</option><option value="1000+">1000+ nhân viên</option>',7)]),2),[[k,l.scale]]),s.value.scale?(n(),o("p",xe,c(s.value.scale),1)):d("",!0)])),e,11)])]),t("div",null,[e[60]||(e[60]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Thông tin liên hệ",-1)),t("div",he,[a([l.email_company,s.value.email_company],()=>(n(),o("div",null,[e[54]||(e[54]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Email công ty "),t("span",{class:"text-red-500"},"*")],-1)),g(t("input",{"onUpdate:modelValue":e[12]||(e[12]=r=>l.email_company=r),type:"email",required:"",class:m(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.email_company}])},null,2),[[f,l.email_company]]),s.value.email_company?(n(),o("p",ke,c(s.value.email_company),1)):d("",!0)])),e,13),a([l.phone_number,s.value.phone_number],()=>(n(),o("div",null,[e[55]||(e[55]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Số điện thoại "),t("span",{class:"text-red-500"},"*")],-1)),g(t("input",{"onUpdate:modelValue":e[14]||(e[14]=r=>l.phone_number=r),type:"tel",required:"",class:m(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.phone_number}])},null,2),[[f,l.phone_number]]),s.value.phone_number?(n(),o("p",_e,c(s.value.phone_number),1)):d("",!0)])),e,15),a([l.link_web_site,s.value.link_web_site],()=>(n(),o("div",null,[e[56]||(e[56]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Website",-1)),g(t("input",{"onUpdate:modelValue":e[16]||(e[16]=r=>l.link_web_site=r),type:"url",placeholder:"https://",class:m(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.link_web_site}]),onBlur:U},null,34),[[f,l.link_web_site]]),s.value.link_web_site?(n(),o("p",we,c(s.value.link_web_site),1)):d("",!0)])),e,17),a([l.city,s.value.city],()=>(n(),o("div",null,[e[58]||(e[58]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Thành phố / Tỉnh "),t("span",{class:"text-red-500"},"*")],-1)),g(t("select",{"onUpdate:modelValue":e[18]||(e[18]=r=>l.city=r),required:"",class:m(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.city}])},[e[57]||(e[57]=t("option",{value:""},"Chọn thành phố/tỉnh",-1)),(n(!0),o(z,null,O(C.value,r=>(n(),o("option",{key:r.code,value:r.name},c(r.name),9,Ce))),128))],2),[[k,l.city]]),s.value.city?(n(),o("p",Ue,c(s.value.city),1)):d("",!0)])),e,19),a([l.address,s.value.address],()=>(n(),o("div",{class:"md:col-span-2"},[e[59]||(e[59]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Địa chỉ "),t("span",{class:"text-red-500"},"*")],-1)),g(t("input",{"onUpdate:modelValue":e[20]||(e[20]=r=>l.address=r),type:"text",required:"",class:m(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.address}])},null,2),[[f,l.address]]),s.value.address?(n(),o("p",Me,c(s.value.address),1)):d("",!0)])),e,21)])]),a([l.description,s.value.description],()=>(n(),o("div",null,[e[61]||(e[61]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Giới thiệu công ty",-1)),t("div",null,[g(t("textarea",{"onUpdate:modelValue":e[22]||(e[22]=r=>l.description=r),rows:"4",required:"",class:m(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.description}]),placeholder:"Mô tả về công ty, sản phẩm, dịch vụ và văn hóa doanh nghiệp..."},null,2),[[f,l.description]]),s.value.description?(n(),o("p",Ve,c(s.value.description),1)):d("",!0)])])),e,23),a([x.value],()=>(n(),o("div",{class:"flex justify-end space-x-4 pt-6 border-t"},[t("button",{type:"button",onClick:e[24]||(e[24]=r=>M(h).back()),class:"px-6 py-2.5 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Hủy "),t("button",{type:"submit",disabled:x.value,class:"px-6 py-2.5 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[x.value?(n(),o("span",Le,e[62]||(e[62]=[t("i",{class:"fas fa-circle-notch fa-spin mr-2"},null,-1),u(" Đang lưu... ")]))):(n(),o("span",Te,"Lưu thay đổi"))],8,Be)])),e,25)],32)])]))])]))}};export{Ee as default};
