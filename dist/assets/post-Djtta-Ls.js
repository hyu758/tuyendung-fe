import{I as u,C as o}from"./index-BC0viRdf.js";const p=u("post",{state:()=>({posts:[],currentPost:null,loading:!1,error:null}),actions:{async fetchPosts(t=1,r=10,s="-created_at"){var e,a;try{return this.loading=!0,{success:!0,data:(await o.get(`/api/posts?page=${t}&page_size=${r}&sort=${s}`)).data}}catch(c){return console.error("Error fetching posts:",c),{success:!1,error:((a=(e=c.response)==null?void 0:e.data)==null?void 0:a.message)||"Có lỗi xảy ra khi tải danh sách tin tuyển dụng"}}finally{this.loading=!1}},async fetchPostByEmployer(t=1,r=10){var s,e;try{return this.loading=!0,{success:!0,data:(await o.get(`/api/posts/enterprise?page=${t}&page_size=${r}`)).data}}catch(a){return console.error("Error fetching posts:",a),{success:!1,error:((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Có lỗi xảy ra khi tải danh sách tin tuyển dụng"}}finally{this.loading=!1}},async createPost(t){var r;try{return this.loading=!0,{success:!0,...(await o.post("/api/posts/create/",t)).data}}catch(s){return console.error("Error creating post:",s),{success:!1,...((r=s.response)==null?void 0:r.data)||{message:"Có lỗi xảy ra khi tạo tin tuyển dụng"}}}finally{this.loading=!1}},async updatePost(t,r){var s,e;try{return this.loading=!0,{success:!0,data:(await o.put(`/api/posts/update/${t}/`,r)).data}}catch(a){return this.error=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.errors)||"Có lỗi xảy ra khi cập nhật tin tuyển dụng",{success:!1,error:this.error}}finally{this.loading=!1}},async deletePost(t){var r,s;try{const e=`/api/posts/delete/${t}/`;return{success:!0,data:(await o.delete(e)).data}}catch(e){return console.error("Error deleting post:",e),{success:!1,error:((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"Có lỗi xảy ra khi xóa tin tuyển dụng"}}},async fetchPostById(t){var r,s;try{this.loading=!0;const e=await o.get(`/api/post/${t}`);return this.currentPost=e.data,{success:!0,data:e.data}}catch(e){return this.error=((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"Có lỗi xảy ra khi tải thông tin tin tuyển dụng",{success:!1,error:this.error}}finally{this.loading=!1}},async togglePostStatus(t){var r,s;try{return{success:!0,data:(await o.put(`/api/post/${t}/toggle-status/`)).data}}catch(e){return console.error("Error toggling post status:",e),{success:!1,error:((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"Có lỗi xảy ra khi thay đổi trạng thái bài đăng"}}},async fetchSavedPosts(){var t,r;try{return this.loading=!0,{success:!0,data:(await o.get("/api/saved-posts/")).data}}catch(s){return console.error("Error fetching saved posts:",s),{success:!1,error:((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Có lỗi xảy ra khi tải danh sách tin đã lưu"}}finally{this.loading=!1}},async savePost(t){var r,s;try{return{success:!0,data:(await o.post("/api/saved-posts/save/",{post_id:t})).data}}catch(e){return console.error("Error saving post:",e),{success:!1,error:((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"Có lỗi xảy ra khi lưu tin tuyển dụng"}}},async deleteSavedPost(t){var r,s;try{return{success:!0,data:(await o.delete(`/api/saved-posts/${t}/delete/`)).data}}catch(e){return console.error("Error deleting saved post:",e),{success:!1,error:((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"Có lỗi xảy ra khi xóa tin đã lưu"}}},async deleteSavedPostByPostId(t){var r,s;try{return{success:!0,data:(await o.delete(`/api/saved-posts/post/${t}/delete/`)).data}}catch(e){return console.error("Error deleting saved post:",e),{success:!1,error:((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"Có lỗi xảy ra khi xóa tin đã lưu"}}},async fetchPostDetailForEnterprise(t){var r,s;try{return{success:!0,data:(await o.get(`/api/post/enterprise/${t}/`)).data}}catch(e){return console.error("Error fetching post detail for enterprise:",e),{success:!1,error:((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"Có lỗi xảy ra khi tải thông tin tin tuyển dụng"}}},async fetchRecommendedPosts(t=1,r=10){var s,e,a,c,i,d;try{this.loading=!0;const n=await o.get("/api/posts/recommended/",{params:{page:t,page_size:r}});return n.data&&n.data.status===200?{success:!0,data:n.data.data}:{success:!0,data:n.data}}catch(n){return console.error("Error fetching recommended posts:",n),((s=n.response)==null?void 0:s.status)===404&&((c=(a=(e=n.response)==null?void 0:e.data)==null?void 0:a.message)!=null&&c.includes("No criteria found"))?{success:!1,noCriteria:!0,error:"Không tìm thấy tiêu chí tìm việc"}:{success:!1,error:((d=(i=n.response)==null?void 0:i.data)==null?void 0:d.message)||"Có lỗi xảy ra khi tải danh sách việc làm gợi ý"}}finally{this.loading=!1}}}});export{p as u};
