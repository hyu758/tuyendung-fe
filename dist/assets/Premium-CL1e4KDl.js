import{_,c as o,a as r,e,d as l,b as f,f as m,t as a,F as v,h as w,n as P,J as S,i as B,B as N,k as g,o as C,S as M}from"./index-DoO9Fshd.js";const j={name:"PremiumPage",setup(){const i=S(),t=B(),x=N(),s=g(!1),p=g(null),h=g(!1),n=g(!1),u=()=>{x.query.status==="success"?(h.value=!0,t.updateUserFromToken()):x.query.status==="failed"&&(n.value=!0)},b=async d=>{if(!s.value){p.value=d,s.value=!0;try{const c=await i.purchasePremium(d);c.success&&c.paymentUrl?window.location.href=c.paymentUrl:console.error("Không thể tạo URL thanh toán")}catch(c){console.error("Lỗi khi mua gói Premium:",c)}finally{s.value=!1}}},y=d=>new Intl.NumberFormat("vi-VN").format(d),k=d=>{if(!d)return"Không xác định";const c=new Date(d);return new Intl.DateTimeFormat("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(c)};return C(async()=>{i.isPremium&&i.isPremiumExpired&&(console.log("Premium page - Premium đã hết hạn, đang hủy Premium..."),await i.cancelPremium()),await i.fetchPremiumPackages(),u()}),M(()=>{i.reset()}),{premiumStore:i,isBuying:s,selectedPackageId:p,showSuccessModal:h,showFailedModal:n,handlePurchase:b,formatPrice:y,formatDate:k}}},V={class:"premium-page"},T={class:"container mx-auto px-4 py-8"},D={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-6 mb-8 text-center"},F={class:"text-green-700"},L={key:1,class:"text-center py-8"},z={key:2,class:"bg-red-50 text-red-700 p-4 rounded-lg mb-8"},U={key:3,class:"grid md:grid-cols-3 gap-6 max-w-6xl mx-auto"},H={class:"bg-gradient-to-r from-blue-500 to-purple-600 py-6 px-6"},q={class:"text-2xl font-bold text-white"},E={class:"text-white text-opacity-90 mt-1"},I={class:"p-6 flex flex-col flex-grow"},A={class:"flex items-baseline mb-6"},G={class:"text-3xl font-bold text-gray-900"},K={class:"mb-8 space-y-4 flex-grow"},R=["onClick","disabled"],J={key:0},O={key:1},Y={key:2},Q={key:4,class:"text-center py-8"},W={key:5,class:"mt-16"},X={class:"overflow-x-auto"},Z={class:"min-w-full bg-white border border-gray-200 divide-y divide-gray-200 rounded-lg overflow-hidden"},$={class:"divide-y divide-gray-200"},ee={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},oe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},re={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},ae={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},ie={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},le={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},de={class:"bg-white rounded-lg p-8 max-w-md w-full"},ce={class:"text-center"},me={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ue={class:"bg-white rounded-lg p-8 max-w-md w-full"},ge={class:"text-center"};function xe(i,t,x,s,p,h){return r(),o("div",V,[e("div",T,[t[16]||(t[16]=f('<h1 class="text-3xl font-bold text-center mb-8" data-v-d2cb1e66>Nâng cấp tài khoản Premium</h1><div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8 text-center" data-v-d2cb1e66><h2 class="text-xl font-semibold text-yellow-800 mb-2" data-v-d2cb1e66>Chức năng này đang trong giai đoạn thử nghiệm</h2><p class="text-yellow-700 mb-2" data-v-d2cb1e66>Dưới đây là thông tin tài khoản test để trải nghiệm thanh toán:</p><div class="text-left max-w-md mx-auto" data-v-d2cb1e66><p class="text-yellow-700" data-v-d2cb1e66><span class="font-semibold" data-v-d2cb1e66>Ngân hàng:</span> NCB</p><p class="text-yellow-700" data-v-d2cb1e66><span class="font-semibold" data-v-d2cb1e66>Số thẻ:</span> 9704198526191432198</p><p class="text-yellow-700" data-v-d2cb1e66><span class="font-semibold" data-v-d2cb1e66>Tên chủ thẻ:</span> NGUYEN VAN A</p><p class="text-yellow-700" data-v-d2cb1e66><span class="font-semibold" data-v-d2cb1e66>Ngày phát hành:</span> 07/15</p><p class="text-yellow-700" data-v-d2cb1e66><span class="font-semibold" data-v-d2cb1e66>Mật khẩu OTP:</span> 123456</p></div></div>',2)),s.premiumStore.isPremium?(r(),o("div",D,[t[3]||(t[3]=e("div",{class:"flex items-center justify-center mb-4"},[e("i",{class:"fas fa-crown text-yellow-500 text-5xl"})],-1)),t[4]||(t[4]=e("h2",{class:"text-2xl font-bold text-green-800 mb-2"},"Tài khoản Premium đang hoạt động!",-1)),t[5]||(t[5]=e("p",{class:"text-green-700 mb-2"},"Bạn đang sử dụng tài khoản Premium với đầy đủ tính năng.",-1)),e("p",F,[t[2]||(t[2]=e("span",{class:"font-semibold"},"Ngày hết hạn:",-1)),m(" "+a(s.formatDate(s.premiumStore.premiumExpiry)),1)])])):l("",!0),s.premiumStore.loading?(r(),o("div",L,t[6]||(t[6]=[e("div",{class:"spinner inline-block w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Đang tải thông tin...",-1)]))):l("",!0),s.premiumStore.error&&!s.premiumStore.loading?(r(),o("div",z,[e("p",null,a(s.premiumStore.error),1)])):l("",!0),s.premiumStore.loading?l("",!0):(r(),o("div",U,[(r(!0),o(v,null,w(s.premiumStore.packages,n=>(r(),o("div",{key:n.id,class:"bg-white rounded-lg shadow-lg overflow-hidden border border-gray-200 hover:shadow-xl transition-shadow flex flex-col"},[e("div",H,[e("h3",q,a(n.name),1),e("p",E,a(n.description),1)]),e("div",I,[e("div",A,[e("span",G,a(s.formatPrice(n.price)),1),t[7]||(t[7]=e("span",{class:"text-gray-500 ml-1"},"VND",-1))]),e("ul",K,[(r(!0),o(v,null,w(n.features,(u,b)=>(r(),o("li",{key:b,class:"flex items-start"},[t[8]||(t[8]=e("svg",{class:"w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",null,a(u),1)]))),128))]),e("button",{onClick:u=>s.handlePurchase(n.id),disabled:s.premiumStore.isPremium||s.isBuying,class:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-lg font-medium hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed h-12"},[s.isBuying&&s.selectedPackageId===n.id?(r(),o("span",J,t[9]||(t[9]=[e("span",{class:"spinner inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"},null,-1),m(" Đang xử lý... ")]))):s.premiumStore.isPremium?(r(),o("span",O,"Đã kích hoạt")):(r(),o("span",Y,"Mua ngay"))],8,R)])]))),128))])),!s.premiumStore.loading&&s.premiumStore.packages.length===0?(r(),o("div",Q,t[10]||(t[10]=[e("p",{class:"text-gray-600"},"Không tìm thấy thông tin gói Premium. Vui lòng thử lại sau.",-1)]))):l("",!0),t[17]||(t[17]=f('<div class="mt-16" data-v-d2cb1e66><h2 class="text-2xl font-bold text-center mb-8" data-v-d2cb1e66>Đặc quyền của tài khoản Premium</h2><div class="grid md:grid-cols-3 gap-8" data-v-d2cb1e66><div class="bg-white p-6 rounded-lg shadow-md" data-v-d2cb1e66><div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4" data-v-d2cb1e66><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-d2cb1e66><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" data-v-d2cb1e66></path></svg></div><h3 class="text-xl font-semibold mb-2" data-v-d2cb1e66>Tìm kiếm nâng cao</h3><p class="text-gray-600" data-v-d2cb1e66>Dễ dàng lọc và tìm kiếm công việc phù hợp với nhiều tiêu chí khác nhau.</p></div><div class="bg-white p-6 rounded-lg shadow-md" data-v-d2cb1e66><div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4" data-v-d2cb1e66><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-d2cb1e66><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-d2cb1e66></path></svg></div><h3 class="text-xl font-semibold mb-2" data-v-d2cb1e66>Ưu tiên hiển thị</h3><p class="text-gray-600" data-v-d2cb1e66>Hồ sơ của bạn sẽ được ưu tiên hiển thị cho nhà tuyển dụng.</p></div><div class="bg-white p-6 rounded-lg shadow-md" data-v-d2cb1e66><div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4" data-v-d2cb1e66><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-d2cb1e66><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-d2cb1e66></path></svg></div><h3 class="text-xl font-semibold mb-2" data-v-d2cb1e66>Hỗ trợ 24/7</h3><p class="text-gray-600" data-v-d2cb1e66>Được hỗ trợ nhanh chóng mọi lúc, mọi nơi.</p></div></div></div>',1)),!s.premiumStore.loading&&s.premiumStore.sortedPremiumHistory.length>0?(r(),o("div",W,[t[15]||(t[15]=e("h2",{class:"text-2xl font-bold text-center mb-8"},"Lịch sử đăng ký Premium",-1)),e("div",X,[e("table",Z,[t[14]||(t[14]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Gói"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Giá"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ngày bắt đầu"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ngày kết thúc"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Trạng thái")])],-1)),e("tbody",$,[(r(!0),o(v,null,w(s.premiumStore.sortedPremiumHistory,n=>(r(),o("tr",{key:n.id,class:P({"bg-yellow-50":n.is_active})},[e("td",ee,a(n.package_name),1),e("td",te,a(s.formatPrice(n.package_price))+" VNĐ ",1),e("td",se,a(n.start_date),1),e("td",ne,a(n.end_date),1),e("td",oe,[n.is_active?(r(),o("span",re,t[11]||(t[11]=[e("svg",{class:"w-2 h-2 mr-1 text-green-400",fill:"currentColor",viewBox:"0 0 8 8"},[e("circle",{cx:"4",cy:"4",r:"3"})],-1),m(" Đang hoạt động ")]))):n.is_cancelled?(r(),o("span",ae,[t[12]||(t[12]=e("svg",{class:"w-2 h-2 mr-1 text-red-400",fill:"currentColor",viewBox:"0 0 8 8"},[e("circle",{cx:"4",cy:"4",r:"3"})],-1)),m(" Đã hủy ("+a(n.cancelled_date)+") ",1)])):(r(),o("span",ie,t[13]||(t[13]=[e("svg",{class:"w-2 h-2 mr-1 text-gray-400",fill:"currentColor",viewBox:"0 0 8 8"},[e("circle",{cx:"4",cy:"4",r:"3"})],-1),m(" Hết hạn ")])))])],2))),128))])])])])):l("",!0)]),s.showSuccessModal?(r(),o("div",le,[e("div",de,[e("div",ce,[t[18]||(t[18]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-green-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),t[19]||(t[19]=e("h2",{class:"text-2xl font-bold mb-4"},"Thanh toán thành công!",-1)),t[20]||(t[20]=e("p",{class:"text-gray-600 mb-6"},"Tài khoản của bạn đã được nâng cấp lên Premium thành công.",-1)),e("button",{onClick:t[0]||(t[0]=n=>s.showSuccessModal=!1),class:"bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700"},"Đóng")])])])):l("",!0),s.showFailedModal?(r(),o("div",me,[e("div",ue,[e("div",ge,[t[21]||(t[21]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-red-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),t[22]||(t[22]=e("h2",{class:"text-2xl font-bold mb-4"},"Thanh toán thất bại!",-1)),t[23]||(t[23]=e("p",{class:"text-gray-600 mb-6"},"Có lỗi xảy ra trong quá trình thanh toán. Vui lòng thử lại sau.",-1)),e("button",{onClick:t[1]||(t[1]=n=>s.showFailedModal=!1),class:"bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700"},"Đóng")])])])):l("",!0)])}const he=_(j,[["render",xe],["__scopeId","data-v-d2cb1e66"]]);export{he as default};
