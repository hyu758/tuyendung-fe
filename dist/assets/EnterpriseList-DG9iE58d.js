import{_ as N,x as $,j as d,D as I,E as K,k as A,y as G,G as Q,r as W,c as n,o,d as e,b as X,e as k,n as j,m as g,v as H,p as m,F as f,g as p,t as i,a as z,l as v,s as J,w as O}from"./index-Cd2jS5EI.js";import{u as R,a as Y}from"./address-CaLqJ2Bo.js";import{l as Z}from"./lodash-DjxWLlCR.js";const ee={class:"min-h-screen bg-gray-50 py-8"},te={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},se={class:"bg-white rounded-xl shadow-sm p-6 mb-8 hover:shadow-md transition-shadow"},ae={class:"lg:hidden mb-4"},le={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5"},oe={class:"relative"},ne={class:"relative"},re=["value"],ie={class:"relative"},de=["value"],ue={class:"relative"},ce={class:"mt-6 flex flex-col-reverse sm:flex-row gap-3 justify-end"},ge={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6"},ve={class:"text-gray-600 mb-3 sm:mb-0"},me={key:0},fe={key:1},pe={key:2,class:"font-medium"},xe={class:"flex items-center"},ye={class:"relative"},be={class:"relative ml-2"},he={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},we={key:1,class:"bg-white rounded-xl shadow-sm p-10 text-center"},ke={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},_e={class:"p-6 flex flex-col flex-grow"},Pe={class:"flex items-center mb-4"},Ce={class:"h-16 w-16 rounded-lg overflow-hidden bg-gray-100 flex items-center justify-center"},je=["src","alt"],Se={key:1,class:"h-full w-full flex items-center justify-center text-gray-400"},Ee={class:"ml-4"},Te={class:"text-lg font-medium text-gray-900 line-clamp-1 group-hover:text-blue-600"},Ve={class:"flex items-center mt-1"},qe={class:"text-sm text-gray-600"},ze={class:"mb-4 flex-grow"},Fe={class:"text-sm text-gray-600 line-clamp-3"},Me={class:"grid grid-cols-2 gap-4"},Ue={class:"flex items-center"},Le={class:"ml-2 text-sm text-gray-600 truncate"},Be={class:"flex items-center"},De={class:"ml-2 text-sm text-gray-600 truncate"},Ne={key:3,class:"mt-10 flex justify-center"},$e={class:"flex items-center space-x-2","aria-label":"Pagination"},Ie=["disabled"],Ke={class:"flex items-center space-x-2"},Ae=["onClick"],Ge=["disabled"],Qe={__name:"EnterpriseList",setup(We){const F=$(),M=R(),U=Y(),x=d(!0),y=d(!0),b=d([]),S=d([]),E=d([]),h=d(!0),T=d(!1),r=d({currentPage:1,totalPages:1,totalItems:0,pageSize:12}),l=I({q:"",city:"",field:"",scale:"",page:1,page_size:12,sort_by:"company_name",sort_order:"asc"}),L=K(()=>{const a=r.value.totalPages,t=r.value.currentPage;if(a<=5)return Array.from({length:a},(q,C)=>C+1);let c=Math.max(t-2,1),s=Math.min(c+4,a);return s===a&&(c=Math.max(s-4,1)),Array.from({length:s-c+1},(q,C)=>c+C)}),B=async()=>{try{y.value=!0;const a=await M.fetchProvinces();a.success&&(S.value=a.data)}catch(a){console.error("Error loading provinces:",a)}finally{y.value=!1}},D=async()=>{try{y.value=!0;const a=await U.fetchFields();a.success&&(E.value=a.data)}catch(a){console.error("Error loading fields:",a)}finally{y.value=!1}},w=async()=>{try{x.value=!0;const a=await F.searchEnterprises(l);a.success&&(b.value=a.data.data.results,r.value={currentPage:a.data.data.page,totalPages:a.data.data.total_pages,totalItems:a.data.data.total,pageSize:a.data.data.page_size})}catch(a){console.error("Error loading enterprises:",a)}finally{x.value=!1}},u=Z.debounce(()=>{l.page=1,w()},300),V=()=>{l.q="",l.city="",l.field="",l.scale="",l.page=1,l.sort_by="company_name",l.sort_order="asc",w()},_=a=>{a>=1&&a<=r.value.totalPages&&(l.page=a,w(),window.scrollTo({top:document.querySelector(".grid").offsetTop-100,behavior:"smooth"}))},P=()=>{T.value=window.innerWidth<1024};return A(async()=>{P(),window.addEventListener("resize",P),await Promise.all([B(),D()]),w()}),G(()=>{window.removeEventListener("resize",P)}),Q([()=>l.city,()=>l.field,()=>l.scale],u),(a,t)=>{const c=W("router-link");return o(),n("div",ee,[e("div",te,[t[46]||(t[46]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl md:text-3xl font-bold text-gray-900 mb-2"},"Danh sách công ty"),e("p",{class:"text-sm md:text-base text-gray-600"},"Khám phá và tìm hiểu về các công ty đang hoạt động trên hệ thống")],-1)),e("div",se,[e("div",ae,[e("button",{onClick:t[0]||(t[0]=s=>h.value=!h.value),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[t[12]||(t[12]=e("span",{class:"flex items-center font-medium text-gray-800"},[e("i",{class:"fas fa-filter text-blue-500 mr-2"}),k(" Bộ lọc tìm kiếm ")],-1)),e("i",{class:j(["fas",h.value?"fa-chevron-up":"fa-chevron-down"])},null,2)])]),e("div",{class:j([{hidden:!h.value&&T.value},"lg:block"])},[e("div",le,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},"Từ khóa tìm kiếm",-1)),e("div",oe,[g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.q=s),type:"text",class:"block w-full border border-gray-300 rounded-lg pl-10 pr-3 py-2.5 text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tên công ty..."},null,512),[[H,l.q]]),t[13]||(t[13]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-search text-gray-400"})],-1))])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},"Thành phố",-1)),e("div",ne,[g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.city=s),class:"block w-full border border-gray-300 rounded-lg py-2.5 pl-10 pr-10 text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},[t[15]||(t[15]=e("option",{value:""},"Tất cả thành phố",-1)),(o(!0),n(f,null,p(S.value,s=>(o(),n("option",{key:s.code,value:s.name},i(s.name),9,re))),128))],512),[[m,l.city]]),t[16]||(t[16]=e("div",{class:"absolute inset-y-0 left-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-map-marker-alt text-gray-400"})],-1)),t[17]||(t[17]=e("div",{class:"absolute inset-y-0 right-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-chevron-down text-gray-400 text-xs"})],-1))])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},"Lĩnh vực hoạt động",-1)),e("div",ie,[g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.field=s),class:"block w-full border border-gray-300 rounded-lg py-2.5 pl-10 pr-10 text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},[t[19]||(t[19]=e("option",{value:""},"Tất cả lĩnh vực",-1)),(o(!0),n(f,null,p(E.value,s=>(o(),n("option",{key:s.id,value:s.name},i(s.name),9,de))),128))],512),[[m,l.field]]),t[20]||(t[20]=e("div",{class:"absolute inset-y-0 left-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-industry text-gray-400"})],-1)),t[21]||(t[21]=e("div",{class:"absolute inset-y-0 right-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-chevron-down text-gray-400 text-xs"})],-1))])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},"Quy mô",-1)),e("div",ue,[g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.scale=s),class:"block w-full border border-gray-300 rounded-lg py-2.5 pl-10 pr-10 text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},t[23]||(t[23]=[z('<option value="" data-v-aad759e2>Tất cả quy mô</option><option value="1-50" data-v-aad759e2>1-50 nhân viên</option><option value="51-150" data-v-aad759e2>51-150 nhân viên</option><option value="151-300" data-v-aad759e2>151-300 nhân viên</option><option value="301-500" data-v-aad759e2>301-500 nhân viên</option><option value="501-1000" data-v-aad759e2>501-1000 nhân viên</option><option value="1000+" data-v-aad759e2>Trên 1000 nhân viên</option>',7)]),512),[[m,l.scale]]),t[24]||(t[24]=e("div",{class:"absolute inset-y-0 left-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-users text-gray-400"})],-1)),t[25]||(t[25]=e("div",{class:"absolute inset-y-0 right-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-chevron-down text-gray-400 text-xs"})],-1))])])]),e("div",ce,[e("button",{onClick:V,class:"px-4 py-2.5 border border-gray-300 rounded-lg text-gray-700 text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all flex items-center justify-center"},t[27]||(t[27]=[e("i",{class:"fas fa-redo-alt mr-2"},null,-1),k(" Đặt lại ")])),e("button",{onClick:t[5]||(t[5]=(...s)=>v(u)&&v(u)(...s)),class:"px-6 py-2.5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all flex items-center justify-center"},t[28]||(t[28]=[e("i",{class:"fas fa-search mr-2"},null,-1),k(" Tìm kiếm ")]))])],2)]),e("div",ge,[e("div",ve,[x.value?(o(),n("span",me,"Đang tải...")):b.value.length===0?(o(),n("span",fe,"Không tìm thấy kết quả")):(o(),n("span",pe,i(r.value.totalItems)+" công ty",1))]),e("div",xe,[t[33]||(t[33]=e("label",{for:"sort",class:"mr-2 text-sm text-gray-600"},"Sắp xếp:",-1)),e("div",ye,[g(e("select",{id:"sort","onUpdate:modelValue":t[6]||(t[6]=s=>l.sort_by=s),class:"pl-3 pr-8 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none cursor-pointer bg-white transition-all",onChange:t[7]||(t[7]=(...s)=>v(u)&&v(u)(...s))},t[29]||(t[29]=[e("option",{value:"company_name"},"Tên công ty",-1),e("option",{value:"created_at"},"Mới nhất",-1),e("option",{value:"scale"},"Quy mô",-1)]),544),[[m,l.sort_by]]),t[30]||(t[30]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[e("i",{class:"fas fa-chevron-down text-xs"})],-1))]),e("div",be,[g(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>l.sort_order=s),class:"pl-3 pr-8 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none cursor-pointer bg-white transition-all",onChange:t[9]||(t[9]=(...s)=>v(u)&&v(u)(...s))},t[31]||(t[31]=[e("option",{value:"asc"},"Tăng dần",-1),e("option",{value:"desc"},"Giảm dần",-1)]),544),[[m,l.sort_order]]),t[32]||(t[32]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[e("i",{class:"fas fa-chevron-down text-xs"})],-1))])])]),x.value?(o(),n("div",he,[(o(),n(f,null,p(9,s=>e("div",{key:`skeleton-${s}`,class:"bg-white rounded-xl shadow-sm p-6 transition-all"},t[34]||(t[34]=[z('<div class="flex items-center mb-4" data-v-aad759e2><div class="h-16 w-16 rounded-lg bg-gray-200 animate-pulse" data-v-aad759e2></div><div class="ml-4 flex-1" data-v-aad759e2><div class="h-5 bg-gray-200 rounded w-3/4 animate-pulse" data-v-aad759e2></div><div class="h-4 bg-gray-200 rounded w-1/2 mt-2 animate-pulse" data-v-aad759e2></div></div></div><div class="space-y-2 mb-6" data-v-aad759e2><div class="h-4 bg-gray-200 rounded w-full animate-pulse" data-v-aad759e2></div><div class="h-4 bg-gray-200 rounded w-full animate-pulse" data-v-aad759e2></div><div class="h-4 bg-gray-200 rounded w-2/3 animate-pulse" data-v-aad759e2></div></div><div class="grid grid-cols-2 gap-3" data-v-aad759e2><div class="flex items-center" data-v-aad759e2><div class="w-6 h-6 rounded-full bg-gray-200 mr-2 animate-pulse" data-v-aad759e2></div><div class="h-4 bg-gray-200 rounded flex-1 animate-pulse" data-v-aad759e2></div></div><div class="flex items-center" data-v-aad759e2><div class="w-6 h-6 rounded-full bg-gray-200 mr-2 animate-pulse" data-v-aad759e2></div><div class="h-4 bg-gray-200 rounded flex-1 animate-pulse" data-v-aad759e2></div></div></div>',3)]))),64))])):b.value.length===0?(o(),n("div",we,[t[36]||(t[36]=e("div",{class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 text-gray-400 mb-4"},[e("i",{class:"fas fa-building text-3xl"})],-1)),t[37]||(t[37]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Không tìm thấy công ty nào",-1)),t[38]||(t[38]=e("p",{class:"mt-1 text-sm text-gray-500 max-w-md mx-auto"},"Không có kết quả phù hợp với tiêu chí tìm kiếm của bạn. Vui lòng thử lại với các bộ lọc khác.",-1)),e("button",{onClick:V,class:"mt-4 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all inline-flex items-center"},t[35]||(t[35]=[e("i",{class:"fas fa-redo-alt mr-2"},null,-1),k(" Đặt lại bộ lọc ")]))])):(o(),n("div",ke,[(o(!0),n(f,null,p(b.value,s=>(o(),J(c,{key:s.id,to:{name:"EnterpriseDetail",params:{id:s.id}},class:"bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-all hover:-translate-y-1 border border-gray-100 flex flex-col h-full"},{default:O(()=>[e("div",_e,[e("div",Pe,[e("div",Ce,[s.logo_url?(o(),n("img",{key:0,src:s.logo_url,alt:s.company_name,class:"h-full w-full object-contain"},null,8,je)):(o(),n("div",Se,t[39]||(t[39]=[e("i",{class:"fas fa-building text-2xl"},null,-1)])))]),e("div",Ee,[e("h3",Te,i(s.company_name),1),e("div",Ve,[t[40]||(t[40]=e("i",{class:"fas fa-map-marker-alt text-red-500 mr-1 text-sm"},null,-1)),e("p",qe,i(s.city||"Chưa cập nhật"),1)])])]),e("div",ze,[e("p",Fe,i(s.description||"Chưa có mô tả về công ty"),1)]),e("div",Me,[e("div",Ue,[t[41]||(t[41]=e("div",{class:"w-8 h-8 rounded-full bg-blue-50 flex items-center justify-center flex-shrink-0"},[e("i",{class:"fas fa-users text-blue-500"})],-1)),e("span",Le,i(s.scale||"Chưa cập nhật"),1)]),e("div",Be,[t[42]||(t[42]=e("div",{class:"w-8 h-8 rounded-full bg-purple-50 flex items-center justify-center flex-shrink-0"},[e("i",{class:"fas fa-industry text-purple-500"})],-1)),e("span",De,i(s.field_of_activity||"Chưa cập nhật"),1)])])]),t[43]||(t[43]=e("div",{class:"px-6 py-3 bg-gray-50 flex justify-between items-center"},[e("span",{class:"text-sm text-blue-600 font-medium"},"Xem thông tin"),e("i",{class:"fas fa-arrow-right text-blue-600"})],-1))]),_:2},1032,["to"]))),128))])),r.value.totalPages>1?(o(),n("div",Ne,[e("nav",$e,[e("button",{onClick:t[10]||(t[10]=s=>_(r.value.currentPage-1)),disabled:r.value.currentPage===1,class:"flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 bg-white text-gray-500 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},t[44]||(t[44]=[e("span",{class:"sr-only"},"Previous",-1),e("i",{class:"fas fa-chevron-left"},null,-1)]),8,Ie),e("div",Ke,[(o(!0),n(f,null,p(L.value,s=>(o(),n("button",{key:s,onClick:q=>_(s),class:j(["flex items-center justify-center w-10 h-10 rounded-lg transition-colors",s===r.value.currentPage?"bg-blue-600 text-white":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50"])},i(s),11,Ae))),128))]),e("button",{onClick:t[11]||(t[11]=s=>_(r.value.currentPage+1)),disabled:r.value.currentPage===r.value.totalPages,class:"flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 bg-white text-gray-500 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},t[45]||(t[45]=[e("span",{class:"sr-only"},"Next",-1),e("i",{class:"fas fa-chevron-right"},null,-1)]),8,Ge)])])):X("",!0)])])}}},Oe=N(Qe,[["__scopeId","data-v-aad759e2"]]);export{Oe as default};
