import{u as M,k as y,o as B,c as r,a as n,e as t,l as S,f as i,q as L,m as u,d as a,v as p,n as d,t as m,p as w,b as h,A as D}from"./index-DKWVIqlT.js";import{u as E}from"./post-CqP9xSgc.js";import{u as I}from"./field-BkBEcs1P.js";import{s as P,n as x,a as U}from"./notifications-BdlxHN63.js";const F={class:"min-h-screen bg-gray-50 py-8"},H={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},N={class:"bg-white shadow-xl rounded-lg overflow-hidden"},R={class:"p-8"},Q={class:"flex items-center justify-between mb-8"},j={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},J={key:0,class:"mt-1 text-sm text-red-500"},Y=["value"],$=["value"],z=["min"],A={key:0,class:"mt-1 text-sm text-red-500"},K={key:0,class:"mt-1 text-sm text-red-500"},O={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},G={key:0,class:"mt-1 text-sm text-red-500"},W={key:0,class:"mt-1 text-sm text-red-500"},X={class:"md:col-span-2"},Z={key:0,class:"mt-1 text-sm text-red-500"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},te={key:0,class:"mt-1 text-sm text-red-500"},oe={key:0,class:"mt-1 text-sm text-red-500"},le={key:0,class:"mt-1 text-sm text-red-500"},se={key:0,class:"mt-1 text-sm text-red-500"},re={class:"md:col-span-2"},ne={class:"space-y-3"},ie={class:"flex items-center"},ue={key:0,class:"grid grid-cols-2 gap-4"},ae=["required","disabled"],de={key:0,class:"mt-1 text-sm text-red-500"},me=["min","required","disabled"],pe={key:0,class:"mt-1 text-sm text-red-500"},be={class:"space-y-6"},ce={key:0,class:"mt-1 text-sm text-red-500"},ge={key:0,class:"mt-1 text-sm text-red-500"},ve={key:0,class:"mt-1 text-sm text-red-500"},ye={class:"flex justify-end space-x-4 pt-6 border-t"},xe=["disabled"],fe={key:0,class:"flex items-center"},ke={key:1},Te={__name:"PostEdit",setup(we){const c=M(),_=E(),q=I(),f=y(!1),o=y({}),k=y(null),V=y(null),l=y({title:"",deadline:"",district:"",experience:"",interest:"",level:"",quantity:1,required:"",salary_min:0,salary_max:0,is_salary_negotiable:!1,time_working:"",type_working:"",city:"",description:"",detail_address:""}),T=c.currentRoute.value.params.id;B(async()=>{try{const b=await _.fetchPostById(T);if(!b.success){c.push("/employer/posts");return}if(l.value={...l.value,...b.data.data},l.value.field){const e=await q.getFieldById(l.value.field);console.log(e),e.success&&(k.value=e.data,console.log(k.value))}if(l.value.position){const e=await q.getPositionById(l.value.position);e.success&&(V.value=e.data)}}catch(b){console.error("Error loading post data:",b),c.push("/employer/posts")}});const C=async()=>{var b,e,g,v;try{f.value=!0,o.value={};const s=await _.updatePost(T,l.value);s.success?(P(x.post.updateSuccess),setTimeout(()=>{c.push("/employer/posts")},1e3)):(U(x.post.updateError+(s.error||x.common.error)),o.value=s.error)}catch(s){U(x.post.updateError+(((e=(b=s.response)==null?void 0:b.data)==null?void 0:e.message)||x.common.error)),(v=(g=s.response)==null?void 0:g.data)!=null&&v.errors?o.value=s.response.data.errors:console.error("Error updating post:",s)}finally{f.value=!1}};return(b,e)=>{var g,v;return n(),r("div",F,[t("div",H,[t("div",N,[t("div",R,[t("div",Q,[e[19]||(e[19]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Chỉnh sửa tin tuyển dụng",-1)),t("button",{onClick:e[0]||(e[0]=s=>S(c).back()),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},e[18]||(e[18]=[t("i",{class:"fas fa-arrow-left mr-2"},null,-1),i(" Quay lại ")]))]),t("form",{onSubmit:L(C,["prevent"]),class:"space-y-8"},[t("div",null,[e[25]||(e[25]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Thông tin chung",-1)),t("div",j,[t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[i("Tiêu đề tin "),t("span",{class:"text-red-500"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.title=s),type:"text",required:"",class:d(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.title}])},null,2),[[p,l.value.title]]),o.value.title?(n(),r("p",J,m(o.value.title),1)):a("",!0)]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[i("Lĩnh vực "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{value:((g=k.value)==null?void 0:g.name)||"Đang tải...",type:"text",readonly:"",class:"mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 bg-gray-50 text-gray-500 cursor-not-allowed"},null,8,Y)]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[i("Vị trí "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{value:((v=V.value)==null?void 0:v.name)||"Đang tải...",type:"text",readonly:"",class:"mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 bg-gray-50 text-gray-500 cursor-not-allowed"},null,8,$)]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[i("Hạn nộp hồ sơ "),t("span",{class:"text-red-500"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.deadline=s),type:"date",required:"",class:d(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.deadline}]),min:new Date().toISOString().split("T")[0]},null,10,z),[[p,l.value.deadline]]),o.value.deadline?(n(),r("p",A,m(o.value.deadline),1)):a("",!0)]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[i("Số lượng "),t("span",{class:"text-red-500"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.quantity=s),type:"number",required:"",min:"1",class:d(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.quantity}])},null,2),[[p,l.value.quantity]]),o.value.quantity?(n(),r("p",K,m(o.value.quantity),1)):a("",!0)])])]),t("div",null,[e[29]||(e[29]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Địa điểm làm việc",-1)),t("div",O,[t("div",null,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[i("Thành phố "),t("span",{class:"text-red-500"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.city=s),type:"text",required:"",class:d(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.city}])},null,2),[[p,l.value.city]]),o.value.city?(n(),r("p",G,m(o.value.city),1)):a("",!0)]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[i("Quận/Huyện "),t("span",{class:"text-red-500"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.district=s),type:"text",required:"",class:d(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.district}])},null,2),[[p,l.value.district]]),o.value.district?(n(),r("p",W,m(o.value.district),1)):a("",!0)]),t("div",X,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[i("Địa chỉ chi tiết "),t("span",{class:"text-red-500"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.detail_address=s),type:"text",required:"",class:d(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.detail_address}])},null,2),[[p,l.value.detail_address]]),o.value.detail_address?(n(),r("p",Z,m(o.value.detail_address),1)):a("",!0)])])]),t("div",null,[e[41]||(e[41]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Yêu cầu chung",-1)),t("div",ee,[t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[i("Kinh nghiệm "),t("span",{class:"text-red-500"},"*")],-1)),u(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>l.value.experience=s),required:"",class:d(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.experience}])},e[30]||(e[30]=[h('<option value="">Chọn kinh nghiệm</option><option value="Chưa có kinh nghiệm">Chưa có kinh nghiệm</option><option value="Dưới 1 năm">Dưới 1 năm</option><option value="1 năm">1 năm</option><option value="2 năm">2 năm</option><option value="3 năm">3 năm</option><option value="4 năm">4 năm</option><option value="5 năm">5 năm</option><option value="Trên 5 năm">Trên 5 năm</option>',9)]),2),[[w,l.value.experience]]),o.value.experience?(n(),r("p",te,m(o.value.experience),1)):a("",!0)]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[i("Cấp bậc "),t("span",{class:"text-red-500"},"*")],-1)),u(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>l.value.level=s),required:"",class:d(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.level}])},e[32]||(e[32]=[h('<option value="">Chọn cấp bậc</option><option value="Intern">Intern</option><option value="Fresher">Fresher</option><option value="Junior">Junior</option><option value="Middle">Middle</option><option value="Senior">Senior</option><option value="Leader">Leader</option><option value="Manager">Manager</option><option value="Director">Director</option>',9)]),2),[[w,l.value.level]]),o.value.level?(n(),r("p",oe,m(o.value.level),1)):a("",!0)]),t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[i("Thời gian làm việc "),t("span",{class:"text-red-500"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>l.value.time_working=s),type:"text",required:"",class:d(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.time_working}])},null,2),[[p,l.value.time_working]]),o.value.time_working?(n(),r("p",le,m(o.value.time_working),1)):a("",!0)]),t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[i("Loại hình công việc "),t("span",{class:"text-red-500"},"*")],-1)),u(t("select",{"onUpdate:modelValue":e[10]||(e[10]=s=>l.value.type_working=s),required:"",class:d(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.type_working}])},e[35]||(e[35]=[h('<option value="">Chọn loại hình công việc</option><option value="Toàn thời gian">Toàn thời gian</option><option value="Bán thời gian">Bán thời gian</option><option value="Làm việc từ xa">Làm việc từ xa</option><option value="Làm việc kết hợp">Làm việc kết hợp</option><option value="Thực tập">Thực tập</option><option value="Hợp đồng">Hợp đồng</option>',7)]),2),[[w,l.value.type_working]]),o.value.type_working?(n(),r("p",se,m(o.value.type_working),1)):a("",!0)]),t("div",re,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[i("Mức lương "),t("span",{class:"text-red-500"},"*")],-1)),t("div",ne,[t("div",ie,[u(t("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=s=>l.value.is_salary_negotiable=s),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[D,l.value.is_salary_negotiable]]),e[37]||(e[37]=t("label",{class:"ml-2 block text-sm text-gray-700"}," Thỏa thuận ",-1))]),l.value.is_salary_negotiable?a("",!0):(n(),r("div",ue,[t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm text-gray-600 mb-1"},"Tối thiểu",-1)),u(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>l.value.salary_min=s),type:"number",min:"0",step:"1000000",required:!l.value.is_salary_negotiable,class:d(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.salary_min}]),disabled:l.value.is_salary_negotiable},null,10,ae),[[p,l.value.salary_min,void 0,{number:!0}]]),o.value.salary_min?(n(),r("p",de,m(o.value.salary_min),1)):a("",!0)]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm text-gray-600 mb-1"},"Tối đa",-1)),u(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>l.value.salary_max=s),type:"number",min:l.value.salary_min||0,step:"1000000",required:!l.value.is_salary_negotiable,class:d(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.salary_max}]),disabled:l.value.is_salary_negotiable},null,10,me),[[p,l.value.salary_max,void 0,{number:!0}]]),o.value.salary_max?(n(),r("p",pe,m(o.value.salary_max),1)):a("",!0)])]))])])])]),t("div",null,[e[45]||(e[45]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Thông tin chi tiết",-1)),t("div",be,[t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[i("Mô tả công việc "),t("span",{class:"text-red-500"},"*")],-1)),u(t("textarea",{"onUpdate:modelValue":e[14]||(e[14]=s=>l.value.description=s),rows:"6",required:"",class:d(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.description}]),placeholder:"Mô tả chi tiết về công việc, trách nhiệm..."},null,2),[[p,l.value.description]]),o.value.description?(n(),r("p",ce,m(o.value.description),1)):a("",!0)]),t("div",null,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[i("Yêu cầu ứng viên "),t("span",{class:"text-red-500"},"*")],-1)),u(t("textarea",{"onUpdate:modelValue":e[15]||(e[15]=s=>l.value.required=s),rows:"6",required:"",class:d(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.required}]),placeholder:"Các yêu cầu về kỹ năng, trình độ..."},null,2),[[p,l.value.required]]),o.value.required?(n(),r("p",ge,m(o.value.required),1)):a("",!0)]),t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[i("Quyền lợi ứng viên "),t("span",{class:"text-red-500"},"*")],-1)),u(t("textarea",{"onUpdate:modelValue":e[16]||(e[16]=s=>l.value.interest=s),rows:"6",required:"",class:d(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.interest}]),placeholder:"Các quyền lợi, chế độ đãi ngộ..."},null,2),[[p,l.value.interest]]),o.value.interest?(n(),r("p",ve,m(o.value.interest),1)):a("",!0)])])]),t("div",ye,[t("button",{type:"button",onClick:e[17]||(e[17]=s=>S(c).back()),class:"px-6 py-2.5 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Hủy "),t("button",{type:"submit",disabled:f.value,class:"px-6 py-2.5 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(n(),r("span",fe,e[46]||(e[46]=[t("i",{class:"fas fa-circle-notch fa-spin mr-2"},null,-1),i(" Đang cập nhật... ")]))):(n(),r("span",ke,"Cập nhật tin"))],8,xe)])],32)])])])])}}};export{Te as default};
