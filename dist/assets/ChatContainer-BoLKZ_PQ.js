import{E as $,c as r,a as l,e as n,t as _,n as T,f as W,d as N,X as z,k as M,G as B,s as E,v as G,M as Z,h as P,U as ee,j as te,B as se,P as A,o as ne,O as w,z as oe,q as f,F as L,i as K,l as F,g as ae}from"./index-DjN2xGKQ.js";const ie={class:"whitespace-pre-wrap text-[15px]"},le={key:0,class:"ml-1"},re={key:0,class:"fas fa-check-double"},ce={key:1,class:"fas fa-check"},ue={__name:"ChatMessage",props:{content:{type:String,required:!0},isCurrentUser:{type:Boolean,default:!1},isRead:{type:Boolean,default:!1},createdAt:{type:[String,Date],required:!0}},setup(i){const e=i,k=$(()=>{const p=new Date(e.createdAt);return isNaN(p.getTime())?"":p.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})});return(p,h)=>(l(),r("div",{class:T(["flex",i.isCurrentUser?"justify-end":"justify-start","mb-3"])},[n("div",{class:T(["max-w-[70%] rounded-2xl px-4 py-2.5 break-words shadow-sm",i.isCurrentUser?"bg-blue-500 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"])},[n("p",ie,_(i.content),1),n("div",{class:T(["text-xs mt-1 flex justify-end items-center",i.isCurrentUser?"text-blue-100":"text-gray-500"])},[W(_(k.value)+" ",1),i.isCurrentUser?(l(),r("span",le,[i.isRead?(l(),r("i",re)):(l(),r("i",ce))])):N("",!0)],2)],2)],2))}},de={class:"flex-shrink-0 mr-3 relative"},he={key:0,class:"w-12 h-12 rounded-full overflow-hidden shadow-sm"},ge=["src"],fe={key:1,class:"w-12 h-12 bg-gradient-to-r from-blue-400 to-blue-500 rounded-full flex items-center justify-center text-white font-bold shadow-sm"},me={key:2,class:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"},ve={class:"flex-1 min-w-0"},ye={class:"flex justify-between items-center"},xe={class:"flex items-center mt-1"},pe={key:0,class:"ml-2 bg-blue-500 text-white text-xs rounded-full px-1.5 py-0.5 min-w-[20px] text-center shadow-sm"},be={__name:"ChatConversation",props:{displayName:{type:String,required:!0},avatar:{type:String,default:null},lastMessage:{type:String,default:""},lastMessageTime:{type:String,default:""},unreadCount:{type:Number,default:0},isOnline:{type:Boolean,default:!1},isActive:{type:Boolean,default:!1},isRead:{type:Boolean,default:!0},userId:{type:[Number,String],required:!0},openInPopup:{type:Boolean,default:!1}},emits:["select"],setup(i,{emit:e}){const k=i,p=e,h=z("openChat",null),U=$(()=>{if(!k.lastMessageTime)return"";const y=new Date(k.lastMessageTime),v=new Date-y,d=Math.floor(v/(1e3*60));return d<1?"Vá»«a xong":d<60?`${d} phÃºt`:d<24*60?`${Math.floor(d/60)}h`:d<7*24*60?`${Math.floor(d/(24*60))} ngÃ y`:y.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"})}),u=y=>y?y.split(" ").filter(C=>C.length>0).map(C=>C.charAt(0).toUpperCase()).slice(0,2).join(""):"?",b=()=>{k.openInPopup&&h?h(k.userId):p("select")};return(y,C)=>(l(),r("div",{class:T(["flex items-center px-4 py-3 cursor-pointer transition-colors border-b border-gray-100",{"bg-blue-50":i.isActive,"hover:bg-gray-50":!i.isActive,"border-l-4 border-l-blue-500":i.isActive}]),onClick:b},[n("div",de,[i.avatar?(l(),r("div",he,[n("img",{src:i.avatar,alt:"Avatar",class:"w-full h-full object-cover"},null,8,ge)])):(l(),r("div",fe,_(u(i.displayName)),1)),i.isOnline?(l(),r("div",me)):N("",!0)]),n("div",ve,[n("div",ye,[n("h3",{class:T(["text-sm font-medium truncate",[i.unreadCount>0?"text-gray-900 font-semibold":"text-gray-700"]])},_(i.displayName),3),n("span",{class:T(["text-xs text-gray-500",[i.unreadCount>0?"text-blue-600 font-semibold":"text-gray-500"]])},_(U.value),3)]),n("div",xe,[n("p",{class:T(["text-sm truncate flex-1",{"text-gray-700 font-medium":!i.isRead&&i.unreadCount>0,"text-gray-500":i.isRead||i.unreadCount===0}])},_(i.lastMessage),3),i.unreadCount>0?(l(),r("span",pe,_(i.unreadCount>99?"99+":i.unreadCount),1)):N("",!0)])])],2))}},Ce={class:"border-t border-gray-100 py-3 px-4 bg-white"},ke={class:"relative flex-1"},we=["onKeydown"],Me=["disabled"],Te={__name:"ChatInput",props:{loading:{type:Boolean,default:!1}},emits:["send-message"],setup(i,{emit:e}){const k=i,p=e,h=M(""),U=M(null),u=M(1);M(!1);const b=$(()=>h.value.trim().length>0&&!k.loading),y=()=>{b.value&&(p("send-message",h.value.trim()),h.value="",u.value=1,setTimeout(()=>{U.value.focus()},10))},C=d=>{d.shiftKey||y()},v=()=>{const d=h.value.split(`
`);u.value=Math.min(d.length,5)};return B(h,()=>{v()}),(d,I)=>(l(),r("div",Ce,[n("form",{onSubmit:P(y,["prevent"]),class:"flex items-end gap-2"},[n("div",ke,[E(n("textarea",{"onUpdate:modelValue":I[0]||(I[0]=D=>h.value=D),placeholder:"Nháº­p tin nháº¯n...",class:T(["w-full border-gray-200 border rounded-2xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent resize-none bg-gray-50",{"h-10":u.value===1,"h-20":u.value>1}]),onKeydown:Z(P(C,["prevent"]),["enter"]),onInput:v,ref_key:"textarea",ref:U},null,42,we),[[G,h.value]])]),n("button",{type:"submit",class:T(["bg-blue-500 hover:bg-blue-600 text-white rounded-full w-11 h-11 flex items-center justify-center shadow-sm transition-colors",{"opacity-50 cursor-not-allowed":!b.value,"hover:shadow-md":b.value}]),disabled:!b.value},I[1]||(I[1]=[n("i",{class:"fab fa-telegram-plane"},null,-1)]),10,Me)],32)]))}},Se={class:"h-full flex bg-white shadow-md rounded-lg overflow-hidden"},_e={class:"w-1/3 border-r border-gray-100 flex flex-col"},Ie={class:"py-3 px-4 border-b border-gray-100 bg-white"},$e={class:"relative mt-2"},Ne={class:"flex-1 overflow-y-auto"},Ue={key:0,class:"p-4 text-center"},je={key:1,class:"p-4 text-center"},Ae={class:"w-2/3 flex flex-col"},Be={class:"py-3 px-4 border-b border-gray-100 flex items-center justify-between bg-white shadow-sm"},Le={class:"flex items-center"},De={class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center overflow-hidden mr-3"},He=["src"],Re={key:1,class:"fas fa-user text-blue-500"},qe={class:"font-medium text-gray-800"},Oe={key:0,class:"text-xs text-green-500"},Ve={key:1,class:"py-2 text-center mb-2"},Pe={key:2,class:"my-auto text-center"},Ke={key:3,class:"my-auto text-center py-12"},Fe={class:"flex flex-col space-y-2"},We={key:0,class:"py-2 text-center"},ze={key:1,class:"flex-1 flex items-center justify-center flex-col p-4"},Je={__name:"ChatContainer",setup(i){const e=ee(),k=te(),p=se(),h=M(""),U=M(null),u=M(null),b=M(!1),y=M(!0),C=z("chatUserId",null);console.log("GiÃ¡ trá»‹ userId Ä‘Æ°á»£c inject tá»« component cha:",C);const v=$(()=>{var s;return(s=k.userInfo)==null?void 0:s.user_id});B(()=>p.query.user,s=>{if(s){console.log("Tham sá»‘ user Ä‘Ã£ thay Ä‘á»•i:",s);const t=parseInt(s,10);isNaN(t)||(console.log("Chá»n cuá»™c trÃ² chuyá»‡n má»›i tá»« URL thay Ä‘á»•i:",t),H(t))}},{immediate:!1});const d=$(()=>{if(!e.conversations.length)return[];const s=new Map;return e.conversations.forEach(o=>{const m=o.sender===v.value?o.recipient:o.sender,a=typeof m=="string"?parseInt(m,10):m,x=e.userInfoCache[a];let g=e.lastMessages[a];if(g){const O=typeof g.sender=="string"?parseInt(g.sender,10):g.sender,V=typeof g.recipient=="string"?parseInt(g.recipient,10):g.recipient;O===v.value&&V===a||O===a&&V===v.value||(g=null)}s.has(a)||s.set(a,{userId:a,displayName:(x==null?void 0:x.fullname)||`NgÆ°á»i dÃ¹ng #${a}`,avatar:(x==null?void 0:x.avatar)||null,isOnline:!1,lastMessage:(g==null?void 0:g.content)||"",lastMessageTime:(g==null?void 0:g.created_at)||"",unreadCount:0})}),Array.from(s.values()).sort((o,c)=>o.lastMessageTime?c.lastMessageTime?new Date(c.lastMessageTime)-new Date(o.lastMessageTime):-1:1)}),I=$(()=>{if(!h.value)return d.value;const s=h.value.toLowerCase();return d.value.filter(t=>t.displayName.toLowerCase().includes(s))});$(()=>e.activeConversation?d.value.find(s=>s.userId===e.activeConversation):null);const D=s=>(console.log("Láº¥y tÃªn hiá»ƒn thá»‹ cho conversation:",s),s.displayName||`NgÆ°á»i dÃ¹ng #${s.userId}`),H=async s=>{if(console.log("Äang chá»n cuá»™c trÃ² chuyá»‡n vá»›i userId:",s),e.activeConversation=s,U.value=s,e.activeConversation===s&&e.sortedMessages.length>0){console.log("Cuá»™c trÃ² chuyá»‡n nÃ y Ä‘Ã£ Ä‘Æ°á»£c chá»n vÃ  cÃ³ tin nháº¯n, khÃ´ng táº£i láº¡i");return}e.page=1,e.hasMoreMessages=!0;try{let t=!e.userInfoCache[s],o=null;t&&(o=e.fetchUserInfo(s));const c=await e.fetchMessages(s,!0);!c||c.length<20?e.hasMoreMessages=!1:e.hasMoreMessages=!0,await Promise.all([o].filter(Boolean)),await R(),await A(),setTimeout(()=>{S(),console.log("ÄÃ£ cuá»™n xuá»‘ng tin nháº¯n má»›i nháº¥t sau khi chá»n cuá»™c trÃ² chuyá»‡n")},100)}catch(t){console.error("Lá»—i khi táº£i tin nháº¯n:",t)}finally{e.loading=!1}},R=async()=>{const s=e.sortedMessages.filter(t=>!t.is_read&&t.sender!==v.value);if(s.length>0){console.log(`ÄÃ¡nh dáº¥u ${s.length} tin nháº¯n lÃ  Ä‘Ã£ Ä‘á»c`);for(const t of s)try{await e.markMessageAsRead(t.id)}catch(o){console.error(`Lá»—i khi Ä‘Ã¡nh dáº¥u tin nháº¯n ${t.id} lÃ  Ä‘Ã£ Ä‘á»c:`,o)}}},J=async s=>{if(e.activeConversation)try{const t=await e.sendMessage(e.activeConversation,s);console.log("ğŸ“¤ ÄÃ£ gá»­i tin nháº¯n má»›i:",t);const o=d.value.find(c=>c.userId===e.activeConversation);o&&(console.log("Cáº­p nháº­t tin nháº¯n má»›i nháº¥t cho cuá»™c trÃ² chuyá»‡n hiá»‡n táº¡i:",o.userId),o.lastMessage=s,o.lastMessageTime=new Date().toISOString()),setTimeout(async()=>{try{console.log("Táº£i tin nháº¯n má»›i nháº¥t sau khi gá»­i tin nháº¯n"),await e.fetchLatestMessages(),console.log("ÄÃ£ cáº­p nháº­t tin nháº¯n má»›i nháº¥t cho táº¥t cáº£ cuá»™c trÃ² chuyá»‡n")}catch(c){console.error("Lá»—i khi táº£i tin nháº¯n má»›i nháº¥t sau khi gá»­i:",c)}},500),setTimeout(()=>{const c=e.sortedMessages[e.sortedMessages.length-1];c&&c.content===s?console.log("âœ… Tin nháº¯n Ä‘Ã£ Ä‘Æ°á»£c thÃªm vÃ o danh sÃ¡ch, khÃ´ng cáº§n mÃ´ phá»ng"):(console.log("âš ï¸ KhÃ´ng tÃ¬m tháº¥y tin nháº¯n má»›i trong danh sÃ¡ch, mÃ´ phá»ng tin nháº¯n"),t&&(e.addMessage({...t,is_read:!0}),e.sortConversationToTop(t)))},500),await A(),S()}catch(t){console.error("Lá»—i khi gá»­i tin nháº¯n:",t)}},S=()=>{u.value&&(console.log("Thá»±c hiá»‡n cuá»™n xuá»‘ng cuá»‘i cÃ¹ng"),u.value.scrollTop=u.value.scrollHeight,setTimeout(()=>{u.value&&(u.value.scrollTop=u.value.scrollHeight,console.log("ÄÃ£ cuá»™n xuá»‘ng láº§n thá»© hai Ä‘á»ƒ Ä‘áº£m báº£o hiá»ƒn thá»‹ tin nháº¯n má»›i nháº¥t"))},100))},Q=async()=>{if(!u.value||!e.activeConversation)return;const{scrollTop:s,clientHeight:t,scrollHeight:o}=u.value;if(y.value=o-s-t<100,s<=20&&!b.value&&e.hasMoreMessages){console.log("Äang táº£i thÃªm tin nháº¯n cÅ© hÆ¡n...");const c=o;b.value=!0;try{if(await e.fetchMessages(e.activeConversation),await A(),u.value){const x=u.value.scrollHeight-c+20;u.value.scrollTop=x,console.log(`ÄÃ£ Ä‘iá»u chá»‰nh scrollTop tá»« 0 Ä‘áº¿n ${x}px`)}}catch(m){console.error("Lá»—i khi táº£i thÃªm tin nháº¯n cÅ© hÆ¡n:",m)}finally{setTimeout(()=>{b.value=!1},500)}}};B(()=>JSON.stringify(e.sortedMessages),()=>{if(console.log("Ná»™i dung tin nháº¯n Ä‘Ã£ thay Ä‘á»•i (deep check)"),R(),u.value){const{scrollTop:s,scrollHeight:t,clientHeight:o}=u.value,c=t-s-o<300,m=e.sortedMessages[e.sortedMessages.length-1],a=m&&m.sender===v.value;(c||a)&&(console.log("Ná»™i dung thay Ä‘á»•i vÃ  ngÆ°á»i dÃ¹ng gáº§n cuá»‘i hoáº·c gá»­i tin nháº¯n má»›i, Ä‘ang cuá»™n xuá»‘ng"),S(),A(()=>{S()}))}}),B(()=>e.sortedMessages.length,(s,t)=>{if(s>t){console.log(`Sá»‘ lÆ°á»£ng tin nháº¯n Ä‘Ã£ tÄƒng tá»« ${t} lÃªn ${s}`);const o=e.sortedMessages[e.sortedMessages.length-1];if(o&&u.value){const{scrollTop:c,scrollHeight:m,clientHeight:a}=u.value,x=m-c-a<300,g=o.sender===v.value;(x||g)&&(console.log("CÃ³ tin nháº¯n má»›i vÃ  ngÆ°á»i dÃ¹ng gáº§n cuá»‘i hoáº·c tin nháº¯n tá»« user hiá»‡n táº¡i, cuá»™n xuá»‘ng"),S())}}}),B(()=>e.activeConversation,(s,t)=>{s!==t&&(console.log(`Active conversation changed from ${t} to ${s}`),A(()=>{S()}))}),B(()=>e.sortedMessages,(s,t)=>{if(console.log("Tin nháº¯n thay Ä‘á»•i, danh sÃ¡ch cuá»™c trÃ² chuyá»‡n sáº½ Ä‘Æ°á»£c cáº­p nháº­t"),s.length>t.length){const o=s[s.length-1];e.activeConversation===o.sender&&(console.log("Tin nháº¯n má»›i thuá»™c cuá»™c trÃ² chuyá»‡n Ä‘ang má»Ÿ"),o.recipient===v.value&&!o.is_read&&e.markMessageAsRead(o.id))}},{deep:!0});const q=s=>{if(console.log("Nháº­n tin nháº¯n tá»« socket:",s),s&&s.type==="chat_message"){const t=s.message;if(e.addMessage(t),e.activeConversation===t.sender){e.markMessageAsRead(t.id);const o=d.value.find(c=>c.userId===t.sender);o&&(o.lastMessage=t.content,o.lastMessageTime=t.created_at,console.log("Cáº­p nháº­t tin nháº¯n má»›i nháº¥t cho cuá»™c trÃ² chuyá»‡n Ä‘ang má»Ÿ:",o)),A(()=>{S()})}setTimeout(async()=>{try{console.log("Táº£i tin nháº¯n má»›i nháº¥t sau khi nháº­n tin nháº¯n tá»« socket"),await e.fetchLatestMessages(),console.log("ÄÃ£ cáº­p nháº­t tin nháº¯n má»›i nháº¥t cho táº¥t cáº£ cuá»™c trÃ² chuyá»‡n")}catch(o){console.error("Lá»—i khi táº£i tin nháº¯n má»›i nháº¥t sau khi nháº­n tin nháº¯n socket:",o)}},500)}};ne(async()=>{console.log("ChatContainer Ä‘Ã£ Ä‘Æ°á»£c mount"),X();let s=null;p.query.user?(s=parseInt(p.query.user,10),console.log("TÃ¬m tháº¥y tham sá»‘ user trong URL:",s)):C&&(s=C,console.log("Sá»­ dá»¥ng userId Ä‘Æ°á»£c inject:",s));try{await Promise.all([e.fetchConversations(),e.fetchUnreadMessages()]),await e.fetchLatestMessages(),console.log("ÄÃ£ táº£i xong dá»¯ liá»‡u ban Ä‘áº§u, sá»‘ cuá»™c trÃ² chuyá»‡n:",e.conversations.length),s&&!isNaN(s)&&(console.log("Thá»±c hiá»‡n chá»n cuá»™c trÃ² chuyá»‡n vá»›i userId:",s),await H(s)),Y()}catch(t){console.error("Lá»—i khi khá»Ÿi táº¡o ChatContainer:",t)}w.onMessage(q)});const X=()=>{console.log("Äang khá»Ÿi táº¡o káº¿t ná»‘i WebSocket..."),w.init(),setTimeout(()=>{w.connected?console.log("âœ… WebSocket Ä‘Ã£ káº¿t ná»‘i thÃ nh cÃ´ng!"):(console.log("âš ï¸ WebSocket chÆ°a káº¿t ná»‘i sau 2 giÃ¢y, thá»­ káº¿t ná»‘i láº¡i..."),w.disconnect(),w.init())},2e3)};let j=null;const Y=()=>{j&&clearInterval(j),j=setInterval(()=>{w.connected?console.log("âœ“ WebSocket váº«n Ä‘ang káº¿t ná»‘i"):(console.log("âš ï¸ PhÃ¡t hiá»‡n WebSocket Ä‘Ã£ ngáº¯t káº¿t ná»‘i, Ä‘ang thá»­ káº¿t ná»‘i láº¡i..."),w.init())},3e4)};return oe(()=>{console.log("ChatContainer Ä‘Ã£ Ä‘Æ°á»£c unmount"),j&&(clearInterval(j),j=null),w.disconnect(),w.offMessage(q)}),(s,t)=>{var o,c,m;return l(),r("div",Se,[n("div",_e,[n("div",Ie,[t[2]||(t[2]=n("h2",{class:"text-lg font-semibold text-gray-800"},"Tin nháº¯n",-1)),n("div",$e,[E(n("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>h.value=a),placeholder:"TÃ¬m kiáº¿m cuá»™c trÃ² chuyá»‡n...",class:"w-full border-gray-200 border rounded-xl pl-9 pr-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent bg-gray-50"},null,512),[[G,h.value]]),t[1]||(t[1]=n("div",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"},[n("i",{class:"fas fa-search"})],-1))])]),n("div",Ne,[f(e).loading&&!f(e).activeConversation?(l(),r("div",Ue,t[3]||(t[3]=[n("i",{class:"fas fa-circle-notch fa-spin text-blue-500 text-xl"},null,-1),n("p",{class:"mt-2 text-gray-500"},"Äang táº£i danh sÃ¡ch...",-1)]))):I.value.length===0?(l(),r("div",je,t[4]||(t[4]=[n("i",{class:"fas fa-comments text-gray-300 text-4xl"},null,-1),n("p",{class:"mt-2 text-gray-500"},"KhÃ´ng cÃ³ cuá»™c trÃ² chuyá»‡n nÃ o",-1)]))):(l(!0),r(L,{key:2},K(I.value,a=>(l(),F(be,{key:a.id,"display-name":D(a),avatar:a.avatar,"last-message":a.lastMessage,"last-message-time":a.lastMessageTime,"unread-count":a.unreadCount,"is-online":a.isOnline,"is-active":f(e).activeConversation===a.userId,userId:a.userId,onSelect:x=>H(a.userId)},null,8,["display-name","avatar","last-message","last-message-time","unread-count","is-online","is-active","userId","onSelect"]))),128))])]),n("div",Ae,[f(e).activeConversation?(l(),r(L,{key:0},[n("div",Be,[n("div",Le,[n("div",De,[(o=f(e).activeConversation)!=null&&o.avatar?(l(),r("img",{key:0,src:f(e).activeConversation.avatar,alt:"Avatar",class:"w-full h-full object-cover"},null,8,He)):(l(),r("i",Re))]),n("div",null,[n("h3",qe,_((c=f(e).activeConversation)==null?void 0:c.displayName),1),(m=f(e).activeConversation)!=null&&m.isOnline?(l(),r("p",Oe,t[5]||(t[5]=[n("i",{class:"fas fa-circle mr-1 text-[8px]"},null,-1),W(" Äang hoáº¡t Ä‘á»™ng ")]))):N("",!0)])])]),n("div",{class:"flex-1 p-4 overflow-y-auto flex flex-col relative bg-gray-50",ref_key:"messagesContainer",ref:u,onScroll:Q},[!y.value&&f(e).sortedMessages.length>5?(l(),r("button",{key:0,onClick:S,class:"absolute bottom-4 right-4 bg-blue-500 hover:bg-blue-600 text-white rounded-full p-2 shadow-md z-10 transition-colors",title:"Cuá»™n xuá»‘ng tin nháº¯n má»›i nháº¥t"},t[6]||(t[6]=[n("i",{class:"fas fa-arrow-down"},null,-1)]))):N("",!0),b.value?(l(),r("div",Ve,t[7]||(t[7]=[n("i",{class:"fas fa-circle-notch fa-spin text-blue-500"},null,-1),n("p",{class:"text-xs text-gray-500"},"Äang táº£i thÃªm tin nháº¯n cÅ© hÆ¡n...",-1)]))):N("",!0),f(e).loading&&!f(e).sortedMessages.length?(l(),r("div",Pe,t[8]||(t[8]=[n("i",{class:"fas fa-circle-notch fa-spin text-blue-500 text-xl"},null,-1),n("p",{class:"mt-2 text-gray-500"},"Äang táº£i tin nháº¯n...",-1),n("p",{class:"text-xs text-gray-400 mt-1"},"Äang táº£i nhiá»u trang Ä‘á»ƒ hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§ cuá»™c trÃ² chuyá»‡n",-1)]))):f(e).sortedMessages.length?(l(),r(L,{key:4},[n("div",Fe,[(l(!0),r(L,null,K(f(e).sortedMessages,a=>(l(),F(ue,{key:a.id,content:a.content,"is-current-user":a.sender===v.value,"is-read":a.is_read,"created-at":a.created_at},null,8,["content","is-current-user","is-read","created-at"]))),128))]),f(e).loading&&f(e).sortedMessages.length?(l(),r("div",We,t[10]||(t[10]=[n("i",{class:"fas fa-circle-notch fa-spin text-blue-500"},null,-1),n("p",{class:"text-xs text-gray-500"},"Äang táº£i tin nháº¯n...",-1)]))):N("",!0)],64)):(l(),r("div",Ke,t[9]||(t[9]=[n("i",{class:"fas fa-comment-dots text-gray-300 text-5xl mb-3"},null,-1),n("p",{class:"mt-2 text-gray-500"},"ChÆ°a cÃ³ tin nháº¯n. HÃ£y gá»­i tin nháº¯n Ä‘áº§u tiÃªn!",-1)])))],544),ae(Te,{loading:f(e).loading,onSendMessage:J},null,8,["loading"])],64)):(l(),r("div",ze,t[11]||(t[11]=[n("i",{class:"fas fa-comments text-gray-300 text-6xl mb-4"},null,-1),n("h3",{class:"text-xl font-medium text-gray-700 mb-2"},"TrÃ² chuyá»‡n cá»§a báº¡n",-1),n("p",{class:"text-gray-500 text-center max-w-md"}," Chá»n má»™t cuá»™c trÃ² chuyá»‡n tá»« danh sÃ¡ch bÃªn trÃ¡i hoáº·c báº¯t Ä‘áº§u má»™t cuá»™c trÃ² chuyá»‡n má»›i. ",-1)])))])])}}};export{Je as _};
