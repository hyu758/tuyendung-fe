import{u as y,i as _,z as k,j as d,o as V,r as C,c as M,a as h,e as s,k as G,d as N,p as l,l as S,x as B,g as a,q as T,A as U,w as v,f as p,b as $}from"./index-CV7pDqKO.js";import{_ as f}from"./BaseInput-iZJAEimR.js";import{_ as b}from"./BaseButton-lFzL_fWZ.js";const j={class:"bg-gray-50 min-h-screen py-12 px-4 sm:px-6 lg:px-8"},q={class:"max-w-md mx-auto"},A={class:"bg-white py-8 px-6 shadow rounded-lg"},L={class:"space-y-6"},R={class:"flex items-center justify-between"},z={class:"flex items-center"},D={class:"text-sm"},H={class:"mt-6"},I={class:"mt-6"},E={class:"mt-6 text-center"},J={class:"text-sm text-gray-600"},O={__name:"Login",setup(Q){const m=y(),t=_();k(()=>{});const i=d(""),u=d(""),c=d(!1),n=d({});V(()=>{t.error=null,t.isAuthenticated&&(t.userRole==="admin"?m.push("/admin/dashboard"):t.userRole==="employer"?m.push("/employer/dashboard"):m.push("/"))});const x=async()=>{n.value={},t.error=null;let o=!0;if(i.value||(n.value.username="Tên đăng nhập không được để trống",o=!1),u.value||(n.value.password="Mật khẩu không được để trống",o=!1),!!o)try{const e=await t.login({email:i.value,password:u.value,remember:c.value})}catch(e){console.error("Lỗi khi đăng nhập:",e),t.error="Có lỗi xảy ra khi đăng nhập. Vui lòng thử lại sau."}},w=()=>{try{window.location.href="http://localhost:8000/api/auth/login/google-oauth2/"}catch(o){console.error("Lỗi khi bắt đầu đăng nhập với Google:",o),t.error="Có lỗi xảy ra khi bắt đầu đăng nhập Google"}};return(o,e)=>{const g=C("router-link");return h(),M("div",j,[s("div",q,[e[9]||(e[9]=s("div",{class:"text-center mb-8"},[s("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Đăng nhập"),s("p",{class:"text-gray-600"},"Đăng nhập để tiếp tục với JobHub")],-1)),s("div",A,[l(t).error?(h(),G(S,{key:0,variant:"error",message:l(t).error,show:!!l(t).error,dismissible:"",onDismiss:e[0]||(e[0]=r=>l(t).error=null),class:"mb-6"},null,8,["message","show"])):N("",!0),s("form",{onSubmit:B(x,["prevent"])},[s("div",L,[a(f,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=r=>i.value=r),type:"text",label:"Tên đăng nhập",placeholder:"Tên đăng nhập của bạn",autocomplete:"username",required:"",prefixIcon:"user",error:n.value.username,class:"transform transition-all duration-200 focus-within:scale-105"},null,8,["modelValue","error"]),a(f,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=r=>u.value=r),type:"password",label:"Mật khẩu",placeholder:"Mật khẩu của bạn",autocomplete:"current-password",required:"",prefixIcon:"lock",error:n.value.password,class:"transform transition-all duration-200 focus-within:scale-105"},null,8,["modelValue","error"]),s("div",R,[s("div",z,[T(s("input",{id:"remember_me",type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=r=>c.value=r),class:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-all"},null,512),[[U,c.value]]),e[4]||(e[4]=s("label",{for:"remember_me",class:"ml-2 block text-sm text-gray-700"}," Ghi nhớ đăng nhập ",-1))]),s("div",D,[a(g,{to:"/forgot-password",class:"font-medium text-blue-600 hover:text-blue-800 transition-colors"},{default:v(()=>e[5]||(e[5]=[p(" Quên mật khẩu? ")])),_:1})])]),s("div",null,[a(b,{type:"submit",variant:"primary",size:"lg",label:"Đăng nhập",loading:l(t).loading,disabled:l(t).loading,class:"w-full transform transition-all duration-300 hover:shadow-lg hover:scale-105 rounded-lg py-4 text-lg font-bold"},null,8,["loading","disabled"])])])],32),s("div",H,[e[6]||(e[6]=$('<div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-white text-gray-500">Hoặc đăng nhập với</span></div></div>',1)),s("div",I,[a(b,{variant:"light",class:"w-full",icon:["fab","google"],label:"Google",onClick:w})])])]),s("div",E,[s("p",J,[e[8]||(e[8]=p(" Chưa có tài khoản? ")),a(g,{to:"/register",class:"font-medium text-blue-600 hover:text-blue-500"},{default:v(()=>e[7]||(e[7]=[p(" Đăng ký ngay ")])),_:1})])])])])}}};export{O as default};
