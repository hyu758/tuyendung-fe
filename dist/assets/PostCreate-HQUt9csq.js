import{u as F,j as w,D as L,o as B,G as h,c as n,a as r,e as t,p as g,f as u,x as H,Q as b,q as m,d as a,s as v,n as p,F as _,h as q,t as d,v as c,A as I,b as V}from"./index-CyIo3ZF1.js";import{u as E}from"./post-Ce1EcnAI.js";import{u as N}from"./field-Hmq8g3YW.js";import{u as Q}from"./address-BwuTg2Qs.js";import{l as j}from"./lodash-DjxWLlCR.js";const R={class:"min-h-screen bg-gray-50 py-8"},$={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},A={class:"bg-white shadow-xl rounded-lg overflow-hidden"},J={class:"p-8"},O={class:"flex items-center justify-between mb-8"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},z={key:0,class:"mt-1 text-sm text-red-500"},G=["value"],K={key:0,class:"mt-1 text-sm text-red-500"},W={class:"relative"},X=["disabled"],Z={value:""},ee=["value"],te={key:0,class:"absolute right-2 top-1/2 transform -translate-y-1/2"},oe={key:0,class:"mt-1 text-sm text-red-500"},se=["min"],le={key:0,class:"mt-1 text-sm text-red-500"},ne={key:0,class:"mt-1 text-sm text-red-500"},re={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ie=["value"],de={key:0,class:"mt-1 text-sm text-red-500"},ae=["disabled"],ue={value:""},me=["value"],pe={key:0,class:"mt-1 text-sm text-red-500"},be={class:"md:col-span-2"},ce={key:0,class:"mt-1 text-sm text-red-500"},ge={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ve={key:0,class:"mt-1 text-sm text-red-500"},ye={key:0,class:"mt-1 text-sm text-red-500"},fe={key:0,class:"mt-1 text-sm text-red-500"},xe={key:0,class:"mt-1 text-sm text-red-500"},ke={class:"md:col-span-2"},we={class:"space-y-3"},he={class:"flex items-center"},_e={key:0,class:"grid grid-cols-2 gap-4"},qe=["required","disabled"],Ce={key:0,class:"mt-1 text-sm text-red-500"},Ve=["min","required","disabled"],Se={key:0,class:"mt-1 text-sm text-red-500"},Te={class:"space-y-6"},Ue={key:0,class:"mt-1 text-sm text-red-500"},Me={key:0,class:"mt-1 text-sm text-red-500"},Pe={key:0,class:"mt-1 text-sm text-red-500"},De={class:"flex justify-end space-x-4 pt-6 border-t"},Fe=["disabled"],Le={key:0,class:"flex items-center"},Be={key:1},Re={__name:"PostCreate",setup(He){const C=F(),M=E(),f=N(),y=Q(),k=w(!1),s=w({}),S=w([]),x=w([]),o=L({title:"",deadline:"",district:"",experience:"",enterprise:null,position:null,interest:"",level:"",quantity:1,required:"",salary_min:0,salary_max:0,is_salary_negotiable:!1,time_working:"",type_working:"",city:"",description:"",detail_address:"",field_id:null});B(async()=>{const[i,e]=await Promise.all([f.fetchFields(),y.fetchProvinces()]);i.success&&(S.value=i.data),e.success&&console.log("Provinces loaded:",y.provinces)});const T=j.debounce(async()=>{try{if(o.position="",x.value=[],o.field_id){const i=await f.fetchPositionsByField(o.field_id);i.success?(console.log("Positions data:",i.data),x.value=i.data.results,console.log("Updated positions:",x.value)):console.error("Failed to fetch positions:",i.error)}}catch(i){console.error("Error in handleFieldChange:",i)}},300);h(()=>x.value,i=>{console.log("Positions changed:",i)},{deep:!0}),h(()=>o.position,i=>{console.log("Selected position changed:",i)});const P=i=>{const e=y.provinces.find(l=>l.name===i);e&&(o.district="",y.setSelectedProvince(e.code))};h(()=>o.salary_min,i=>{i>o.salary_max&&o.salary_max>0&&(o.salary_max=i)}),h(()=>o.is_salary_negotiable,i=>{i&&(o.salary_min=0,o.salary_max=0)});const D=async()=>{var i,e;try{if(k.value=!0,s.value={},!o.is_salary_negotiable){if(o.salary_min<0){s.value.salary_min="Mức lương tối thiểu không được âm";return}if(o.salary_max<o.salary_min){s.value.salary_max="Mức lương tối đa phải lớn hơn hoặc bằng mức lương tối thiểu";return}}const l={...o,city:o.city,district:o.district,position:o.position||null,quantity:parseInt(o.quantity)||1,deadline:o.deadline?new Date(o.deadline).toISOString().split("T")[0]:null,field:o.field_id};console.log(l);const U=await M.createPost(l);U.success?C.push("/employer/posts"):s.value=U.error}catch(l){(e=(i=l.response)==null?void 0:i.data)!=null&&e.errors?s.value=l.response.data.errors:console.error("Error creating post:",l)}finally{k.value=!1}};return(i,e)=>(r(),n("div",R,[t("div",$,[t("div",A,[t("div",J,[t("div",O,[e[33]||(e[33]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Tạo tin tuyển dụng mới",-1)),t("button",{onClick:e[0]||(e[0]=l=>g(C).back()),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},e[32]||(e[32]=[t("i",{class:"fas fa-arrow-left mr-2"},null,-1),u(" Quay lại ")]))]),t("form",{onSubmit:H(D,["prevent"]),class:"space-y-8"},[t("div",null,[e[41]||(e[41]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Thông tin chung",-1)),t("div",Y,[b([o.title,s.value.title],()=>(r(),n("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Tiêu đề tin "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>o.title=l),type:"text",required:"",class:p(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.title}])},null,2),[[c,o.title]]),s.value.title?(r(),n("p",z,d(s.value.title),1)):a("",!0)])),e,2),t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Lĩnh vực "),t("span",{class:"text-red-500"},"*")],-1)),m(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>o.field_id=l),required:"",class:p(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.field_id}]),onChange:e[4]||(e[4]=(...l)=>g(T)&&g(T)(...l))},[e[35]||(e[35]=t("option",{value:""},"Chọn lĩnh vực",-1)),(r(!0),n(_,null,q(S.value,l=>(r(),n("option",{key:l.id,value:l.id},d(l.name),9,G))),128))],34),[[v,o.field_id]]),s.value.field_id?(r(),n("p",K,d(s.value.field_id),1)):a("",!0)]),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Vị trí "),t("span",{class:"text-red-500"},"*")],-1)),t("div",W,[m(t("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>o.position=l),required:"",class:p(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.position}]),disabled:!o.field_id||g(f).loadingPositions},[t("option",Z,d(g(f).loadingPositions?"Đang tải...":"Chọn vị trí"),1),(r(!0),n(_,null,q(x.value,l=>(r(),n("option",{key:l.id,value:l.id},d(l.name),9,ee))),128))],10,X),[[v,o.position]]),g(f).loadingPositions?(r(),n("div",te,e[37]||(e[37]=[t("i",{class:"fas fa-circle-notch fa-spin text-blue-500"},null,-1)]))):a("",!0)]),s.value.position?(r(),n("p",oe,d(s.value.position),1)):a("",!0)]),b([o.deadline,s.value.deadline],()=>(r(),n("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Hạn nộp hồ sơ "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>o.deadline=l),type:"date",required:"",class:p(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.deadline}]),min:new Date().toISOString().split("T")[0]},null,10,se),[[c,o.deadline]]),s.value.deadline?(r(),n("p",le,d(s.value.deadline),1)):a("",!0)])),e,7),b([o.quantity,s.value.quantity],()=>(r(),n("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Số lượng "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>o.quantity=l),type:"number",required:"",min:"1",class:p(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.quantity}])},null,2),[[c,o.quantity]]),s.value.quantity?(r(),n("p",ne,d(s.value.quantity),1)):a("",!0)])),e,9)])]),t("div",null,[e[46]||(e[46]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Địa điểm làm việc",-1)),t("div",re,[t("div",null,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Thành phố "),t("span",{class:"text-red-500"},"*")],-1)),m(t("select",{"onUpdate:modelValue":e[10]||(e[10]=l=>o.city=l),required:"",class:p(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.city}]),onChange:e[11]||(e[11]=l=>P(o.city))},[e[42]||(e[42]=t("option",{value:""},"Chọn tỉnh/thành phố",-1)),(r(!0),n(_,null,q(g(y).provinces,l=>(r(),n("option",{key:l.code,value:l.name},d(l.name),9,ie))),128))],34),[[v,o.city]]),s.value.city?(r(),n("p",de,d(s.value.city),1)):a("",!0)]),t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Quận/Huyện "),t("span",{class:"text-red-500"},"*")],-1)),m(t("select",{"onUpdate:modelValue":e[12]||(e[12]=l=>o.district=l),required:"",disabled:!o.city,class:p(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.district}])},[t("option",ue,d(o.city?"Chọn quận/huyện":"Vui lòng chọn tỉnh/thành phố trước"),1),(r(!0),n(_,null,q(g(y).getDistrictsByProvince,l=>(r(),n("option",{key:l.code,value:l.name},d(l.name),9,me))),128))],10,ae),[[v,o.district]]),s.value.district?(r(),n("p",pe,d(s.value.district),1)):a("",!0)]),t("div",be,[e[45]||(e[45]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Địa chỉ chi tiết "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>o.detail_address=l),type:"text",required:"",class:p(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.detail_address}])},null,2),[[c,o.detail_address]]),s.value.detail_address?(r(),n("p",ce,d(s.value.detail_address),1)):a("",!0)])])]),t("div",null,[e[58]||(e[58]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Yêu cầu chung",-1)),t("div",ge,[b([o.experience,s.value.experience],()=>(r(),n("div",null,[e[48]||(e[48]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Kinh nghiệm "),t("span",{class:"text-red-500"},"*")],-1)),m(t("select",{"onUpdate:modelValue":e[14]||(e[14]=l=>o.experience=l),required:"",class:p(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.experience}])},e[47]||(e[47]=[V('<option value="">Chọn kinh nghiệm</option><option value="Chưa có kinh nghiệm">Chưa có kinh nghiệm</option><option value="Dưới 1 năm">Dưới 1 năm</option><option value="1 năm">1 năm</option><option value="2 năm">2 năm</option><option value="3 năm">3 năm</option><option value="4 năm">4 năm</option><option value="5 năm">5 năm</option><option value="Trên 5 năm">Trên 5 năm</option>',9)]),2),[[v,o.experience]]),s.value.experience?(r(),n("p",ve,d(s.value.experience),1)):a("",!0)])),e,15),b([o.level,s.value.level],()=>(r(),n("div",null,[e[50]||(e[50]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Cấp bậc "),t("span",{class:"text-red-500"},"*")],-1)),m(t("select",{"onUpdate:modelValue":e[16]||(e[16]=l=>o.level=l),required:"",class:p(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.level}])},e[49]||(e[49]=[V('<option value="">Chọn cấp bậc</option><option value="Intern">Intern</option><option value="Fresher">Fresher</option><option value="Junior">Junior</option><option value="Middle">Middle</option><option value="Senior">Senior</option><option value="Leader">Leader</option><option value="Manager">Manager</option><option value="Director">Director</option>',9)]),2),[[v,o.level]]),s.value.level?(r(),n("p",ye,d(s.value.level),1)):a("",!0)])),e,17),b([o.time_working,s.value.time_working],()=>(r(),n("div",null,[e[51]||(e[51]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Thời gian làm việc "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[18]||(e[18]=l=>o.time_working=l),type:"text",required:"",class:p(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.time_working}])},null,2),[[c,o.time_working]]),s.value.time_working?(r(),n("p",fe,d(s.value.time_working),1)):a("",!0)])),e,19),b([o.type_working,s.value.type_working],()=>(r(),n("div",null,[e[53]||(e[53]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Loại hình công việc "),t("span",{class:"text-red-500"},"*")],-1)),m(t("select",{"onUpdate:modelValue":e[20]||(e[20]=l=>o.type_working=l),required:"",class:p(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.type_working}])},e[52]||(e[52]=[V('<option value="">Chọn loại hình công việc</option><option value="Toàn thời gian">Toàn thời gian</option><option value="Bán thời gian">Bán thời gian</option><option value="Làm việc từ xa">Làm việc từ xa</option><option value="Làm việc kết hợp">Làm việc kết hợp</option><option value="Thực tập">Thực tập</option><option value="Hợp đồng">Hợp đồng</option>',7)]),2),[[v,o.type_working]]),s.value.type_working?(r(),n("p",xe,d(s.value.type_working),1)):a("",!0)])),e,21),t("div",ke,[e[57]||(e[57]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Mức lương "),t("span",{class:"text-red-500"},"*")],-1)),t("div",we,[t("div",he,[m(t("input",{type:"checkbox","onUpdate:modelValue":e[22]||(e[22]=l=>o.is_salary_negotiable=l),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[I,o.is_salary_negotiable]]),e[54]||(e[54]=t("label",{class:"ml-2 block text-sm text-gray-700"}," Thỏa thuận ",-1))]),o.is_salary_negotiable?a("",!0):(r(),n("div",_e,[t("div",null,[e[55]||(e[55]=t("label",{class:"block text-sm text-gray-600 mb-1"},"Tối thiểu",-1)),m(t("input",{"onUpdate:modelValue":e[23]||(e[23]=l=>o.salary_min=l),type:"number",min:"0",step:"1000000",required:!o.is_salary_negotiable,class:p(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.salary_min}]),disabled:o.is_salary_negotiable},null,10,qe),[[c,o.salary_min,void 0,{number:!0}]]),s.value.salary_min?(r(),n("p",Ce,d(s.value.salary_min),1)):a("",!0)]),t("div",null,[e[56]||(e[56]=t("label",{class:"block text-sm text-gray-600 mb-1"},"Tối đa",-1)),m(t("input",{"onUpdate:modelValue":e[24]||(e[24]=l=>o.salary_max=l),type:"number",min:o.salary_min||0,step:"1000000",required:!o.is_salary_negotiable,class:p(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.salary_max}]),disabled:o.is_salary_negotiable},null,10,Ve),[[c,o.salary_max,void 0,{number:!0}]]),s.value.salary_max?(r(),n("p",Se,d(s.value.salary_max),1)):a("",!0)])]))])])])]),t("div",null,[e[62]||(e[62]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Thông tin chi tiết",-1)),t("div",Te,[b([o.description,s.value.description],()=>(r(),n("div",null,[e[59]||(e[59]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Mô tả công việc "),t("span",{class:"text-red-500"},"*")],-1)),m(t("textarea",{"onUpdate:modelValue":e[25]||(e[25]=l=>o.description=l),rows:"6",required:"",class:p(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.description}]),placeholder:"Mô tả chi tiết về công việc, trách nhiệm..."},null,2),[[c,o.description]]),s.value.description?(r(),n("p",Ue,d(s.value.description),1)):a("",!0)])),e,26),b([o.required,s.value.required],()=>(r(),n("div",null,[e[60]||(e[60]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Yêu cầu ứng viên "),t("span",{class:"text-red-500"},"*")],-1)),m(t("textarea",{"onUpdate:modelValue":e[27]||(e[27]=l=>o.required=l),rows:"6",required:"",class:p(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.required}]),placeholder:"Các yêu cầu về kỹ năng, trình độ..."},null,2),[[c,o.required]]),s.value.required?(r(),n("p",Me,d(s.value.required),1)):a("",!0)])),e,28),b([o.interest,s.value.interest],()=>(r(),n("div",null,[e[61]||(e[61]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u("Quyền lợi ứng viên "),t("span",{class:"text-red-500"},"*")],-1)),m(t("textarea",{"onUpdate:modelValue":e[29]||(e[29]=l=>o.interest=l),rows:"6",required:"",class:p(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":s.value.interest}]),placeholder:"Các quyền lợi, chế độ đãi ngộ..."},null,2),[[c,o.interest]]),s.value.interest?(r(),n("p",Pe,d(s.value.interest),1)):a("",!0)])),e,30)])]),t("div",De,[t("button",{type:"button",onClick:e[31]||(e[31]=l=>g(C).back()),class:"px-6 py-2.5 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Hủy tin "),t("button",{type:"submit",disabled:k.value,class:"px-6 py-2.5 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[k.value?(r(),n("span",Le,e[63]||(e[63]=[t("i",{class:"fas fa-circle-notch fa-spin mr-2"},null,-1),u(" Đang tạo... ")]))):(r(),n("span",Be,"Tạo yêu cầu phê duyệt"))],8,Fe)])],32)])])])]))}};export{Re as default};
