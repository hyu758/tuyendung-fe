import{_ as $,k as V,E as m,c as r,a as n,d as g,e as o,t as d,q as u,n as p,F as k,f as D}from"./index-BAXA5aW0.js";const I={class:"space-y-2"},N=["for"],E={class:"relative"},U={class:"mb-4"},W={key:0,class:"relative group"},A=["src","alt"],K={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-200 opacity-0 group-hover:opacity-100"},L={key:1,class:"p-4 flex flex-col items-center justify-center text-center"},M={class:"mb-3"},q={key:0,class:"bg-blue-100 text-blue-600 rounded-full p-3 mx-auto"},R={key:1,class:"bg-gray-100 text-gray-400 rounded-full p-3 mx-auto"},O={key:0,class:"text-sm text-gray-800 font-medium mb-1 truncate max-w-full"},G={class:"text-sm text-gray-500 mb-2"},H=["id","accept"],J={key:1,class:"mt-1 text-sm text-red-600"},P={key:2,class:"mt-1 text-sm text-gray-500"},Q={__name:"BaseFileUpload",props:{modelValue:{type:[File,null],default:null},label:{type:String,default:""},placeholder:{type:String,default:""},accept:{type:String,default:"image/*"},error:{type:String,default:""},helpText:{type:String,default:""},previewType:{type:String,default:"cover",validator:e=>["cover","contain"].includes(e)},previewContainerClass:{type:String,default:"h-48"},icon:{type:String,default:"fas fa-cloud-upload-alt"},maxSize:{type:Number,default:5*1024*1024},alt:{type:String,default:""},name:{type:String,default:""}},emits:["update:modelValue","error"],setup(e,{emit:w}){const l=e,i=w,c=V(null),v=V(!1),y=m(()=>l.name||`file-upload-${Date.now()}`),F=m(()=>l.modelValue?l.modelValue instanceof File?URL.createObjectURL(l.modelValue):l.modelValue:""),S=m(()=>l.modelValue?l.modelValue instanceof File?l.modelValue.name:"File đã tải lên":""),C=m(()=>{if(!l.modelValue||!(l.modelValue instanceof File))return"";const a=l.modelValue.size;return a<1024?`${a} B`:a<1024*1024?`${(a/1024).toFixed(1)} KB`:`${(a/(1024*1024)).toFixed(1)} MB`}),b=m(()=>l.modelValue?l.modelValue instanceof File?l.modelValue.type.startsWith("image/"):[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg"].some(t=>typeof l.modelValue=="string"&&l.modelValue.toLowerCase().endsWith(t)):!1),h=a=>{if(!a)return null;if(a.size>l.maxSize)return`Kích thước file không được vượt quá ${l.maxSize/(1024*1024)}MB`;if(l.accept&&l.accept!=="*"){const t=l.accept.split(",").map(f=>f.trim()),s=a.type;if(!t.some(f=>{if(f.endsWith("/*")){const z=f.split("/")[0];return s.startsWith(`${z}/`)}return f===s}))return"Định dạng file không được chấp nhận"}return null},x=()=>{c.value&&c.value.click()},B=a=>{const t=a.target.files[0];if(!t)return;const s=h(t);if(s){i("error",s);return}i("update:modelValue",t),i("error","")},T=a=>{v.value=!1;const t=a.dataTransfer.files[0];if(!t)return;const s=h(t);if(s){i("error",s);return}i("update:modelValue",t),i("error","")},j=()=>{i("update:modelValue",null),c.value&&(c.value.value="")};return(a,t)=>(n(),r("div",I,[e.label?(n(),r("label",{key:0,for:y.value,class:"block text-sm font-medium text-gray-700"},d(e.label),9,N)):g("",!0),o("div",E,[o("div",U,[o("div",{class:p(["w-full rounded-lg overflow-hidden bg-gray-50 border border-gray-200 shadow-sm transition-all duration-200",[e.previewContainerClass,e.error?"border-red-300":"hover:border-blue-300",v.value?"border-blue-500 bg-blue-50 shadow-md":""]]),onDragenter:t[0]||(t[0]=u(s=>v.value=!0,["prevent"])),onDragleave:t[1]||(t[1]=u(s=>v.value=!1,["prevent"])),onDragover:t[2]||(t[2]=u(()=>{},["prevent"])),onDrop:u(T,["prevent"])},[e.modelValue&&b.value?(n(),r("div",W,[o("img",{src:F.value,class:p(["w-full object-center transition duration-200",e.previewType==="cover"?"object-cover":"object-contain"]),alt:e.alt||e.label},null,10,A),o("div",K,[o("button",{type:"button",onClick:u(j,["stop"]),class:"bg-white text-gray-700 p-2 rounded-full shadow-md hover:bg-red-50 hover:text-red-500 transition-all duration-200 transform scale-90 hover:scale-100"},t[3]||(t[3]=[o("i",{class:"fas fa-trash text-sm"},null,-1)]))])])):(n(),r("div",L,[o("div",M,[e.modelValue?(n(),r("div",q,t[4]||(t[4]=[o("i",{class:"fas fa-file-alt text-xl"},null,-1)]))):(n(),r("div",R,[o("i",{class:p(["text-xl",e.icon])},null,2)]))]),e.modelValue&&!b.value?(n(),r("div",O,d(S.value),1)):g("",!0),o("div",G,[e.modelValue?(n(),r(k,{key:0},[o("span",null,d(C.value)+" - ",1),o("span",{class:"text-blue-500 cursor-pointer hover:text-blue-700",onClick:u(x,["stop"])}," Thay đổi ")],64)):(n(),r(k,{key:1},[D(d(e.placeholder||"Kéo thả file hoặc nhấp để chọn"),1)],64))]),e.modelValue?g("",!0):(n(),r("button",{key:1,type:"button",onClick:u(x,["stop"]),class:"mt-1 inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Chọn file "))]))],34)]),o("input",{id:y.value,ref_key:"fileInput",ref:c,type:"file",accept:e.accept,class:"hidden",onChange:B},null,40,H)]),e.error?(n(),r("div",J,d(e.error),1)):g("",!0),e.helpText?(n(),r("div",P,d(e.helpText),1)):g("",!0)]))}},Z=$(Q,[["__scopeId","data-v-37d5464b"]]);export{Z as B};
