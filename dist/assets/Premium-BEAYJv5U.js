import{_ as k,c as n,a as o,e as t,d as l,b as _,f as c,t as i,F as w,h as y,n as P,J as S,i as B,B as C,j as g,o as M,R as j}from"./index-CyIo3ZF1.js";const N={name:"PremiumPage",setup(){const a=S(),e=B(),x=C(),s=g(!1),h=g(null),p=g(!1),r=g(!1),u=()=>{x.query.status==="success"?(p.value=!0,e.updateUserFromToken()):x.query.status==="failed"&&(r.value=!0)},v=async d=>{if(!s.value){h.value=d,s.value=!0;try{const m=await a.purchasePremium(d);m.success&&m.paymentUrl?window.location.href=m.paymentUrl:console.error("Không thể tạo URL thanh toán")}catch(m){console.error("Lỗi khi mua gói Premium:",m)}finally{s.value=!1}}},f=d=>new Intl.NumberFormat("vi-VN").format(d),b=d=>{if(!d)return"Không xác định";const m=new Date(d);return new Intl.DateTimeFormat("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(m)};return M(async()=>{a.isPremium&&a.isPremiumExpired&&(console.log("Premium page - Premium đã hết hạn, đang hủy Premium..."),await a.cancelPremium()),await a.fetchPremiumPackages(),u()}),j(()=>{a.reset()}),{premiumStore:a,isBuying:s,selectedPackageId:h,showSuccessModal:p,showFailedModal:r,handlePurchase:v,formatPrice:f,formatDate:b}}},V={class:"premium-page"},T={class:"container mx-auto px-4 py-8"},F={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-6 mb-8 text-center"},L={class:"text-green-700"},D={key:1,class:"text-center py-8"},z={key:2,class:"bg-red-50 text-red-700 p-4 rounded-lg mb-8"},H={key:3,class:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto"},U={class:"bg-gradient-to-r from-blue-500 to-purple-600 py-6 px-6"},q={class:"text-2xl font-bold text-white"},I={class:"text-white text-opacity-90 mt-1"},E={class:"p-6"},K={class:"flex items-baseline mb-6"},R={class:"text-3xl font-bold text-gray-900"},G={class:"mb-8 space-y-4"},A=["onClick","disabled"],J={key:0},O={key:1},Q={key:2},W={key:4,class:"text-center py-8"},X={key:5,class:"mt-16"},Y={class:"overflow-x-auto"},Z={class:"min-w-full bg-white border border-gray-200 divide-y divide-gray-200 rounded-lg overflow-hidden"},$={class:"divide-y divide-gray-200"},tt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ot={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},it={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},at={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},lt={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},dt={class:"bg-white rounded-lg p-8 max-w-md w-full"},mt={class:"text-center"},ct={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ut={class:"bg-white rounded-lg p-8 max-w-md w-full"},gt={class:"text-center"};function xt(a,e,x,s,h,p){return o(),n("div",V,[t("div",T,[e[16]||(e[16]=t("h1",{class:"text-3xl font-bold text-center mb-8"},"Nâng cấp tài khoản Premium",-1)),s.premiumStore.isPremium?(o(),n("div",F,[e[3]||(e[3]=t("div",{class:"flex items-center justify-center mb-4"},[t("i",{class:"fas fa-crown text-yellow-500 text-5xl"})],-1)),e[4]||(e[4]=t("h2",{class:"text-2xl font-bold text-green-800 mb-2"},"Tài khoản Premium đang hoạt động!",-1)),e[5]||(e[5]=t("p",{class:"text-green-700 mb-2"},"Bạn đang sử dụng tài khoản Premium với đầy đủ tính năng.",-1)),t("p",L,[e[2]||(e[2]=t("span",{class:"font-semibold"},"Ngày hết hạn:",-1)),c(" "+i(s.formatDate(s.premiumStore.premiumExpiry)),1)])])):l("",!0),s.premiumStore.loading?(o(),n("div",D,e[6]||(e[6]=[t("div",{class:"spinner inline-block w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Đang tải thông tin...",-1)]))):l("",!0),s.premiumStore.error&&!s.premiumStore.loading?(o(),n("div",z,[t("p",null,i(s.premiumStore.error),1)])):l("",!0),s.premiumStore.loading?l("",!0):(o(),n("div",H,[(o(!0),n(w,null,y(s.premiumStore.packages,r=>(o(),n("div",{key:r.id,class:"bg-white rounded-lg shadow-lg overflow-hidden border border-gray-200 hover:shadow-xl transition-shadow"},[t("div",U,[t("h3",q,i(r.name),1),t("p",I,i(r.description),1)]),t("div",E,[t("div",K,[t("span",R,i(s.formatPrice(r.price)),1),e[7]||(e[7]=t("span",{class:"text-gray-500 ml-1"},"VND",-1))]),t("ul",G,[(o(!0),n(w,null,y(r.features,(u,v)=>(o(),n("li",{key:v,class:"flex items-start"},[e[8]||(e[8]=t("svg",{class:"w-5 h-5 text-green-500 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),t("span",null,i(u),1)]))),128))]),t("button",{onClick:u=>s.handlePurchase(r.id),disabled:s.premiumStore.isPremium||s.isBuying,class:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-lg font-medium hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed"},[s.isBuying&&s.selectedPackageId===r.id?(o(),n("span",J,e[9]||(e[9]=[t("span",{class:"spinner inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"},null,-1),c(" Đang xử lý... ")]))):s.premiumStore.isPremium?(o(),n("span",O,"Đã kích hoạt")):(o(),n("span",Q,"Mua ngay"))],8,A)])]))),128))])),!s.premiumStore.loading&&s.premiumStore.packages.length===0?(o(),n("div",W,e[10]||(e[10]=[t("p",{class:"text-gray-600"},"Không tìm thấy thông tin gói Premium. Vui lòng thử lại sau.",-1)]))):l("",!0),e[17]||(e[17]=_('<div class="mt-16" data-v-72237122><h2 class="text-2xl font-bold text-center mb-8" data-v-72237122>Đặc quyền của tài khoản Premium</h2><div class="grid md:grid-cols-3 gap-8" data-v-72237122><div class="bg-white p-6 rounded-lg shadow-md" data-v-72237122><div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4" data-v-72237122><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-72237122><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" data-v-72237122></path></svg></div><h3 class="text-xl font-semibold mb-2" data-v-72237122>Tìm kiếm nâng cao</h3><p class="text-gray-600" data-v-72237122>Dễ dàng lọc và tìm kiếm công việc phù hợp với nhiều tiêu chí khác nhau.</p></div><div class="bg-white p-6 rounded-lg shadow-md" data-v-72237122><div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4" data-v-72237122><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-72237122><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-72237122></path></svg></div><h3 class="text-xl font-semibold mb-2" data-v-72237122>Ưu tiên hiển thị</h3><p class="text-gray-600" data-v-72237122>Hồ sơ của bạn sẽ được ưu tiên hiển thị cho nhà tuyển dụng.</p></div><div class="bg-white p-6 rounded-lg shadow-md" data-v-72237122><div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4" data-v-72237122><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-72237122><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-72237122></path></svg></div><h3 class="text-xl font-semibold mb-2" data-v-72237122>Hỗ trợ 24/7</h3><p class="text-gray-600" data-v-72237122>Được hỗ trợ nhanh chóng mọi lúc, mọi nơi.</p></div></div></div>',1)),!s.premiumStore.loading&&s.premiumStore.sortedPremiumHistory.length>0?(o(),n("div",X,[e[15]||(e[15]=t("h2",{class:"text-2xl font-bold text-center mb-8"},"Lịch sử đăng ký Premium",-1)),t("div",Y,[t("table",Z,[e[14]||(e[14]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Gói"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Giá"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ngày bắt đầu"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ngày kết thúc"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Trạng thái")])],-1)),t("tbody",$,[(o(!0),n(w,null,y(s.premiumStore.sortedPremiumHistory,r=>(o(),n("tr",{key:r.id,class:P({"bg-yellow-50":r.is_active})},[t("td",tt,i(r.package_name),1),t("td",et,i(s.formatPrice(r.package_price))+" VNĐ ",1),t("td",st,i(r.start_date),1),t("td",rt,i(r.end_date),1),t("td",nt,[r.is_active?(o(),n("span",ot,e[11]||(e[11]=[t("svg",{class:"w-2 h-2 mr-1 text-green-400",fill:"currentColor",viewBox:"0 0 8 8"},[t("circle",{cx:"4",cy:"4",r:"3"})],-1),c(" Đang hoạt động ")]))):r.is_cancelled?(o(),n("span",it,[e[12]||(e[12]=t("svg",{class:"w-2 h-2 mr-1 text-red-400",fill:"currentColor",viewBox:"0 0 8 8"},[t("circle",{cx:"4",cy:"4",r:"3"})],-1)),c(" Đã hủy ("+i(r.cancelled_date)+") ",1)])):(o(),n("span",at,e[13]||(e[13]=[t("svg",{class:"w-2 h-2 mr-1 text-gray-400",fill:"currentColor",viewBox:"0 0 8 8"},[t("circle",{cx:"4",cy:"4",r:"3"})],-1),c(" Hết hạn ")])))])],2))),128))])])])])):l("",!0)]),s.showSuccessModal?(o(),n("div",lt,[t("div",dt,[t("div",mt,[e[18]||(e[18]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-green-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e[19]||(e[19]=t("h2",{class:"text-2xl font-bold mb-4"},"Thanh toán thành công!",-1)),e[20]||(e[20]=t("p",{class:"text-gray-600 mb-6"},"Tài khoản của bạn đã được nâng cấp lên Premium thành công.",-1)),t("button",{onClick:e[0]||(e[0]=r=>s.showSuccessModal=!1),class:"bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700"},"Đóng")])])])):l("",!0),s.showFailedModal?(o(),n("div",ct,[t("div",ut,[t("div",gt,[e[21]||(e[21]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-red-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),e[22]||(e[22]=t("h2",{class:"text-2xl font-bold mb-4"},"Thanh toán thất bại!",-1)),e[23]||(e[23]=t("p",{class:"text-gray-600 mb-6"},"Có lỗi xảy ra trong quá trình thanh toán. Vui lòng thử lại sau.",-1)),t("button",{onClick:e[1]||(e[1]=r=>s.showFailedModal=!1),class:"bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700"},"Đóng")])])])):l("",!0)])}const pt=k(N,[["render",xt],["__scopeId","data-v-72237122"]]);export{pt as default};
