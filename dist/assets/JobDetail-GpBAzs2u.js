import{_ as ye,B as be,u as _e,j as y,i as we,D as ne,E as O,G as ke,o as Ce,r as De,c,a as d,e,d as x,F as B,h as E,b as G,t as a,g as r,p as l,N as o,k as ie,w as L,n as p,f as b,x as q,q as K,v as z,C as Te,O as le}from"./index-B8AWlpIq.js";import{u as ae}from"./post-BXHB_wWf.js";import{_ as R}from"./BaseButton-BOoC5nzC.js";import{u as Ie}from"./useToast-B6sEZtkc.js";const Ve={class:"job-detail-container px-4 pb-8 pt-4"},je={class:"max-w-5xl mx-auto"},Le={key:0,class:"space-y-6"},Pe={class:"bg-white shadow-lg rounded-lg overflow-hidden mb-6"},Se={class:"p-4 md:p-6"},$e={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 md:gap-6 mb-6"},Ne={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Be={class:"lg:col-span-2 space-y-6"},Ee={class:"bg-white shadow-lg rounded-lg overflow-hidden"},Fe={class:"p-4 md:p-6"},Me={class:"space-y-6"},qe={class:"bg-white shadow-lg rounded-lg overflow-hidden"},Ke={class:"p-4 md:p-6"},ze={class:"space-y-4"},Ae={class:"bg-white shadow-lg rounded-lg overflow-hidden"},Oe={class:"p-4 md:p-6"},Ge={class:"flex flex-wrap gap-2"},Re={key:1},Ue={class:"bg-white shadow-lg rounded-lg overflow-hidden mb-6"},He={class:"p-4 md:p-6"},Xe={class:"text-xl md:text-2xl font-bold text-gray-900 mb-4"},Ye={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 md:gap-6 mb-6"},Qe={class:"flex items-center transform hover:scale-105 transition-transform"},We={class:"w-10 h-10 md:w-12 md:h-12 bg-emerald-100 rounded-full flex items-center justify-center mr-3"},Ze={class:"font-medium text-sm md:text-base"},Je={class:"flex items-center transform hover:scale-105 transition-transform"},et={class:"w-10 h-10 md:w-12 md:h-12 bg-blue-100 rounded-full flex items-center justify-center mr-3"},tt={class:"font-medium text-sm md:text-base truncate max-w-[180px]"},st={class:"flex items-center transform hover:scale-105 transition-transform"},nt={class:"w-10 h-10 md:w-12 md:h-12 bg-purple-100 rounded-full flex items-center justify-center mr-3"},it={class:"font-medium text-sm md:text-base"},lt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},at={class:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto mb-4 sm:mb-0"},rt={class:"text-white font-medium"},ot={key:0,class:"hidden sm:flex items-center gap-2 bg-green-50 px-4 py-2 rounded-lg border border-green-100 shadow-sm"},dt={class:"text-gray-700 text-sm"},ut={key:0,class:"sm:hidden mt-4 flex items-center gap-2 bg-green-50 px-4 py-3 rounded-lg border border-green-100 shadow-sm"},ct={class:"text-gray-700 text-sm"},mt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},gt={class:"lg:col-span-2 space-y-6"},pt={class:"bg-white shadow-lg rounded-lg overflow-hidden transform hover:shadow-xl transition-all duration-300"},vt={class:"p-4 md:p-6"},ft={class:"flex flex-wrap items-center gap-2 mb-4"},xt={class:"text-gray-600 bg-gray-100 px-3 py-1 rounded-full text-xs md:text-sm hover:bg-gray-200 transition-colors"},ht={class:"text-gray-600 bg-gray-100 px-3 py-1 rounded-full text-xs md:text-sm hover:bg-gray-200 transition-colors"},yt={class:"mb-8"},bt={class:"prose text-gray-600 text-sm md:text-base whitespace-pre-line"},_t={class:"mb-8"},wt={class:"prose text-gray-600 text-sm md:text-base whitespace-pre-line"},kt={class:"prose text-gray-600 text-sm md:text-base whitespace-pre-line"},Ct={class:"space-y-6"},Dt={class:"bg-white shadow-lg rounded-lg overflow-hidden transform hover:shadow-xl transition-all duration-300"},Tt={class:"p-4 md:p-6"},It={class:"flex items-center mb-6"},Vt=["src"],jt={class:"ml-3"},Lt={class:"font-bold text-gray-900 text-sm md:text-base"},Pt={key:0},St={class:"space-y-4 text-gray-600 text-sm md:text-base"},$t={class:"flex items-start"},Nt={class:"bg-white shadow-lg rounded-lg overflow-hidden transform hover:shadow-xl transition-all duration-300"},Bt={class:"p-4 md:p-6"},Et={class:"space-y-4"},Ft={class:"flex items-center transform hover:scale-105 transition-transform"},Mt={class:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0"},qt={class:"font-medium text-sm md:text-base"},Kt={class:"flex items-center transform hover:scale-105 transition-transform"},zt={class:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0"},At={class:"font-medium text-sm md:text-base"},Ot={class:"flex items-center transform hover:scale-105 transition-transform"},Gt={class:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0"},Rt={class:"font-medium text-sm md:text-base"},Ut={class:"flex items-center transform hover:scale-105 transition-transform"},Ht={class:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center mr-3 flex-shrink-0"},Xt={class:"font-medium text-sm md:text-base"},Yt={class:"flex items-center gap-1"},Qt={key:0,class:"flex items-center gap-2 bg-blue-50 py-2 px-3 rounded-lg text-blue-700 transform hover:scale-105 transition-all duration-300"},Wt={class:"font-medium"},Zt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center px-4"},Jt={class:"flex items-center justify-between p-4 border-b"},es={class:"text-lg md:text-xl font-bold text-gray-900 pr-6"},ts={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md text-red-700"},ss={class:"flex items-center"},ns={class:"space-y-4"},is={key:0,class:"mt-1 text-sm text-red-500"},ls={key:0,class:"mt-1 text-sm text-red-500"},as={key:0,class:"mt-1 text-sm text-red-500"},rs={key:0,class:"mt-1 text-sm text-red-500"},os={key:0,class:"flex items-center justify-between"},ds={class:"flex items-center"},us={class:"truncate"},cs={class:"font-medium text-gray-900 text-sm md:text-base truncate"},ms={class:"text-xs md:text-sm text-gray-500"},gs={key:1,class:"flex flex-col items-center justify-center"},ps={class:"text-center text-gray-500 text-sm md:text-base"},vs={class:"text-blue-600 cursor-pointer hover:underline"},fs={key:0,class:"mt-1 text-sm text-red-500"},xs={class:"mt-6 flex flex-col-reverse sm:flex-row sm:justify-end gap-2"},hs=["disabled"],ys={key:0,class:"flex items-center justify-center"},bs={key:1},_s={key:1,class:"fixed inset-0 z-50 flex items-center justify-center px-4"},ws={class:"p-4 md:p-6"},ks={class:"flex items-center justify-center mb-4"},Cs={class:"bg-yellow-100 p-3 rounded-full"},Ds={class:"flex flex-col sm:flex-row justify-center gap-2 sm:space-x-4"},Ts={class:"p-4 flex items-center"},Is={class:"flex-1 mr-2"},Vs={key:3,class:"max-w-5xl mx-auto mt-8"},js={class:"text-xl md:text-2xl font-bold text-gray-900 mb-6 flex items-center"},Ls={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6"},Ps={class:"p-4 flex-1"},Ss={key:0,class:"flex justify-end -mt-2 -mr-2 mb-1"},$s={class:"bg-amber-400 text-white text-xs font-semibold px-2 py-0.5 rounded-bl-lg rounded-tr-lg shadow-sm flex items-center"},Ns={class:"flex justify-between items-start"},Bs={class:"flex-1"},Es=["onClick"],Fs=["onClick","title"],Ms={class:"flex items-center mb-2"},qs={class:"relative w-8 h-8"},Ks=["src"],zs={key:0,class:"absolute -right-1 -top-1 w-3 h-3 bg-amber-400 rounded-full border border-white"},As={class:"grid grid-cols-1 gap-2 mb-3"},Os={class:"flex items-center text-sm text-gray-500"},Gs={class:"flex items-center text-sm text-gray-500"},Rs={class:"flex items-center text-sm text-gray-500"},Us={class:"text-xs text-gray-500"},Hs=["onClick"],Xs={key:4,class:"fixed inset-0 z-50 flex items-center justify-center px-4"},Ys={class:"p-4 md:p-6"},Qs={class:"flex items-center justify-center mb-4"},Ws={class:"bg-yellow-100 p-3 rounded-full"},Zs={class:"flex flex-col sm:flex-row justify-center gap-2 sm:space-x-4"},Js={__name:"JobDetail",setup(en){const T=be(),C=_e(),n=y({}),P=y(!0),S=y(!1),V=y(!1),I=y(!1),$=y(!1),D=y(null),F=y(!1),m=we(),{addToast:h}=Ie(),v=ne({name:"",email:"",phone_number:"",description:""}),u=ne({name:"",email:"",phone_number:"",description:"",cv:""}),U=y(""),_=y(""),j=y(!1),w=y("success"),H=s=>{s.target.src="/default-company-logo.png"},M=s=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(s),X=s=>s.is_salary_negotiable?"Thoả thuận":s.salary_min===0&&s.salary_max>0?`Tới ${M(s.salary_max)}`:s.salary_max===0&&s.salary_min>0?`Từ ${M(s.salary_min)}`:s.salary_min>0&&s.salary_max>0?`${M(s.salary_min)} - ${M(s.salary_max)}`:"Thoả thuận",Y=async()=>{try{P.value=!0;const t=await ae().fetchPostById(T.params.id);n.value=t.data.data}catch(s){console.error("Error fetching job details:",s)}finally{P.value=!1}},N=()=>{S.value=!1,Object.keys(v).forEach(s=>{v[s]=""}),Object.keys(u).forEach(s=>{u[s]=""}),D.value=null,$.value=!1,_.value=""},re=s=>{const t=s.target.files[0];t&&Q(t)},oe=s=>{$.value=!1;const t=s.dataTransfer.files[0];t&&Q(t)},Q=s=>{if(u.cv="",!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(s.type)){u.cv="Chỉ chấp nhận file PDF, DOC hoặc DOCX";return}if(s.size>5*1024*1024){u.cv="Kích thước file không được vượt quá 5MB";return}D.value=s},de=()=>{D.value=null},ue=s=>{if(s===0)return"0 Bytes";const t=1024,g=["Bytes","KB","MB","GB"],f=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,f)).toFixed(2))+" "+g[f]},ce=()=>{let s=!0;return Object.keys(u).forEach(t=>{u[t]=""}),v.name.trim()||(u.name="Vui lòng nhập họ và tên",s=!1),v.email.trim()?/^\S+@\S+\.\S+$/.test(v.email)||(u.email="Email không hợp lệ",s=!1):(u.email="Vui lòng nhập email",s=!1),v.phone_number.trim()?/^[0-9]{10}$/.test(v.phone_number.replace(/\s/g,""))||(u.phone_number="Số điện thoại không hợp lệ",s=!1):(u.phone_number="Vui lòng nhập số điện thoại",s=!1),v.description.trim()||(u.description="Vui lòng nhập giới thiệu bản thân",s=!1),D.value||(u.cv="Vui lòng tải lên CV của bạn",s=!1),s},me=async()=>{var s;if(ce())try{F.value=!0,_.value="";const t=new FormData;if(t.append("post",n.value.id),t.append("name",v.name),t.append("email",v.email),t.append("phone_number",v.phone_number),t.append("description",v.description),t.append("cv",D.value),(await Te.post("/api/cv/create/",t,{headers:{"Content-Type":"multipart/form-data"}})).data.status===201){N();const f=new Date,k=new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"}).format(f);n.value={...n.value,latest_application_date:k,total_applicants:n.value.total_applicants!==void 0?n.value.total_applicants+1:void 0,has_applicants:!0},console.log("Đã cập nhật trạng thái ứng tuyển:",n.value.latest_application_date),ve("Ứng tuyển thành công! CV của bạn đã được gửi đến nhà tuyển dụng.","success")}}catch(t){if(console.error("Lỗi khi gửi ứng tuyển:",t),(s=t.response)!=null&&s.data){const g=t.response.data;if(g.message==="Bạn đã đạt giới hạn số lượng ứng tuyển trong ngày")_.value=g.message,N(),I.value=!0;else if(g.errors)if(typeof g.errors=="string")_.value=g.errors;else{const f=g.errors;Object.keys(f).forEach(k=>{u.hasOwnProperty(k)&&(Array.isArray(f[k])?u[k]=f[k][0]:u[k]=f[k])}),_.value=g.message||"Vui lòng kiểm tra lại thông tin đã nhập."}else _.value=g.message||"Đã xảy ra lỗi khi gửi ứng tuyển. Vui lòng thử lại sau."}else _.value="Không thể kết nối tới máy chủ. Vui lòng kiểm tra kết nối mạng và thử lại sau."}finally{F.value=!1}},ge=()=>{if(!m.isLoggedIn){h({title:"Cần đăng nhập",message:"Vui lòng đăng nhập để ứng tuyển công việc này",type:"warning"}),C.push({name:"Login",query:{redirect:T.fullPath}});return}if(!m.isCandidate){h({title:"Không thể ứng tuyển",message:"Chỉ tài khoản ứng viên mới có thể ứng tuyển công việc",type:"error"});return}S.value=!0},pe=()=>{V.value=!1,C.push({name:"Login",query:{redirect:T.fullPath}})},ve=(s,t="success")=>{localStorage.setItem("notification",JSON.stringify({message:s,type:t,timestamp:new Date().getTime()})),U.value=t==="success"?s:"",_.value=t==="error"?s:"",w.value=t,j.value=!0,setTimeout(()=>{j.value=!1},5e3)},W=O(()=>{var s;return!!((s=n.value)!=null&&s.latest_application_date)});O(()=>{var s;return((s=n.value)==null?void 0:s.can_chat_with_employer)===!0}),O(()=>{var s,t;return m.isLoggedIn&&((s=m.userInfo)!=null&&s.is_premium)?!0:((t=n.value)==null?void 0:t.can_view_applicants)===!0});const Z=s=>{if(!s)return"Không xác định";const t=new Date(s);return new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"}).format(t)},A=s=>{let t="Tính năng Premium",g="",f="crown";s==="chat"?(t="Trò chuyện với nhà tuyển dụng",g="Nâng cấp lên gói Premium để có thể trò chuyện trực tiếp với nhà tuyển dụng và tăng cơ hội được nhận việc!",f="comment-dots"):s==="view-applicants"&&(t="Xem số lượng ứng viên",g="Nâng cấp lên gói Premium để xem số lượng người đã ứng tuyển vào vị trí này và đánh giá mức độ cạnh tranh!",f="users"),h({title:t,message:g,type:"premium",icon:f,duration:7e3,action:{text:"Nâng cấp ngay",callback:()=>C.push({name:"CandidatePremium"})}}),setTimeout(()=>{C.push({name:"CandidatePremium"})},3e3)},fe=()=>{var t,g;if(console.log("------------ DEBUG CHAT WITH EMPLOYER ------------"),console.log("Auth status:",{isLoggedIn:m.isLoggedIn,isAuthenticated:m.isAuthenticated,userRole:m.userRole,isCandidate:m.isCandidate,isPremium:(t=m.userInfo)==null?void 0:t.is_premium,token:!!localStorage.getItem("token")}),!m.isLoggedIn){console.error("Không thể chat: Người dùng chưa đăng nhập"),h({title:"Cần đăng nhập",message:"Vui lòng đăng nhập để nhắn tin với nhà tuyển dụng",type:"warning"}),C.push({name:"Login",query:{redirect:T.fullPath}});return}if(!m.isCandidate){console.error("Không thể chat: Người dùng không phải là ứng viên"),h({title:"Không thể nhắn tin",message:"Chỉ tài khoản ứng viên mới có thể nhắn tin với nhà tuyển dụng",type:"error"});return}if(!((g=m.userInfo)!=null&&g.is_premium)){console.error("Không thể chat: Người dùng không phải là Premium"),A("chat");return}if(!n.value){h({title:"Lỗi",message:"Không tìm thấy thông tin công việc",type:"error"});return}let s=null;if(console.log("Thông tin job để nhắn tin:",{id:n.value.id,title:n.value.title,user_id:n.value.user_id,enterprise_id:n.value.enterprise_id,enterprise:n.value.enterprise,enterprise_name:n.value.enterprise_name}),n.value.user_id?(s=n.value.user_id,console.log("Sử dụng user_id:",s)):n.value.enterprise_id?(s=n.value.enterprise_id,console.log("Sử dụng enterprise_id:",s)):n.value.enterprise&&(s=n.value.enterprise,console.log("Sử dụng enterprise:",s)),!s){h({title:"Lỗi",message:"Không tìm thấy thông tin nhà tuyển dụng",type:"error"});return}le.connected||(console.log("Đang khởi tạo kết nối Socket trước khi chuyển trang..."),le.init()),console.log(`Chuyển hướng đến trang nhắn tin với nhà tuyển dụng ID: ${s}`),setTimeout(()=>{C.push({name:"candidate-messages",query:{user:s}}).catch(f=>{console.error("Lỗi chuyển hướng đến trang chat:",f),h({title:"Lỗi chuyển hướng",message:"Không thể mở trang chat, vui lòng thử lại sau",type:"error"})})},300)},xe=async s=>{if(!m.isLoggedIn){h({title:"Cần đăng nhập",message:"Vui lòng đăng nhập để lưu công việc này",type:"warning"}),C.push({name:"Login",query:{redirect:T.fullPath}});return}try{const t=ae();s.is_saved?(await t.deleteSavedPostByPostId(s.id),s.is_saved=!1,h({title:"Đã bỏ lưu",message:"Đã xóa công việc khỏi danh sách đã lưu",type:"success"})):(await t.savePost(s.id),s.is_saved=!0,h({title:"Đã lưu",message:"Đã thêm công việc vào danh sách đã lưu",type:"success"}))}catch(t){console.error("Lỗi khi lưu/bỏ lưu công việc:",t),h({title:"Lỗi",message:"Đã xảy ra lỗi khi thực hiện thao tác",type:"error"})}},he=()=>{I.value=!1,C.push({name:"CandidatePremium"})},J=s=>{if(s===parseInt(T.params.id)){window.scrollTo({top:0,behavior:"smooth"});return}C.push({name:"JobDetail",params:{id:s}})};return ke(()=>T.params.id,(s,t)=>{s!==t&&s&&(console.log(`Job ID changed from ${t} to ${s}, reloading job data...`),P.value=!0,Y(),window.scrollTo({top:0,behavior:"smooth"}))},{immediate:!1}),Ce(()=>{m.fetchUserProfile().then(()=>{var s;console.log("[DEBUG] Thông tin người dùng sau khi tải profile:",m.userInfo),console.log("[DEBUG] Trạng thái premium sau khi tải profile:",(s=m.userInfo)==null?void 0:s.is_premium)}),Y()}),(s,t)=>{var f,k,ee,te;const g=De("router-link");return d(),c("div",Ve,[e("div",je,[P.value?(d(),c("div",Le,[e("div",Pe,[e("div",Se,[t[15]||(t[15]=e("div",{class:"h-8 bg-gray-200 rounded w-full md:w-2/3 mb-4 animate-pulse"},null,-1)),e("div",$e,[(d(),c(B,null,E(3,i=>e("div",{key:i,class:"flex items-center animate-pulse"},t[14]||(t[14]=[e("div",{class:"w-10 h-10 md:w-12 md:h-12 bg-gray-200 rounded-full mr-3"},null,-1),e("div",{class:"flex-1"},[e("div",{class:"h-4 bg-gray-200 rounded w-20 mb-2"}),e("div",{class:"h-5 bg-gray-200 rounded w-32"})],-1)]))),64))]),t[16]||(t[16]=e("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between animate-pulse"},[e("div",{class:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto mb-4 sm:mb-0"},[e("div",{class:"h-10 w-full sm:w-32 bg-gray-200 rounded-lg"}),e("div",{class:"h-10 w-full sm:w-24 bg-gray-200 rounded-lg"})])],-1))])]),e("div",Ne,[e("div",Be,[e("div",Ee,[e("div",Fe,[t[18]||(t[18]=e("div",{class:"flex gap-2 mb-4 animate-pulse"},[e("div",{class:"h-6 w-24 bg-gray-200 rounded-full"}),e("div",{class:"h-6 w-24 bg-gray-200 rounded-full"})],-1)),(d(),c(B,null,E(3,i=>e("div",{key:i,class:"mb-8 animate-pulse"},t[17]||(t[17]=[G('<div class="h-7 bg-gray-200 rounded w-48 mb-4" data-v-f6d46243></div><div class="space-y-2" data-v-f6d46243><div class="h-4 bg-gray-200 rounded w-full" data-v-f6d46243></div><div class="h-4 bg-gray-200 rounded w-5/6" data-v-f6d46243></div><div class="h-4 bg-gray-200 rounded w-4/6" data-v-f6d46243></div></div>',2)]))),64))])])]),e("div",Me,[t[22]||(t[22]=G('<div class="bg-white shadow-lg rounded-lg overflow-hidden" data-v-f6d46243><div class="p-4 md:p-6 animate-pulse" data-v-f6d46243><div class="flex items-center mb-6" data-v-f6d46243><div class="w-16 h-16 bg-gray-200 rounded mr-4" data-v-f6d46243></div><div class="flex-1" data-v-f6d46243><div class="h-5 bg-gray-200 rounded w-3/4 mb-2" data-v-f6d46243></div><div class="h-4 bg-gray-200 rounded w-1/2" data-v-f6d46243></div></div></div><div class="space-y-4" data-v-f6d46243><div class="h-4 bg-gray-200 rounded w-full" data-v-f6d46243></div><div class="h-4 bg-gray-200 rounded w-2/3" data-v-f6d46243></div></div></div></div>',1)),e("div",qe,[e("div",Ke,[t[20]||(t[20]=e("div",{class:"h-6 bg-gray-200 rounded w-40 mb-4 animate-pulse"},null,-1)),e("div",ze,[(d(),c(B,null,E(5,i=>e("div",{key:i,class:"flex items-center animate-pulse"},t[19]||(t[19]=[e("div",{class:"w-10 h-10 bg-gray-200 rounded-full mr-3"},null,-1),e("div",{class:"flex-1"},[e("div",{class:"h-4 bg-gray-200 rounded w-20 mb-1"}),e("div",{class:"h-5 bg-gray-200 rounded w-32"})],-1)]))),64))])])]),e("div",Ae,[e("div",Oe,[t[21]||(t[21]=e("div",{class:"h-6 bg-gray-200 rounded w-40 mb-4 animate-pulse"},null,-1)),e("div",Ge,[(d(),c(B,null,E(5,i=>e("div",{key:i,class:"h-6 bg-gray-200 rounded-full w-24 animate-pulse"})),64))])])])])])])):(d(),c("div",Re,[e("div",Ue,[e("div",He,[e("h1",Xe,a(n.value.title),1),e("div",Ye,[e("div",Qe,[e("div",We,[r(l(o),{icon:"money-bill",class:"text-emerald-500 text-lg md:text-xl"})]),e("div",null,[t[23]||(t[23]=e("div",{class:"text-gray-500 text-xs md:text-sm"},"Mức lương",-1)),e("div",Ze,a(X(n.value)),1)])]),e("div",Je,[e("div",et,[r(l(o),{icon:"map-marker-alt",class:"text-blue-500 text-lg md:text-xl"})]),e("div",null,[t[24]||(t[24]=e("div",{class:"text-gray-500 text-xs md:text-sm"},"Địa điểm",-1)),e("div",tt,a(n.value.city)+a(n.value.district?`, ${n.value.district}`:""),1)])]),e("div",st,[e("div",nt,[r(l(o),{icon:"briefcase",class:"text-purple-500 text-lg md:text-xl"})]),e("div",null,[t[25]||(t[25]=e("div",{class:"text-gray-500 text-xs md:text-sm"},"Kinh nghiệm",-1)),e("div",it,a(n.value.experience),1)])])]),e("div",lt,[e("div",at,[r(R,{text:"Ứng tuyển ngay",variant:"primary",size:"md",class:p(["relative w-full sm:w-auto px-4 md:px-6 py-2.5 md:py-3 flex items-center justify-center gap-2 transform hover:scale-105 transition-all duration-300 shadow-md hover:shadow-lg bg-gradient-to-r from-blue-600 to-indigo-600 rounded-md overflow-hidden",{"animate-pulse-gentle":!l(m).isLoggedIn}]),disabled:W.value,onClick:ge},{default:L(()=>[r(l(o),{icon:"paper-plane",class:"text-white"}),e("span",rt,a(W.value?"Đã ứng tuyển":"Ứng tuyển ngay"),1)]),_:1},8,["class","disabled"]),l(m).isCandidate&&l(m).isLoggedIn&&((f=l(m).userInfo)!=null&&f.is_premium)?(d(),ie(R,{key:0,type:"button",variant:"secondary",size:"md",class:"w-full sm:w-auto px-4 md:px-6 py-2.5 md:py-3 flex items-center justify-center gap-2 transform hover:scale-105 transition-all duration-300 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 hover:border-blue-300 shadow-md hover:shadow-lg",onClick:fe},{default:L(()=>[r(l(o),{icon:"comment-dots",class:"text-blue-600"}),t[26]||(t[26]=e("span",{class:"text-blue-600 font-medium"},"Nhắn tin",-1))]),_:1})):l(m).isCandidate&&l(m).isLoggedIn&&!((k=l(m).userInfo)!=null&&k.is_premium)?(d(),ie(R,{key:1,type:"button",variant:"secondary",size:"md",class:"w-full sm:w-auto px-4 md:px-6 py-2.5 md:py-3 flex items-center justify-center gap-2 transform hover:scale-105 transition-all duration-300 bg-gradient-to-r from-yellow-50 to-amber-50 border border-yellow-200 hover:border-yellow-300 shadow-md hover:shadow-lg",onClick:t[0]||(t[0]=i=>A("chat"))},{default:L(()=>[r(l(o),{icon:"comment-dots",class:"text-yellow-600"}),t[27]||(t[27]=e("span",{class:"text-yellow-600 font-medium"},"Nâng cấp để nhắn tin",-1))]),_:1})):x("",!0)]),l(m).isLoggedIn&&n.value.latest_application_date?(d(),c("div",ot,[r(l(o),{icon:"check-circle",class:"text-green-500"}),e("div",dt,[e("span",null,"Đã ứng tuyển: "+a(n.value.latest_application_date),1),r(g,{to:"/my-applications",class:"text-blue-600 hover:underline ml-2 font-medium"},{default:L(()=>t[28]||(t[28]=[b("Xem CV")])),_:1})])])):x("",!0)]),l(m).isLoggedIn&&n.value.latest_application_date?(d(),c("div",ut,[r(l(o),{icon:"check-circle",class:"text-green-500"}),e("div",ct,[e("span",null,"Đã ứng tuyển: "+a(n.value.latest_application_date),1),r(g,{to:"/my-applications",class:"text-blue-600 hover:underline ml-2 font-medium"},{default:L(()=>t[29]||(t[29]=[b("Xem CV")])),_:1})])])):x("",!0)])]),e("div",mt,[e("div",gt,[e("div",pt,[e("div",vt,[e("div",ft,[e("span",xt,a(n.value.position_name),1),e("span",ht,a(n.value.field_name),1)]),e("section",yt,[t[30]||(t[30]=e("h2",{class:"text-lg md:text-xl font-bold text-gray-900 mb-4"},"Mô tả công việc",-1)),e("div",bt,a(n.value.description),1)]),e("section",_t,[t[31]||(t[31]=e("h2",{class:"text-lg md:text-xl font-bold text-gray-900 mb-4"},"Yêu cầu ứng viên",-1)),e("div",wt,a(n.value.required),1)]),e("section",null,[t[32]||(t[32]=e("h2",{class:"text-lg md:text-xl font-bold text-gray-900 mb-4"},"Quyền lợi",-1)),e("div",kt,a(n.value.interest),1)])])])]),e("div",Ct,[e("div",Dt,[e("div",Tt,[e("div",It,[e("img",{src:n.value.enterprise_logo,alt:"Company logo",class:"w-14 h-14 md:w-16 md:h-16 object-contain bg-white rounded p-1",onError:H},null,40,Vt),e("div",jt,[e("h3",Lt,a(n.value.enterprise_name),1),n.value.is_enterprise_premium?(d(),c("div",Pt,t[33]||(t[33]=[e("span",{class:"inline-flex items-center px-2 py-1 bg-amber-400 text-white rounded-full text-xs font-semibold shadow"},"Pro Company",-1)]))):x("",!0)])]),e("div",St,[e("div",$t,[r(l(o),{icon:"map-marker-alt",class:"w-5 h-5 mr-3 mt-0.5 flex-shrink-0"}),e("span",null,a(n.value.enterprise_address),1)]),r(g,{to:{name:"EnterpriseDetail",params:{id:n.value.enterprise}},class:"text-blue-600 hover:underline flex items-center group"},{default:L(()=>[r(l(o),{icon:"external-link-alt",class:"w-5 h-5 mr-3 transition-transform group-hover:translate-x-1 flex-shrink-0"}),t[34]||(t[34]=b(" Xem trang công ty "))]),_:1},8,["to"])])])]),e("div",Nt,[e("div",Bt,[t[44]||(t[44]=e("h3",{class:"font-bold text-gray-900 mb-4 text-base md:text-lg"},"Thông tin chung",-1)),e("div",Et,[e("div",Ft,[e("div",Mt,[r(l(o),{icon:"graduation-cap",class:"text-emerald-500"})]),e("div",null,[t[35]||(t[35]=e("div",{class:"text-gray-500 text-xs md:text-sm"},"Cấp bậc",-1)),e("div",qt,a(n.value.level),1)])]),e("div",Kt,[e("div",zt,[r(l(o),{icon:"users",class:"text-purple-500"})]),e("div",null,[t[36]||(t[36]=e("div",{class:"text-gray-500 text-xs md:text-sm"},"Số lượng tuyển",-1)),e("div",At,a(n.value.quantity)+" người",1)])]),e("div",Ot,[e("div",Gt,[r(l(o),{icon:"clock",class:"text-orange-500"})]),e("div",null,[t[37]||(t[37]=e("div",{class:"text-gray-500 text-xs md:text-sm"},"Thời gian làm việc",-1)),e("div",Rt,a(n.value.time_working),1)])]),e("div",Ut,[e("div",Ht,[r(l(o),{icon:"briefcase",class:"text-orange-500"})]),e("div",null,[t[38]||(t[38]=e("div",{class:"text-gray-500 text-xs md:text-sm"},"Hình thức làm việc",-1)),e("div",Xt,a(n.value.type_working),1)])]),e("div",Yt,[t[39]||(t[39]=e("i",{class:"fas fa-calendar-alt text-green-500"},null,-1)),e("span",null,"Hạn nộp: "+a(Z(n.value.deadline)),1)]),l(m).isLoggedIn&&((ee=l(m).userInfo)!=null&&ee.is_premium)&&n.value.total_applicants!==void 0?(d(),c("div",Qt,[t[41]||(t[41]=e("i",{class:"fas fa-users text-blue-500"},null,-1)),e("div",null,[e("span",Wt,a(n.value.total_applicants)+" ứng viên",1),t[40]||(t[40]=e("span",{class:"text-sm text-blue-600"}," đã ứng tuyển",-1))]),t[42]||(t[42]=e("i",{class:"fas fa-crown text-yellow-500 ml-1"},null,-1))])):n.value.has_applicants&&!(l(m).isLoggedIn&&((te=l(m).userInfo)!=null&&te.is_premium))?(d(),c("div",{key:1,onClick:t[1]||(t[1]=i=>A("view-applicants")),class:"flex items-center justify-between gap-2 bg-gray-50 border border-gray-200 py-2 px-3 rounded-lg text-gray-700 cursor-pointer hover:bg-yellow-50 transform hover:scale-105 transition-all duration-300"},t[43]||(t[43]=[G('<div class="flex items-center gap-2" data-v-f6d46243><i class="fas fa-lock text-gray-400" data-v-f6d46243></i><div data-v-f6d46243><span class="font-medium" data-v-f6d46243>?? ứng viên</span><span class="text-sm text-gray-500" data-v-f6d46243> đã ứng tuyển</span></div></div><div class="flex items-center gap-1 text-yellow-600 font-medium text-sm" data-v-f6d46243><i class="fas fa-crown text-yellow-500" data-v-f6d46243></i><span data-v-f6d46243>Nâng cấp Premium</span><i class="fas fa-arrow-right text-xs" data-v-f6d46243></i></div>',2)]))):x("",!0)])])])])])]))]),S.value?(d(),c("div",Zt,[e("div",{class:"absolute inset-0 bg-black/50",onClick:N}),e("div",{class:p(["relative bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto transform transition-all duration-300",{"translate-y-0 opacity-100 scale-100":S.value,"translate-y-4 opacity-0 scale-95":!S.value}])},[e("div",Jt,[e("h3",es,"Ứng tuyển vị trí: "+a(n.value.title),1),e("button",{onClick:N,class:"text-gray-400 hover:text-gray-600"},[r(l(o),{icon:"times",class:"text-xl"})])]),e("form",{onSubmit:q(me,["prevent"]),class:"p-4 md:p-6"},[_.value?(d(),c("div",ts,[e("div",ss,[r(l(o),{icon:"exclamation-circle",class:"mr-2 flex-shrink-0"}),e("span",null,a(_.value),1)])])):x("",!0),e("div",ns,[e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[b("Họ và tên "),e("span",{class:"text-red-500"},"*")],-1)),K(e("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>v.name=i),type:"text",required:"",class:p(["w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":u.name}])},null,2),[[z,v.name]]),u.name?(d(),c("p",is,a(u.name),1)):x("",!0)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[b("Email "),e("span",{class:"text-red-500"},"*")],-1)),K(e("input",{"onUpdate:modelValue":t[3]||(t[3]=i=>v.email=i),type:"email",required:"",class:p(["w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":u.email}])},null,2),[[z,v.email]]),u.email?(d(),c("p",ls,a(u.email),1)):x("",!0)]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[b("Số điện thoại "),e("span",{class:"text-red-500"},"*")],-1)),K(e("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>v.phone_number=i),type:"tel",required:"",class:p(["w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":u.phone_number}])},null,2),[[z,v.phone_number]]),u.phone_number?(d(),c("p",as,a(u.phone_number),1)):x("",!0)]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[b("Giới thiệu bản thân "),e("span",{class:"text-red-500"},"*")],-1)),K(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=i=>v.description=i),rows:"3",required:"",class:p(["w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":u.description}]),placeholder:"Giới thiệu ngắn gọn về bản thân bạn, kinh nghiệm và lý do muốn ứng tuyển vị trí này..."},null,2),[[z,v.description]]),u.description?(d(),c("p",rs,a(u.description),1)):x("",!0)]),e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[b("CV của bạn "),e("span",{class:"text-red-500"},"*")],-1)),e("div",{class:p(["relative border-2 border-dashed border-gray-300 rounded-lg p-4 md:p-6 transition-all",{"border-blue-500 bg-blue-50":$.value,"border-red-300":u.cv}]),onDragover:t[6]||(t[6]=q(i=>$.value=!0,["prevent"])),onDragleave:t[7]||(t[7]=q(i=>$.value=!1,["prevent"])),onDrop:q(oe,["prevent"])},[D.value?(d(),c("div",os,[e("div",ds,[r(l(o),{icon:"file-pdf",class:"text-red-500 text-xl mr-3 flex-shrink-0"}),e("div",us,[e("p",cs,a(D.value.name),1),e("p",ms,a(ue(D.value.size)),1)])]),e("button",{type:"button",onClick:de,class:"text-gray-400 hover:text-red-500 ml-2 flex-shrink-0"},[r(l(o),{icon:"times"})])])):(d(),c("div",gs,[r(l(o),{icon:"cloud-upload-alt",class:"text-gray-400 text-2xl md:text-3xl mb-3"}),e("p",ps,[t[50]||(t[50]=b("Kéo thả file CV của bạn vào đây hoặc ")),e("label",vs,[t[49]||(t[49]=b(" tải lên từ máy tính ")),e("input",{type:"file",class:"hidden",onChange:re,accept:".pdf,.doc,.docx"},null,32)])]),t[51]||(t[51]=e("p",{class:"text-xs md:text-sm text-gray-400 mt-1"},"Chấp nhận PDF, DOCX (Tối đa 5MB)",-1))]))],34),u.cv?(d(),c("p",fs,a(u.cv),1)):x("",!0)])]),e("div",xs,[e("button",{type:"button",onClick:N,class:"px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"}," Hủy "),e("button",{type:"submit",class:"px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed mb-2 sm:mb-0",disabled:F.value},[F.value?(d(),c("span",ys,[r(l(o),{icon:"circle-notch",class:"fa-spin mr-2"}),t[53]||(t[53]=b(" Đang gửi... "))])):(d(),c("span",bs,"Gửi ứng tuyển"))],8,hs)])],32)],2)])):x("",!0),V.value?(d(),c("div",_s,[e("div",{class:"absolute inset-0 bg-black/50",onClick:t[8]||(t[8]=i=>V.value=!1)}),e("div",{class:p(["relative bg-white rounded-lg shadow-xl w-full max-w-md transform transition-all duration-300",{"translate-y-0 opacity-100 scale-100":V.value,"translate-y-4 opacity-0 scale-95":!V.value}])},[e("div",ws,[e("div",ks,[e("div",Cs,[r(l(o),{icon:"exclamation-triangle",class:"text-yellow-500 text-xl md:text-2xl"})])]),t[54]||(t[54]=e("h3",{class:"text-lg font-medium text-center text-gray-900 mb-2"},"Yêu cầu đăng nhập",-1)),t[55]||(t[55]=e("p",{class:"text-gray-500 text-center mb-6"},"Bạn cần đăng nhập để có thể ứng tuyển vào vị trí này",-1)),e("div",Ds,[e("button",{onClick:t[9]||(t[9]=i=>V.value=!1),class:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 order-2 sm:order-1"}," Để sau "),e("button",{onClick:pe,class:"px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 order-1 sm:order-2 mb-2 sm:mb-0"}," Đăng nhập ngay ")])])],2)])):x("",!0),j.value?(d(),c("div",{key:2,class:p(["fixed bottom-4 right-4 z-50 max-w-md w-full sm:w-auto shadow-xl rounded-lg overflow-hidden transform transition-all duration-300",{"translate-y-0 opacity-100":j.value,"translate-y-4 opacity-0":!j.value,"bg-green-50 border border-green-200":w.value==="success","bg-red-50 border border-red-200":w.value==="error"}])},[e("div",Ts,[e("div",{class:p(["flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center mr-3",{"bg-green-100":w.value==="success","bg-red-100":w.value==="error"}])},[r(l(o),{icon:w.value==="success"?"check-circle":"exclamation-circle",class:p({"text-green-500":w.value==="success","text-red-500":w.value==="error"})},null,8,["icon","class"])],2),e("div",Is,[e("p",{class:p(["font-medium text-sm",{"text-green-800":w.value==="success","text-red-800":w.value==="error"}])},a(w.value==="success"?U.value:_.value),3)]),e("button",{onClick:t[10]||(t[10]=i=>j.value=!1),class:"flex-shrink-0 text-gray-400 hover:text-gray-600"},[r(l(o),{icon:"times"})])])],2)):x("",!0),e("button",{onClick:t[11]||(t[11]=i=>s.$router.go(-1)),class:"fixed bottom-6 left-6 z-30 bg-white shadow-lg rounded-full p-3 hover:shadow-xl transition-all duration-300 focus:outline-none","aria-label":"Quay lại"},[r(l(o),{icon:"arrow-left",class:"text-gray-600"})]),!P.value&&n.value.related_posts&&n.value.related_posts.length>0?(d(),c("div",Vs,[e("h2",js,[r(l(o),{icon:"briefcase",class:"text-blue-500 mr-2"}),t[56]||(t[56]=e("span",null,"Việc làm liên quan",-1))]),e("div",Ls,[(d(!0),c(B,null,E(n.value.related_posts,i=>(d(),c("div",{key:i.id,class:p(["bg-white shadow-md hover:shadow-lg rounded-lg overflow-hidden transition-all duration-300 flex flex-col",{"border-2 border-amber-400 shadow-amber-200":i.is_enterprise_premium}])},[e("div",Ps,[i.is_enterprise_premium?(d(),c("div",Ss,[e("span",$s,[r(l(o),{icon:"crown",class:"mr-1"}),t[57]||(t[57]=b(" Premium "))])])):x("",!0),e("div",Ns,[e("div",Bs,[e("h3",{onClick:se=>J(i.id),class:"font-bold text-gray-900 mb-2 hover:text-blue-600 transition-colors line-clamp-2 cursor-pointer"},a(i.title),9,Es)]),e("div",null,[e("button",{onClick:se=>xe(i),class:"text-lg focus:outline-none transition-colors duration-300",title:i.is_saved?"Bỏ lưu":"Lưu tin tuyển dụng"},[r(l(o),{icon:["fas","heart"],class:p(i.is_saved?"text-red-500":"text-gray-300 hover:text-red-500")},null,8,["class"])],8,Fs)])]),e("div",Ms,[e("div",qs,[e("img",{src:i.enterprise_logo,alt:"Company logo",class:p(["w-8 h-8 object-contain rounded-full mr-2",{"border border-amber-400":i.is_enterprise_premium}]),onError:H},null,42,Ks),i.is_enterprise_premium?(d(),c("span",zs)):x("",!0)]),e("p",{class:p(["text-gray-700 text-sm font-medium ml-2",{"text-amber-700":i.is_enterprise_premium}])},a(i.enterprise_name),3)]),e("div",As,[e("div",Os,[r(l(o),{icon:"map-marker-alt",class:"mr-2 text-gray-400"}),e("span",null,a(i.city),1)]),e("div",Gs,[r(l(o),{icon:"briefcase",class:"mr-2 text-gray-400"}),e("span",null,a(i.experience),1)]),e("div",Rs,[r(l(o),{icon:"business-time",class:"mr-2 text-gray-400"}),e("span",null,a(i.type_working),1)]),e("div",{class:p(["flex items-center text-sm",{"text-amber-600 font-medium":i.is_enterprise_premium,"text-gray-500":!i.is_enterprise_premium}])},[r(l(o),{icon:"money-bill-wave",class:p(["mr-2",{"text-amber-500":i.is_enterprise_premium,"text-gray-400":!i.is_enterprise_premium}])},null,8,["class"]),e("span",null,a(X(i)),1)],2)]),e("div",{class:p(["flex justify-between items-center mt-auto pt-2 border-t",{"border-amber-100":i.is_enterprise_premium,"border-gray-100":!i.is_enterprise_premium}])},[e("div",Us,[r(l(o),{icon:"calendar-alt",class:"mr-1"}),e("span",null,"Hạn: "+a(Z(i.deadline)),1)]),e("button",{onClick:se=>J(i.id),class:p(["text-sm font-medium flex items-center",{"text-amber-600 hover:text-amber-800":i.is_enterprise_premium,"text-blue-600 hover:text-blue-800":!i.is_enterprise_premium}])},[t[58]||(t[58]=e("span",null,"Xem chi tiết",-1)),r(l(o),{icon:"arrow-right",class:"ml-1"})],10,Hs)],2)])],2))),128))])])):x("",!0),I.value?(d(),c("div",Xs,[e("div",{class:"absolute inset-0 bg-black/50",onClick:t[12]||(t[12]=i=>I.value=!1)}),e("div",{class:p(["relative bg-white rounded-lg shadow-xl w-full max-w-md transform transition-all duration-300",{"translate-y-0 opacity-100 scale-100":I.value,"translate-y-4 opacity-0 scale-95":!I.value}])},[e("div",Ys,[e("div",Qs,[e("div",Ws,[r(l(o),{icon:"exclamation-triangle",class:"text-yellow-500 text-xl md:text-2xl"})])]),t[59]||(t[59]=e("h3",{class:"text-lg font-medium text-center text-gray-900 mb-2"},"Giới hạn ứng tuyển",-1)),t[60]||(t[60]=e("p",{class:"text-gray-500 text-center mb-6"},"Bạn đã đạt giới hạn số lượng ứng tuyển trong ngày. Vui lòng thử lại vào ngày mai hoặc nâng cấp tài khoản Premium để ứng tuyển không giới hạn.",-1)),e("div",Zs,[e("button",{onClick:t[13]||(t[13]=i=>I.value=!1),class:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 order-2 sm:order-1"}," Để sau "),e("button",{onClick:he,class:"px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 order-1 sm:order-2 mb-2 sm:mb-0"}," Nâng cấp ngay ")])])],2)])):x("",!0)])}}},an=ye(Js,[["__scopeId","data-v-f6d46243"]]);export{an as default};
