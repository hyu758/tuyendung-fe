import{_ as z,y as M,k as c,D as q,E as B,o as L,z as U,G as D,r as $,c as o,a as n,e as t,d as F,f as x,n as _,s as g,v as H,x as y,b as P,q as b,t as r,F as C,i as j,l as I,w as K}from"./index-DjN2xGKQ.js";import{l as G}from"./lodash-DjxWLlCR.js";const A={class:"min-h-screen bg-gray-50 py-8"},Q={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Y={class:"bg-white rounded-xl shadow-sm p-6 mb-8 hover:shadow-md transition-shadow"},W={class:"lg:hidden mb-4"},X={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5"},J={class:"relative"},O={class:"relative"},R={class:"relative"},Z={class:"relative"},tt={class:"mt-6 flex flex-col-reverse sm:flex-row gap-3 justify-end"},et={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6"},st={class:"text-gray-600 mb-3 sm:mb-0"},lt={key:0},at={key:1},nt={key:2,class:"font-medium"},ot={class:"flex items-center"},it={class:"relative"},rt={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},dt={key:1,class:"bg-white rounded-xl shadow-sm p-10 text-center"},ut={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ct={class:"p-6 flex flex-col flex-grow"},gt={class:"flex items-center mb-4"},vt={class:"h-16 w-16 rounded-lg overflow-hidden bg-gray-100 flex items-center justify-center"},mt=["src","alt"],ft={key:1,class:"h-full w-full flex items-center justify-center text-gray-400"},pt={class:"ml-4"},xt={class:"text-lg font-medium text-gray-900 line-clamp-1 group-hover:text-blue-600"},yt={class:"flex items-center mt-1"},bt={class:"text-sm text-gray-600"},ht={class:"mb-4 flex-grow"},wt={class:"text-sm text-gray-600 line-clamp-3"},kt={class:"grid grid-cols-2 gap-4"},_t={class:"flex items-center"},Pt={class:"ml-2 text-sm text-gray-600 truncate"},Ct={class:"flex items-center"},jt={class:"ml-2 text-sm text-gray-600 truncate"},Tt={key:3,class:"mt-10 flex justify-center"},St={class:"flex items-center space-x-2","aria-label":"Pagination"},Et=["disabled"],Vt={class:"flex items-center space-x-2"},Nt=["onClick"],zt=["disabled"],Mt={__name:"EnterpriseList",setup(qt){const V=M(),v=c(!0),m=c([]),f=c(!0),T=c(!1),i=c({currentPage:1,totalPages:1,totalItems:0,pageSize:10}),l=q({q:"",city:"",field:"",scale:"",page:1,pageSize:10,sortBy:"created_at"}),N=B(()=>{const a=i.value.totalPages,e=i.value.currentPage;if(a<=5)return Array.from({length:a},(E,k)=>k+1);let d=Math.max(e-2,1),s=Math.min(d+4,a);return s===a&&(d=Math.max(s-4,1)),Array.from({length:s-d+1},(E,k)=>d+k)}),p=async()=>{try{v.value=!0;const a=await V.searchEnterprises(l);a.success&&(m.value=a.data.data.results,i.value={currentPage:a.data.data.page,totalPages:a.data.data.total_pages,totalItems:a.data.data.total,pageSize:a.data.data.page_size})}catch(a){console.error("Error loading enterprises:",a)}finally{v.value=!1}},u=G.debounce(()=>{l.page=1,p()},300),S=()=>{l.q="",l.city="",l.field="",l.scale="",l.page=1,l.sortBy="created_at",p()},h=a=>{a>=1&&a<=i.value.totalPages&&(l.page=a,p(),window.scrollTo({top:document.querySelector(".grid").offsetTop-100,behavior:"smooth"}))},w=()=>{T.value=window.innerWidth<1024};return L(()=>{w(),window.addEventListener("resize",w),p()}),U(()=>{window.removeEventListener("resize",w)}),D([()=>l.city,()=>l.field,()=>l.scale],u),(a,e)=>{const d=$("router-link");return n(),o("div",A,[t("div",Q,[e[42]||(e[42]=t("div",{class:"mb-8"},[t("h1",{class:"text-2xl md:text-3xl font-bold text-gray-900 mb-2"},"Danh sách công ty"),t("p",{class:"text-sm md:text-base text-gray-600"},"Khám phá và tìm hiểu về các công ty đang hoạt động trên hệ thống")],-1)),t("div",Y,[t("div",W,[t("button",{onClick:e[0]||(e[0]=s=>f.value=!f.value),class:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[e[10]||(e[10]=t("span",{class:"flex items-center font-medium text-gray-800"},[t("i",{class:"fas fa-filter text-blue-500 mr-2"}),x(" Bộ lọc tìm kiếm ")],-1)),t("i",{class:_(["fas",f.value?"fa-chevron-up":"fa-chevron-down"])},null,2)])]),t("div",{class:_([{hidden:!f.value&&T.value},"lg:block"])},[t("div",X,[t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},"Từ khóa tìm kiếm",-1)),t("div",J,[g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.q=s),type:"text",class:"block w-full border border-gray-300 rounded-lg pl-10 pr-3 py-2.5 text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tên công ty..."},null,512),[[H,l.q]]),e[11]||(e[11]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("i",{class:"fas fa-search text-gray-400"})],-1))])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},"Thành phố",-1)),t("div",O,[g(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.city=s),class:"block w-full border border-gray-300 rounded-lg py-2.5 pl-10 pr-10 text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},e[13]||(e[13]=[t("option",{value:""},"Tất cả thành phố",-1),t("option",{value:"Hà Nội"},"Hà Nội",-1),t("option",{value:"Hồ Chí Minh"},"Hồ Chí Minh",-1),t("option",{value:"Đà Nẵng"},"Đà Nẵng",-1)]),512),[[y,l.city]]),e[14]||(e[14]=t("div",{class:"absolute inset-y-0 left-3 flex items-center pointer-events-none"},[t("i",{class:"fas fa-map-marker-alt text-gray-400"})],-1)),e[15]||(e[15]=t("div",{class:"absolute inset-y-0 right-3 flex items-center pointer-events-none"},[t("i",{class:"fas fa-chevron-down text-gray-400 text-xs"})],-1))])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},"Lĩnh vực hoạt động",-1)),t("div",R,[g(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.field=s),class:"block w-full border border-gray-300 rounded-lg py-2.5 pl-10 pr-10 text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},e[17]||(e[17]=[P('<option value="" data-v-4c543033>Tất cả lĩnh vực</option><option value="Công nghệ thông tin" data-v-4c543033>Công nghệ thông tin</option><option value="Tài chính - Ngân hàng" data-v-4c543033>Tài chính - Ngân hàng</option><option value="Giáo dục" data-v-4c543033>Giáo dục</option><option value="Y tế" data-v-4c543033>Y tế</option>',5)]),512),[[y,l.field]]),e[18]||(e[18]=t("div",{class:"absolute inset-y-0 left-3 flex items-center pointer-events-none"},[t("i",{class:"fas fa-industry text-gray-400"})],-1)),e[19]||(e[19]=t("div",{class:"absolute inset-y-0 right-3 flex items-center pointer-events-none"},[t("i",{class:"fas fa-chevron-down text-gray-400 text-xs"})],-1))])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},"Quy mô",-1)),t("div",Z,[g(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>l.scale=s),class:"block w-full border border-gray-300 rounded-lg py-2.5 pl-10 pr-10 text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},e[21]||(e[21]=[P('<option value="" data-v-4c543033>Tất cả quy mô</option><option value="1-50" data-v-4c543033>1-50 nhân viên</option><option value="51-150" data-v-4c543033>51-150 nhân viên</option><option value="151-300" data-v-4c543033>151-300 nhân viên</option><option value="301-500" data-v-4c543033>301-500 nhân viên</option><option value="501-1000" data-v-4c543033>501-1000 nhân viên</option><option value="1000+" data-v-4c543033>Trên 1000 nhân viên</option>',7)]),512),[[y,l.scale]]),e[22]||(e[22]=t("div",{class:"absolute inset-y-0 left-3 flex items-center pointer-events-none"},[t("i",{class:"fas fa-users text-gray-400"})],-1)),e[23]||(e[23]=t("div",{class:"absolute inset-y-0 right-3 flex items-center pointer-events-none"},[t("i",{class:"fas fa-chevron-down text-gray-400 text-xs"})],-1))])])]),t("div",tt,[t("button",{onClick:S,class:"px-4 py-2.5 border border-gray-300 rounded-lg text-gray-700 text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all flex items-center justify-center"},e[25]||(e[25]=[t("i",{class:"fas fa-redo-alt mr-2"},null,-1),x(" Đặt lại ")])),t("button",{onClick:e[5]||(e[5]=(...s)=>b(u)&&b(u)(...s)),class:"px-6 py-2.5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all flex items-center justify-center"},e[26]||(e[26]=[t("i",{class:"fas fa-search mr-2"},null,-1),x(" Tìm kiếm ")]))])],2)]),t("div",et,[t("div",st,[v.value?(n(),o("span",lt,"Đang tải...")):m.value.length===0?(n(),o("span",at,"Không tìm thấy kết quả")):(n(),o("span",nt,r(i.value.totalItems)+" công ty",1))]),t("div",ot,[e[29]||(e[29]=t("label",{for:"sort",class:"mr-2 text-sm text-gray-600"},"Sắp xếp:",-1)),t("div",it,[g(t("select",{id:"sort","onUpdate:modelValue":e[6]||(e[6]=s=>l.sortBy=s),class:"pl-3 pr-8 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none cursor-pointer bg-white transition-all",onChange:e[7]||(e[7]=(...s)=>b(u)&&b(u)(...s))},e[27]||(e[27]=[t("option",{value:"created_at"},"Mới nhất",-1),t("option",{value:"name"},"Tên công ty",-1),t("option",{value:"size"},"Quy mô",-1)]),544),[[y,l.sortBy]]),e[28]||(e[28]=t("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[t("i",{class:"fas fa-chevron-down text-xs"})],-1))])])]),v.value?(n(),o("div",rt,[(n(),o(C,null,j(9,s=>t("div",{key:`skeleton-${s}`,class:"bg-white rounded-xl shadow-sm p-6 transition-all"},e[30]||(e[30]=[P('<div class="flex items-center mb-4" data-v-4c543033><div class="h-16 w-16 rounded-lg bg-gray-200 animate-pulse" data-v-4c543033></div><div class="ml-4 flex-1" data-v-4c543033><div class="h-5 bg-gray-200 rounded w-3/4 animate-pulse" data-v-4c543033></div><div class="h-4 bg-gray-200 rounded w-1/2 mt-2 animate-pulse" data-v-4c543033></div></div></div><div class="space-y-2 mb-6" data-v-4c543033><div class="h-4 bg-gray-200 rounded w-full animate-pulse" data-v-4c543033></div><div class="h-4 bg-gray-200 rounded w-full animate-pulse" data-v-4c543033></div><div class="h-4 bg-gray-200 rounded w-2/3 animate-pulse" data-v-4c543033></div></div><div class="grid grid-cols-2 gap-3" data-v-4c543033><div class="flex items-center" data-v-4c543033><div class="w-6 h-6 rounded-full bg-gray-200 mr-2 animate-pulse" data-v-4c543033></div><div class="h-4 bg-gray-200 rounded flex-1 animate-pulse" data-v-4c543033></div></div><div class="flex items-center" data-v-4c543033><div class="w-6 h-6 rounded-full bg-gray-200 mr-2 animate-pulse" data-v-4c543033></div><div class="h-4 bg-gray-200 rounded flex-1 animate-pulse" data-v-4c543033></div></div></div>',3)]))),64))])):m.value.length===0?(n(),o("div",dt,[e[32]||(e[32]=t("div",{class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 text-gray-400 mb-4"},[t("i",{class:"fas fa-building text-3xl"})],-1)),e[33]||(e[33]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Không tìm thấy công ty nào",-1)),e[34]||(e[34]=t("p",{class:"mt-1 text-sm text-gray-500 max-w-md mx-auto"},"Không có kết quả phù hợp với tiêu chí tìm kiếm của bạn. Vui lòng thử lại với các bộ lọc khác.",-1)),t("button",{onClick:S,class:"mt-4 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all inline-flex items-center"},e[31]||(e[31]=[t("i",{class:"fas fa-redo-alt mr-2"},null,-1),x(" Đặt lại bộ lọc ")]))])):(n(),o("div",ut,[(n(!0),o(C,null,j(m.value,s=>(n(),I(d,{key:s.id,to:{name:"EnterpriseDetail",params:{id:s.id}},class:"bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-all hover:-translate-y-1 border border-gray-100 flex flex-col h-full"},{default:K(()=>[t("div",ct,[t("div",gt,[t("div",vt,[s.logo_url?(n(),o("img",{key:0,src:s.logo_url,alt:s.company_name,class:"h-full w-full object-contain"},null,8,mt)):(n(),o("div",ft,e[35]||(e[35]=[t("i",{class:"fas fa-building text-2xl"},null,-1)])))]),t("div",pt,[t("h3",xt,r(s.company_name),1),t("div",yt,[e[36]||(e[36]=t("i",{class:"fas fa-map-marker-alt text-red-500 mr-1 text-sm"},null,-1)),t("p",bt,r(s.city||"Chưa cập nhật"),1)])])]),t("div",ht,[t("p",wt,r(s.description||"Chưa có mô tả về công ty"),1)]),t("div",kt,[t("div",_t,[e[37]||(e[37]=t("div",{class:"w-8 h-8 rounded-full bg-blue-50 flex items-center justify-center flex-shrink-0"},[t("i",{class:"fas fa-users text-blue-500"})],-1)),t("span",Pt,r(s.scale||"Chưa cập nhật"),1)]),t("div",Ct,[e[38]||(e[38]=t("div",{class:"w-8 h-8 rounded-full bg-purple-50 flex items-center justify-center flex-shrink-0"},[t("i",{class:"fas fa-industry text-purple-500"})],-1)),t("span",jt,r(s.field_of_activity||"Chưa cập nhật"),1)])])]),e[39]||(e[39]=t("div",{class:"px-6 py-3 bg-gray-50 flex justify-between items-center"},[t("span",{class:"text-sm text-blue-600 font-medium"},"Xem thông tin"),t("i",{class:"fas fa-arrow-right text-blue-600"})],-1))]),_:2},1032,["to"]))),128))])),i.value.totalPages>1?(n(),o("div",Tt,[t("nav",St,[t("button",{onClick:e[8]||(e[8]=s=>h(i.value.currentPage-1)),disabled:i.value.currentPage===1,class:"flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 bg-white text-gray-500 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},e[40]||(e[40]=[t("span",{class:"sr-only"},"Previous",-1),t("i",{class:"fas fa-chevron-left"},null,-1)]),8,Et),t("div",Vt,[(n(!0),o(C,null,j(N.value,s=>(n(),o("button",{key:s,onClick:E=>h(s),class:_(["flex items-center justify-center w-10 h-10 rounded-lg transition-colors",s===i.value.currentPage?"bg-blue-600 text-white":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50"])},r(s),11,Nt))),128))]),t("button",{onClick:e[9]||(e[9]=s=>h(i.value.currentPage+1)),disabled:i.value.currentPage===i.value.totalPages,class:"flex items-center justify-center w-10 h-10 rounded-lg border border-gray-300 bg-white text-gray-500 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},e[41]||(e[41]=[t("span",{class:"sr-only"},"Next",-1),t("i",{class:"fas fa-chevron-right"},null,-1)]),8,zt)])])):F("",!0)])])}}},Ut=z(Mt,[["__scopeId","data-v-4c543033"]]);export{Ut as default};
