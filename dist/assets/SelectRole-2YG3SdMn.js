import{_ as f,u as m,h as w,j as g,k as x,c as u,o as l,d as e,a as c,s as y,b as v,z as k,n as p,C,W as j}from"./index-eX7GvIIN.js";const S={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-50 py-6 px-4 sm:px-6 lg:px-8"},_={class:"max-w-xl w-full space-y-8 bg-white rounded-2xl shadow-xl p-8 sm:p-10 transition-all duration-300"},B={class:"mt-8 grid grid-cols-1 gap-6"},R={class:"relative p-6 flex items-center"},M={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-80"},N={class:"relative p-6 flex items-center"},V={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-80"},z={__name:"SelectRole",setup(E){const n=m(),s=w(),o=g(null),a=g(null);x(()=>{s.isAuthenticated?s.userRole&&s.userRole!=="none"&&n.push("/"):n.push("/login")});async function h(r){var t,i;o.value=r,a.value=null;try{if(console.log("[SelectRole] Đang đặt role thành:",r),(await C.post("/api/set-role/",{role:r})).data.status===200){localStorage.setItem("notification",JSON.stringify({type:"success",message:"Cập nhật vai trò thành công",show:!0}));try{if(await s.refreshToken(),s.token)await s.updateUserFromToken(),setTimeout(()=>{n.push("/")},500);else throw new Error("Refresh token không trả về access token mới")}catch(b){console.error("[SelectRole] Lỗi khi refresh token:",b),s.setUserRole(r),localStorage.setItem("notification",JSON.stringify({type:"warning",message:"Đã cập nhật vai trò, nhưng có lỗi khi làm mới phiên đăng nhập. Bạn có thể cần đăng nhập lại.",show:!0})),setTimeout(()=>{n.push("/")},500)}}else throw new Error("Không thể cập nhật vai trò")}catch(d){console.error("Error setting role:",d),a.value=((i=(t=d.response)==null?void 0:t.data)==null?void 0:i.detail)||"Có lỗi xảy ra khi chọn vai trò. Vui lòng thử lại."}finally{o.value=null}}return(r,t)=>(l(),u("div",S,[e("div",_,[t[8]||(t[8]=c('<div class="text-center" data-v-b8f4b494><div class="flex justify-center mb-4" data-v-b8f4b494><img src="'+j+'" alt="JobHub Logo" class="h-20 mx-auto" data-v-b8f4b494></div><h2 class="text-3xl font-extrabold text-indigo-900 tracking-tight" data-v-b8f4b494> Chọn vai trò của bạn </h2><p class="mt-3 text-base text-gray-600" data-v-b8f4b494> Vui lòng cho chúng tôi biết bạn muốn sử dụng <span class="text-indigo-600 font-medium" data-v-b8f4b494>JobHub</span> với vai trò nào. </p></div>',1)),a.value?(l(),y(k,{key:0,variant:"error",message:a.value,show:!!a.value,class:"mt-4"},null,8,["message","show"])):v("",!0),e("div",B,[e("div",{class:p(["group relative rounded-xl shadow-md bg-white overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer",{"opacity-70 pointer-events-none":o.value&&o.value!=="employer"}]),onClick:t[0]||(t[0]=i=>h("employer"))},[t[4]||(t[4]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),e("div",R,[t[3]||(t[3]=c('<div class="w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center mr-4 group-hover:bg-white transition-colors duration-300" data-v-b8f4b494><svg class="h-8 w-8 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-b8f4b494><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-b8f4b494></path></svg></div><div class="flex-1" data-v-b8f4b494><h3 class="text-xl font-bold text-gray-800 group-hover:text-white transition-colors duration-300" data-v-b8f4b494>Nhà tuyển dụng</h3><p class="text-gray-600 group-hover:text-blue-100 transition-colors duration-300" data-v-b8f4b494>Đăng tin tuyển dụng và tìm kiếm ứng viên phù hợp</p></div><div class="ml-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300" data-v-b8f4b494><svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-b8f4b494><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-b8f4b494></path></svg></div>',3)),o.value==="employer"?(l(),u("div",M,t[2]||(t[2]=[e("div",{class:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-600"},null,-1)]))):v("",!0)])],2),e("div",{class:p(["group relative rounded-xl shadow-md bg-white overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer",{"opacity-70 pointer-events-none":o.value&&o.value!=="candidate"}]),onClick:t[1]||(t[1]=i=>h("candidate"))},[t[7]||(t[7]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-green-500 to-emerald-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),e("div",N,[t[6]||(t[6]=c('<div class="w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mr-4 group-hover:bg-white transition-colors duration-300" data-v-b8f4b494><svg class="h-8 w-8 text-green-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-b8f4b494><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" data-v-b8f4b494></path></svg></div><div class="flex-1" data-v-b8f4b494><h3 class="text-xl font-bold text-gray-800 group-hover:text-white transition-colors duration-300" data-v-b8f4b494>Người tìm việc</h3><p class="text-gray-600 group-hover:text-green-100 transition-colors duration-300" data-v-b8f4b494>Tìm kiếm công việc và cơ hội nghề nghiệp phù hợp</p></div><div class="ml-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300" data-v-b8f4b494><svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-b8f4b494><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-b8f4b494></path></svg></div>',3)),o.value==="candidate"?(l(),u("div",V,t[5]||(t[5]=[e("div",{class:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-green-600"},null,-1)]))):v("",!0)])],2)]),t[9]||(t[9]=e("div",{class:"mt-4 text-center text-sm text-gray-500"},[e("p",null,"Bạn có thể thay đổi vai trò của mình sau bằng cách liên hệ với quản trị viên hệ thống")],-1))])]))}},J=f(z,[["__scopeId","data-v-b8f4b494"]]);export{J as default};
