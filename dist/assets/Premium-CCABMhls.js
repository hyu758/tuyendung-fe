import{_,c as o,a as r,e as t,d as i,b as y,f as c,t as a,F as v,h as w,n as P,J as S,i as B,B as N,j as g,o as C,R as M}from"./index-CV7pDqKO.js";const j={name:"PremiumPage",setup(){const d=S(),e=B(),x=N(),s=g(!1),p=g(null),h=g(!1),n=g(!1),u=()=>{x.query.status==="success"?(h.value=!0,e.updateUserFromToken()):x.query.status==="failed"&&(n.value=!0)},b=async l=>{if(!s.value){p.value=l,s.value=!0;try{const m=await d.purchasePremium(l);m.success&&m.paymentUrl?window.location.href=m.paymentUrl:console.error("Không thể tạo URL thanh toán")}catch(m){console.error("Lỗi khi mua gói Premium:",m)}finally{s.value=!1}}},f=l=>new Intl.NumberFormat("vi-VN").format(l),k=l=>{if(!l)return"Không xác định";const m=new Date(l);return new Intl.DateTimeFormat("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(m)};return C(async()=>{d.isPremium&&d.isPremiumExpired&&(console.log("Premium page - Premium đã hết hạn, đang hủy Premium..."),await d.cancelPremium()),await d.fetchPremiumPackages(),u()}),M(()=>{d.reset()}),{premiumStore:d,isBuying:s,selectedPackageId:p,showSuccessModal:h,showFailedModal:n,handlePurchase:b,formatPrice:f,formatDate:k}}},V={class:"premium-page"},T={class:"container mx-auto px-4 py-8"},D={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-6 mb-8 text-center"},F={class:"text-green-700"},L={key:1,class:"text-center py-8"},z={key:2,class:"bg-red-50 text-red-700 p-4 rounded-lg mb-8"},U={key:3,class:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto"},H={class:"bg-gradient-to-r from-blue-500 to-purple-600 py-6 px-6"},q={class:"text-2xl font-bold text-white"},E={class:"text-white text-opacity-90 mt-1"},I={class:"p-6"},A={class:"flex items-baseline mb-6"},G={class:"text-3xl font-bold text-gray-900"},K={class:"mb-8 space-y-4"},R=["onClick","disabled"],J={key:0},O={key:1},Y={key:2},Q={key:4,class:"text-center py-8"},W={key:5,class:"mt-16"},X={class:"overflow-x-auto"},Z={class:"min-w-full bg-white border border-gray-200 divide-y divide-gray-200 rounded-lg overflow-hidden"},$={class:"divide-y divide-gray-200"},tt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},rt={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},at={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},dt={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},it={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},lt={class:"bg-white rounded-lg p-8 max-w-md w-full"},mt={class:"text-center"},ct={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ut={class:"bg-white rounded-lg p-8 max-w-md w-full"},gt={class:"text-center"};function xt(d,e,x,s,p,h){return r(),o("div",V,[t("div",T,[e[16]||(e[16]=y('<h1 class="text-3xl font-bold text-center mb-8" data-v-282b3dd6>Nâng cấp tài khoản Premium</h1><div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8 text-center" data-v-282b3dd6><h2 class="text-xl font-semibold text-yellow-800 mb-2" data-v-282b3dd6>Chức năng này đang trong giai đoạn thử nghiệm</h2><p class="text-yellow-700 mb-2" data-v-282b3dd6>Dưới đây là thông tin tài khoản test để trải nghiệm thanh toán:</p><div class="text-left max-w-md mx-auto" data-v-282b3dd6><p class="text-yellow-700" data-v-282b3dd6><span class="font-semibold" data-v-282b3dd6>Ngân hàng:</span> NCB</p><p class="text-yellow-700" data-v-282b3dd6><span class="font-semibold" data-v-282b3dd6>Số thẻ:</span> 9704198526191432198</p><p class="text-yellow-700" data-v-282b3dd6><span class="font-semibold" data-v-282b3dd6>Tên chủ thẻ:</span> NGUYEN VAN A</p><p class="text-yellow-700" data-v-282b3dd6><span class="font-semibold" data-v-282b3dd6>Ngày phát hành:</span> 07/15</p><p class="text-yellow-700" data-v-282b3dd6><span class="font-semibold" data-v-282b3dd6>Mật khẩu OTP:</span> 123456</p></div></div>',2)),s.premiumStore.isPremium?(r(),o("div",D,[e[3]||(e[3]=t("div",{class:"flex items-center justify-center mb-4"},[t("i",{class:"fas fa-crown text-yellow-500 text-5xl"})],-1)),e[4]||(e[4]=t("h2",{class:"text-2xl font-bold text-green-800 mb-2"},"Tài khoản Premium đang hoạt động!",-1)),e[5]||(e[5]=t("p",{class:"text-green-700 mb-2"},"Bạn đang sử dụng tài khoản Premium với đầy đủ tính năng.",-1)),t("p",F,[e[2]||(e[2]=t("span",{class:"font-semibold"},"Ngày hết hạn:",-1)),c(" "+a(s.formatDate(s.premiumStore.premiumExpiry)),1)])])):i("",!0),s.premiumStore.loading?(r(),o("div",L,e[6]||(e[6]=[t("div",{class:"spinner inline-block w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Đang tải thông tin...",-1)]))):i("",!0),s.premiumStore.error&&!s.premiumStore.loading?(r(),o("div",z,[t("p",null,a(s.premiumStore.error),1)])):i("",!0),s.premiumStore.loading?i("",!0):(r(),o("div",U,[(r(!0),o(v,null,w(s.premiumStore.packages,n=>(r(),o("div",{key:n.id,class:"bg-white rounded-lg shadow-lg overflow-hidden border border-gray-200 hover:shadow-xl transition-shadow"},[t("div",H,[t("h3",q,a(n.name),1),t("p",E,a(n.description),1)]),t("div",I,[t("div",A,[t("span",G,a(s.formatPrice(n.price)),1),e[7]||(e[7]=t("span",{class:"text-gray-500 ml-1"},"VND",-1))]),t("ul",K,[(r(!0),o(v,null,w(n.features,(u,b)=>(r(),o("li",{key:b,class:"flex items-start"},[e[8]||(e[8]=t("svg",{class:"w-5 h-5 text-green-500 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),t("span",null,a(u),1)]))),128))]),t("button",{onClick:u=>s.handlePurchase(n.id),disabled:s.premiumStore.isPremium||s.isBuying,class:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-lg font-medium hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed"},[s.isBuying&&s.selectedPackageId===n.id?(r(),o("span",J,e[9]||(e[9]=[t("span",{class:"spinner inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"},null,-1),c(" Đang xử lý... ")]))):s.premiumStore.isPremium?(r(),o("span",O,"Đã kích hoạt")):(r(),o("span",Y,"Mua ngay"))],8,R)])]))),128))])),!s.premiumStore.loading&&s.premiumStore.packages.length===0?(r(),o("div",Q,e[10]||(e[10]=[t("p",{class:"text-gray-600"},"Không tìm thấy thông tin gói Premium. Vui lòng thử lại sau.",-1)]))):i("",!0),e[17]||(e[17]=y('<div class="mt-16" data-v-282b3dd6><h2 class="text-2xl font-bold text-center mb-8" data-v-282b3dd6>Đặc quyền của tài khoản Premium</h2><div class="grid md:grid-cols-3 gap-8" data-v-282b3dd6><div class="bg-white p-6 rounded-lg shadow-md" data-v-282b3dd6><div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4" data-v-282b3dd6><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-282b3dd6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" data-v-282b3dd6></path></svg></div><h3 class="text-xl font-semibold mb-2" data-v-282b3dd6>Tìm kiếm nâng cao</h3><p class="text-gray-600" data-v-282b3dd6>Dễ dàng lọc và tìm kiếm công việc phù hợp với nhiều tiêu chí khác nhau.</p></div><div class="bg-white p-6 rounded-lg shadow-md" data-v-282b3dd6><div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4" data-v-282b3dd6><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-282b3dd6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-282b3dd6></path></svg></div><h3 class="text-xl font-semibold mb-2" data-v-282b3dd6>Ưu tiên hiển thị</h3><p class="text-gray-600" data-v-282b3dd6>Hồ sơ của bạn sẽ được ưu tiên hiển thị cho nhà tuyển dụng.</p></div><div class="bg-white p-6 rounded-lg shadow-md" data-v-282b3dd6><div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4" data-v-282b3dd6><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-282b3dd6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-282b3dd6></path></svg></div><h3 class="text-xl font-semibold mb-2" data-v-282b3dd6>Hỗ trợ 24/7</h3><p class="text-gray-600" data-v-282b3dd6>Được hỗ trợ nhanh chóng mọi lúc, mọi nơi.</p></div></div></div>',1)),!s.premiumStore.loading&&s.premiumStore.sortedPremiumHistory.length>0?(r(),o("div",W,[e[15]||(e[15]=t("h2",{class:"text-2xl font-bold text-center mb-8"},"Lịch sử đăng ký Premium",-1)),t("div",X,[t("table",Z,[e[14]||(e[14]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Gói"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Giá"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ngày bắt đầu"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ngày kết thúc"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Trạng thái")])],-1)),t("tbody",$,[(r(!0),o(v,null,w(s.premiumStore.sortedPremiumHistory,n=>(r(),o("tr",{key:n.id,class:P({"bg-yellow-50":n.is_active})},[t("td",tt,a(n.package_name),1),t("td",et,a(s.formatPrice(n.package_price))+" VNĐ ",1),t("td",st,a(n.start_date),1),t("td",nt,a(n.end_date),1),t("td",ot,[n.is_active?(r(),o("span",rt,e[11]||(e[11]=[t("svg",{class:"w-2 h-2 mr-1 text-green-400",fill:"currentColor",viewBox:"0 0 8 8"},[t("circle",{cx:"4",cy:"4",r:"3"})],-1),c(" Đang hoạt động ")]))):n.is_cancelled?(r(),o("span",at,[e[12]||(e[12]=t("svg",{class:"w-2 h-2 mr-1 text-red-400",fill:"currentColor",viewBox:"0 0 8 8"},[t("circle",{cx:"4",cy:"4",r:"3"})],-1)),c(" Đã hủy ("+a(n.cancelled_date)+") ",1)])):(r(),o("span",dt,e[13]||(e[13]=[t("svg",{class:"w-2 h-2 mr-1 text-gray-400",fill:"currentColor",viewBox:"0 0 8 8"},[t("circle",{cx:"4",cy:"4",r:"3"})],-1),c(" Hết hạn ")])))])],2))),128))])])])])):i("",!0)]),s.showSuccessModal?(r(),o("div",it,[t("div",lt,[t("div",mt,[e[18]||(e[18]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-green-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e[19]||(e[19]=t("h2",{class:"text-2xl font-bold mb-4"},"Thanh toán thành công!",-1)),e[20]||(e[20]=t("p",{class:"text-gray-600 mb-6"},"Tài khoản của bạn đã được nâng cấp lên Premium thành công.",-1)),t("button",{onClick:e[0]||(e[0]=n=>s.showSuccessModal=!1),class:"bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700"},"Đóng")])])])):i("",!0),s.showFailedModal?(r(),o("div",ct,[t("div",ut,[t("div",gt,[e[21]||(e[21]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-red-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),e[22]||(e[22]=t("h2",{class:"text-2xl font-bold mb-4"},"Thanh toán thất bại!",-1)),e[23]||(e[23]=t("p",{class:"text-gray-600 mb-6"},"Có lỗi xảy ra trong quá trình thanh toán. Vui lòng thử lại sau.",-1)),t("button",{onClick:e[1]||(e[1]=n=>s.showFailedModal=!1),class:"bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700"},"Đóng")])])])):i("",!0)])}const ht=_(j,[["render",xt],["__scopeId","data-v-282b3dd6"]]);export{ht as default};
