import{u as B,x as G,k as g,D as M,o as S,c as s,a as r,e as t,l as T,f as d,q as N,R as a,g as x,m as p,d as m,v as c,n as b,t as u,p as h,b as U,F as L,h as P}from"./index-B0ZRND4a.js";import{B as k}from"./BaseFileUpload-DMdOVor0.js";const j={class:"min-h-screen bg-gray-50 py-8"},F={class:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8"},R={key:0,class:"flex justify-center py-12"},D={key:1,class:"bg-white shadow-xl rounded-lg overflow-hidden"},J={class:"p-8"},H={class:"flex items-center justify-between mb-8"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Y={key:0,class:"mt-1 text-sm text-red-500"},$={key:0,class:"mt-1 text-sm text-red-500"},z={key:0,class:"mt-1 text-sm text-red-500"},O={key:0,class:"mt-1 text-sm text-red-500"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},A={key:0,class:"mt-1 text-sm text-red-500"},I={key:0,class:"mt-1 text-sm text-red-500"},X={key:0,class:"mt-1 text-sm text-red-500"},Z=["value"],ee={key:0,class:"mt-1 text-sm text-red-500"},te={key:0,class:"mt-1 text-sm text-red-500"},oe={key:0,class:"mt-1 text-sm text-red-500"},ne=["disabled"],le={key:0,class:"flex items-center"},se={key:1},ue={__name:"EnterpriseEdit",setup(re){const v=B(),w=G(),_=g(!0),f=g(!1);g(null),g(null),g(null);const o=g({}),V=g([]),l=M({company_name:"",tax:"",address:"",phone_number:"",email_company:"",business_certificate:null,business_certificate_public_id:null,field_of_activity:"",scale:"",description:"",city:"",link_web_site:"",logo:null,logo_public_id:null,background_image:null,background_image_public_id:null}),E=async()=>{try{const e=await(await fetch("https://provinces.open-api.vn/api/?depth=1")).json();V.value=e}catch(i){console.error("Lỗi khi lấy danh sách tỉnh thành:",i)}},C=()=>{if(l.link_web_site)try{new URL(l.link_web_site),o.value.link_web_site=""}catch{o.value.link_web_site="URL không hợp lệ. Vui lòng nhập đúng định dạng (ví dụ: https://example.com)"}},q=async()=>{var i,e;try{if(f.value=!0,o.value={},l.link_web_site&&(C(),o.value.link_web_site))return;(await w.updateEnterprise(l)).success&&v.push("/employer/company")}catch(n){(e=(i=n.response)==null?void 0:i.data)!=null&&e.errors?o.value=n.response.data.errors:console.error("Error updating enterprise:",n)}finally{f.value=!1}};S(async()=>{try{await E();const i=await w.fetchUserEnterprise();if(i.success){const e=i.data[0];console.log(e),Object.keys(l).forEach(n=>{e[n]!==void 0&&(l[n]=e[n])}),l.business_certificate=e.business_certificate_url,l.background_image=e.background_image_url,l.logo=e.logo_url}}catch(i){console.error("Error loading enterprise:",i)}finally{_.value=!1}});const y=(i,e)=>{i?o.value[e]=i:o.value[e]=""};return(i,e)=>(r(),s("div",j,[t("div",F,[_.value?(r(),s("div",R,e[29]||(e[29]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"},null,-1)]))):(r(),s("div",D,[t("div",J,[t("div",H,[e[31]||(e[31]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Chỉnh sửa thông tin doanh nghiệp",-1)),t("button",{onClick:e[0]||(e[0]=n=>T(v).back()),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},e[30]||(e[30]=[t("i",{class:"fas fa-arrow-left mr-2"},null,-1),d(" Quay lại ")]))]),t("form",{onSubmit:N(q,["prevent"]),class:"space-y-8"},[t("div",null,[e[32]||(e[32]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Hình ảnh doanh nghiệp",-1)),t("div",K,[x(k,{modelValue:l.logo,"onUpdate:modelValue":e[1]||(e[1]=n=>l.logo=n),label:"Logo công ty",error:o.value.logo,accept:"image/*",icon:"fas fa-building",previewContainerClass:"h-40",helpText:"Tải lên logo công ty (JPG, PNG, tối đa 2MB)",onError:e[2]||(e[2]=n=>y(n,"logo"))},null,8,["modelValue","error"]),x(k,{modelValue:l.background_image,"onUpdate:modelValue":e[3]||(e[3]=n=>l.background_image=n),label:"Ảnh nền doanh nghiệp",error:o.value.background_image,accept:"image/*",icon:"fas fa-image",previewContainerClass:"h-40",helpText:"Tải lên ảnh nền doanh nghiệp (JPG, PNG, tối đa 2MB)",onError:e[4]||(e[4]=n=>y(n,"background_image"))},null,8,["modelValue","error"])])]),t("div",null,[e[33]||(e[33]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Giấy phép kinh doanh",-1)),x(k,{modelValue:l.business_certificate,"onUpdate:modelValue":e[5]||(e[5]=n=>l.business_certificate=n),label:"Giấy phép kinh doanh (Ảnh)",error:o.value.business_certificate,accept:"image/*",icon:"fas fa-file-alt",previewType:"contain",previewContainerClass:"h-60",helpText:"Tải lên ảnh giấy phép kinh doanh (JPG, PNG, tối đa 2MB)",onError:e[6]||(e[6]=n=>y(n,"business_certificate"))},null,8,["modelValue","error"])]),t("div",null,[e[40]||(e[40]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Thông tin cơ bản",-1)),t("div",Q,[a([l.company_name,o.value.company_name],()=>(r(),s("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d("Tên công ty "),t("span",{class:"text-red-500"},"*")],-1)),p(t("input",{"onUpdate:modelValue":e[7]||(e[7]=n=>l.company_name=n),type:"text",required:"",class:b(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.company_name}])},null,2),[[c,l.company_name]]),o.value.company_name?(r(),s("p",Y,u(o.value.company_name),1)):m("",!0)])),e,8),a([l.tax,o.value.tax],()=>(r(),s("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d("Mã số thuế "),t("span",{class:"text-red-500"},"*")],-1)),p(t("input",{"onUpdate:modelValue":e[9]||(e[9]=n=>l.tax=n),type:"text",required:"",class:b(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.tax}])},null,2),[[c,l.tax]]),o.value.tax?(r(),s("p",$,u(o.value.tax),1)):m("",!0)])),e,10),a([l.field_of_activity,o.value.field_of_activity],()=>(r(),s("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d("Lĩnh vực hoạt động "),t("span",{class:"text-red-500"},"*")],-1)),p(t("select",{"onUpdate:modelValue":e[11]||(e[11]=n=>l.field_of_activity=n),required:"",class:b(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.field_of_activity}])},e[36]||(e[36]=[U('<option value="">Chọn lĩnh vực</option><option value="Công nghệ thông tin">Công nghệ thông tin</option><option value="Tài chính - Ngân hàng">Tài chính - Ngân hàng</option><option value="Marketing - Truyền thông">Marketing - Truyền thông</option><option value="Giáo dục">Giáo dục</option><option value="Y tế - Chăm sóc sức khỏe">Y tế - Chăm sóc sức khỏe</option><option value="Sản xuất - Công nghiệp">Sản xuất - Công nghiệp</option><option value="Bán lẻ - Thương mại">Bán lẻ - Thương mại</option><option value="Khác">Khác</option>',9)]),2),[[h,l.field_of_activity]]),o.value.field_of_activity?(r(),s("p",z,u(o.value.field_of_activity),1)):m("",!0)])),e,12),a([l.scale,o.value.scale],()=>(r(),s("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d("Quy mô công ty "),t("span",{class:"text-red-500"},"*")],-1)),p(t("select",{"onUpdate:modelValue":e[13]||(e[13]=n=>l.scale=n),required:"",class:b(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.scale}])},e[38]||(e[38]=[U('<option value="">Chọn quy mô</option><option value="1-10">1-10 nhân viên</option><option value="11-50">11-50 nhân viên</option><option value="51-200">51-200 nhân viên</option><option value="201-500">201-500 nhân viên</option><option value="501-1000">501-1000 nhân viên</option><option value="1000+">1000+ nhân viên</option>',7)]),2),[[h,l.scale]]),o.value.scale?(r(),s("p",O,u(o.value.scale),1)):m("",!0)])),e,14)])]),t("div",null,[e[47]||(e[47]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Thông tin liên hệ",-1)),t("div",W,[a([l.email_company,o.value.email_company],()=>(r(),s("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d("Email công ty "),t("span",{class:"text-red-500"},"*")],-1)),p(t("input",{"onUpdate:modelValue":e[15]||(e[15]=n=>l.email_company=n),type:"email",required:"",class:b(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.email_company}])},null,2),[[c,l.email_company]]),o.value.email_company?(r(),s("p",A,u(o.value.email_company),1)):m("",!0)])),e,16),a([l.phone_number,o.value.phone_number],()=>(r(),s("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d("Số điện thoại "),t("span",{class:"text-red-500"},"*")],-1)),p(t("input",{"onUpdate:modelValue":e[17]||(e[17]=n=>l.phone_number=n),type:"tel",required:"",class:b(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.phone_number}])},null,2),[[c,l.phone_number]]),o.value.phone_number?(r(),s("p",I,u(o.value.phone_number),1)):m("",!0)])),e,18),a([l.link_web_site,o.value.link_web_site],()=>(r(),s("div",null,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Website",-1)),p(t("input",{"onUpdate:modelValue":e[19]||(e[19]=n=>l.link_web_site=n),type:"url",placeholder:"https://",class:b(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.link_web_site}]),onBlur:C},null,34),[[c,l.link_web_site]]),o.value.link_web_site?(r(),s("p",X,u(o.value.link_web_site),1)):m("",!0)])),e,20),a([l.city,o.value.city],()=>(r(),s("div",null,[e[45]||(e[45]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d("Thành phố / Tỉnh "),t("span",{class:"text-red-500"},"*")],-1)),p(t("select",{"onUpdate:modelValue":e[21]||(e[21]=n=>l.city=n),required:"",class:b(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.city}])},[e[44]||(e[44]=t("option",{value:""},"Chọn thành phố/tỉnh",-1)),(r(!0),s(L,null,P(V.value,n=>(r(),s("option",{key:n.code,value:n.name},u(n.name),9,Z))),128))],2),[[h,l.city]]),o.value.city?(r(),s("p",ee,u(o.value.city),1)):m("",!0)])),e,22),a([l.address,o.value.address],()=>(r(),s("div",{class:"md:col-span-2"},[e[46]||(e[46]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d("Địa chỉ "),t("span",{class:"text-red-500"},"*")],-1)),p(t("input",{"onUpdate:modelValue":e[23]||(e[23]=n=>l.address=n),type:"text",required:"",class:b(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.address}])},null,2),[[c,l.address]]),o.value.address?(r(),s("p",te,u(o.value.address),1)):m("",!0)])),e,24)])]),a([l.description,o.value.description],()=>(r(),s("div",null,[e[48]||(e[48]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Giới thiệu công ty",-1)),t("div",null,[p(t("textarea",{"onUpdate:modelValue":e[25]||(e[25]=n=>l.description=n),rows:"4",required:"",class:b(["mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-2 px-3 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",{"border-red-500":o.value.description}]),placeholder:"Mô tả về công ty, sản phẩm, dịch vụ và văn hóa doanh nghiệp..."},null,2),[[c,l.description]]),o.value.description?(r(),s("p",oe,u(o.value.description),1)):m("",!0)])])),e,26),a([f.value],()=>(r(),s("div",{class:"flex justify-end space-x-4 pt-6 border-t"},[t("button",{type:"button",onClick:e[27]||(e[27]=n=>T(v).back()),class:"px-6 py-2.5 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Hủy "),t("button",{type:"submit",disabled:f.value,class:"px-6 py-2.5 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(r(),s("span",le,e[49]||(e[49]=[t("i",{class:"fas fa-circle-notch fa-spin mr-2"},null,-1),d(" Đang lưu... ")]))):(r(),s("span",se,"Lưu thay đổi"))],8,ne)])),e,28)],32)])]))])]))}};export{ue as default};
