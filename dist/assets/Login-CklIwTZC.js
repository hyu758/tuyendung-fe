import{u as w,i as k,z as _,j as c,o as V,r as C,c as M,a as h,e as s,k as A,d as G,p as n,l as N,x as S,g as i,q as U,A as j,w as v,f as g,b as B}from"./index-CNGFvYdt.js";import{_ as b}from"./BaseInput-CpVCfZXC.js";import{_ as f}from"./BaseButton-BumLZ1N8.js";const L={class:"bg-gray-50 min-h-screen py-12 px-4 sm:px-6 lg:px-8"},R={class:"max-w-md mx-auto"},T={class:"bg-white py-8 px-6 shadow rounded-lg"},$={class:"space-y-6"},q={class:"flex items-center justify-between"},z={class:"flex items-center"},D={class:"text-sm"},E={class:"mt-6"},H={class:"mt-6"},I={class:"mt-6 text-center"},P={class:"text-sm text-gray-600"},F={__name:"Login",setup(J){const m=w(),t=k();_(()=>{});const u=c(""),d=c(""),p=c(!1),a=c({});V(()=>{t.error=null,t.isAuthenticated&&(t.userRole==="admin"?m.push("/admin/dashboard"):t.userRole==="employer"?m.push("/employer/dashboard"):m.push("/"))});const x=async()=>{a.value={},t.error=null;let o=!0;if(u.value||(a.value.username="Tên đăng nhập không được để trống",o=!1),d.value||(a.value.password="Mật khẩu không được để trống",o=!1),!!o)try{const e=await t.login({email:u.value,password:d.value,remember:p.value});!(e!=null&&e.success)&&(e!=null&&e.errors)&&Object.keys(e.errors).forEach(r=>{(r==="username"||r==="password"||r==="account")&&(a.value[r]=Array.isArray(e.errors[r])?e.errors[r][0]:e.errors[r])})}catch(e){console.error("Lỗi khi đăng nhập:",e),t.error="Có lỗi xảy ra khi đăng nhập. Vui lòng thử lại sau."}},y=()=>{try{const e="https://api.tuyendungtlu.site";window.location.href=e+"/api/auth/login/google-oauth2/"}catch(o){console.error("Lỗi khi bắt đầu đăng nhập với Google:",o),t.error="Có lỗi xảy ra khi bắt đầu đăng nhập Google"}};return(o,e)=>{const r=C("router-link");return h(),M("div",L,[s("div",R,[e[9]||(e[9]=s("div",{class:"text-center mb-8"},[s("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Đăng nhập"),s("p",{class:"text-gray-600"},"Đăng nhập để tiếp tục với JobHub")],-1)),s("div",T,[n(t).error?(h(),A(N,{key:0,variant:"error",message:n(t).error,show:!!n(t).error,dismissible:"",onDismiss:e[0]||(e[0]=l=>n(t).error=null),class:"mb-6"},null,8,["message","show"])):G("",!0),s("form",{onSubmit:S(x,["prevent"])},[s("div",$,[i(b,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=l=>u.value=l),type:"text",label:"Tên đăng nhập",placeholder:"Tên đăng nhập của bạn",autocomplete:"username",required:"",prefixIcon:"user",error:a.value.username,class:"transform transition-all duration-200 focus-within:scale-105"},null,8,["modelValue","error"]),i(b,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=l=>d.value=l),type:"password",label:"Mật khẩu",placeholder:"Mật khẩu của bạn",autocomplete:"current-password",required:"",prefixIcon:"lock",error:a.value.password,class:"transform transition-all duration-200 focus-within:scale-105"},null,8,["modelValue","error"]),s("div",q,[s("div",z,[U(s("input",{id:"remember_me",type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=l=>p.value=l),class:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-all"},null,512),[[j,p.value]]),e[4]||(e[4]=s("label",{for:"remember_me",class:"ml-2 block text-sm text-gray-700"}," Ghi nhớ đăng nhập ",-1))]),s("div",D,[i(r,{to:"/forgot-password",class:"font-medium text-blue-600 hover:text-blue-800 transition-colors"},{default:v(()=>e[5]||(e[5]=[g(" Quên mật khẩu? ")])),_:1})])]),s("div",null,[i(f,{type:"submit",variant:"primary",size:"lg",label:"Đăng nhập",loading:n(t).loading,disabled:n(t).loading,class:"w-full transform transition-all duration-300 hover:shadow-lg hover:scale-105 rounded-lg py-4 text-lg font-bold"},null,8,["loading","disabled"])])])],32),s("div",E,[e[6]||(e[6]=B('<div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-white text-gray-500">Hoặc đăng nhập với</span></div></div>',1)),s("div",H,[i(f,{variant:"light",class:"w-full",icon:["fab","google"],label:"Google",onClick:y})])])]),s("div",I,[s("p",P,[e[8]||(e[8]=g(" Chưa có tài khoản? ")),i(r,{to:"/register",class:"font-medium text-blue-600 hover:text-blue-500"},{default:v(()=>e[7]||(e[7]=[g(" Đăng ký ngay ")])),_:1})])])])])}}};export{F as default};
