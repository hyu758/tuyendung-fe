import{I as c,C as i}from"./index-CNGFvYdt.js";const h=c("cv",{state:()=>({cvs:[],currentCV:null,loading:!1,error:null}),actions:{async fetchCVsByPostId(e){try{this.loading=!0,this.error=null;const t=await i.get(`/api/cv/post/${e}/`);return t.data?(this.cvs=t.data.data.results,{success:!0,data:t.data.data}):{success:!1,error:"Không thể lấy danh sách CV"}}catch(t){return console.error("Error fetching CVs:",t),this.error=t.message||"Đã xảy ra lỗi khi lấy danh sách CV",{success:!1,error:this.error}}finally{this.loading=!1}},async fetchCVsByStatus(e=null,t=null){try{this.loading=!0,this.error=null;let s="/api/cv/status/";const r={};e&&(r.status=e),t!==null&&(r.is_marked=t);const a=await i.get(s,{params:r});return a.data?(this.cvs=a.data.data,{success:!0,data:a.data}):{success:!1,error:"Không thể lấy danh sách CV theo trạng thái"}}catch(s){return console.error("Error fetching CVs by status:",s),this.error=s.message||"Đã xảy ra lỗi khi lấy danh sách CV theo trạng thái",{success:!1,error:this.error}}finally{this.loading=!1}},async fetchCVById(e){var t;try{this.loading=!0,this.error=null;const s=await i.get(`/api/cv/${e}/`);return s.data&&s.status===200?(this.currentCV=s.data.data,{success:!0,data:s.data.data}):{success:!1,error:((t=s.data)==null?void 0:t.message)||"Không thể lấy thông tin CV"}}catch(s){return console.error("Error fetching CV details:",s),this.error=s.message||"Đã xảy ra lỗi khi lấy thông tin CV",{success:!1,error:this.error}}finally{this.loading=!1}},async updateCVStatus(e,t){var s;try{this.loading=!0,this.error=null;const r=await i.put(`/api/cv/${e}/status/`,{status:t});if(r.data&&r.status===200){const a=this.cvs.findIndex(n=>n.id===e);return a!==-1&&(this.cvs[a].status=t),this.currentCV&&this.currentCV.id===e&&(this.currentCV.status=t),{success:!0,data:r.data.data}}return{success:!1,error:((s=r.data)==null?void 0:s.message)||"Không thể cập nhật trạng thái CV"}}catch(r){return console.error("Error updating CV status:",r),this.error=r.message||"Đã xảy ra lỗi khi cập nhật trạng thái CV",{success:!1,error:this.error}}finally{this.loading=!1}},async markCV(e,t){var s;try{this.loading=!0,this.error=null;const r=await i.post(`/api/cv/${e}/mark/`,{mark_type:t});return r.data&&r.status===200?{success:!0,data:r.data.data}:{success:!1,error:((s=r.data)==null?void 0:s.message)||"Không thể đánh dấu CV"}}catch(r){return console.error("Error marking CV:",r),this.error=r.message||"Đã xảy ra lỗi khi đánh dấu CV",{success:!1,error:this.error}}finally{this.loading=!1}},async updateCVNote(e,t){var s;try{this.loading=!0,this.error=null;const r=await i.put(`/api/cv/${e}/note/`,{note:t});if(r.data&&r.status===200){const a=this.cvs.findIndex(n=>n.id===e);return a!==-1&&(this.cvs[a].note=t),this.currentCV&&this.currentCV.id===e&&(this.currentCV.note=t),{success:!0,data:r.data.data}}return{success:!1,error:((s=r.data)==null?void 0:s.message)||"Không thể cập nhật ghi chú CV"}}catch(r){return console.error("Error updating CV note:",r),this.error=r.message||"Đã xảy ra lỗi khi cập nhật ghi chú CV",{success:!1,error:this.error}}finally{this.loading=!1}}}});export{h as u};
