import{i as j,u as B,k as i,r as T,c as V,a as p,e as l,s as C,d as k,l as h,z as q,n as y,g as s,q as A,m as E,p as H,t as M,A as z,f as w,w as D}from"./index-Cc90-Q6z.js";import{_ as f}from"./BaseInput-T3H-5gIu.js";import{_ as O}from"./BaseButton-7WO6dloA.js";const P={class:"bg-gradient-to-r from-blue-50 to-indigo-50 min-h-screen py-12 px-4 sm:px-6 lg:px-8"},R={class:"max-w-lg mx-auto"},L={class:"bg-white py-8 px-6 shadow-xl rounded-xl transition-all duration-300 transform hover:shadow-2xl"},X={class:"mb-8"},F={class:"flex space-x-4"},G={class:"flex items-center mb-3"},J={class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3"},K={class:"flex items-center mb-3"},Q={class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3"},W={class:"space-y-8"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-7"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-7"},ee={class:"relative"},le={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},te={class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},re={key:0,class:"mt-1 text-sm text-red-600"},se={class:"grid grid-cols-1 md:grid-cols-2 gap-7"},ae={class:"bg-gray-50 p-3 rounded-lg border border-gray-100 flex items-center"},oe={key:0,class:"text-sm text-red-600 mt-1 italic"},ne={class:"pt-2"},ie={class:"mt-8 text-center"},ue={class:"text-gray-600"},ge={__name:"Register",setup(de){const u=j(),N=B(),c=i("applicant"),d=i(""),a=i(""),m=i(""),_=i("male"),o=i(""),v=i(""),t=i({}),b=i(!1),x=i(""),U=async()=>{if(t.value={},u.error=null,d.value&&(d.value=d.value.trim()),a.value&&(a.value=a.value.trim()),m.value&&(m.value=m.value.trim()),o.value&&(o.value=o.value.trim()),v.value&&(v.value=v.value.trim()),S(),!(Object.keys(t.value).length>0))try{const g={username:d.value,email:a.value,password:o.value,fullname:m.value,gender:_.value,role:c.value==="recruiter"?"employer":"candidate"},e=await u.register(g);e.success?(x.value=e.message||"Đăng ký thành công! Vui lòng kiểm tra email để kích hoạt tài khoản.",d.value="",a.value="",o.value="",v.value="",m.value="",b.value=!1,setTimeout(()=>{N.push({name:"Login"})},3e3)):(console.log("Received errors from backend:",e.errors),e.errors&&Object.keys(e.errors).forEach(n=>{Array.isArray(e.errors[n])?t.value[n]=e.errors[n][0]:t.value[n]=e.errors[n]}),Object.keys(t.value).length===0&&e.error&&(u.error=e.error))}catch(g){console.error("Lỗi khi đăng ký:",g),u.error="Có lỗi xảy ra khi đăng ký. Vui lòng thử lại sau."}},I=g=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g),S=()=>{d.value?d.value.trim()===""&&(t.value.username="Tên đăng nhập không thể chỉ có khoảng trắng"):t.value.username="Vui lòng nhập tên đăng nhập",a.value?a.value.trim()===""?t.value.email="Email không thể chỉ có khoảng trắng":I(a.value)||(t.value.email="Email không hợp lệ"):t.value.email="Vui lòng nhập email",m.value?m.value.trim()===""&&(t.value.fullname="Họ và tên không thể chỉ có khoảng trắng"):t.value.fullname="Vui lòng nhập họ và tên",o.value?o.value.trim()===""&&(t.value.password="Mật khẩu không thể chỉ có khoảng trắng"):t.value.password="Vui lòng nhập mật khẩu",o.value!==v.value&&(t.value.confirmPassword="Mật khẩu xác nhận không khớp"),b.value||(t.value.acceptTerms="Vui lòng đồng ý với điều khoản sử dụng")};return(g,e)=>{const n=T("font-awesome-icon"),$=T("router-link");return p(),V("div",P,[l("div",R,[e[19]||(e[19]=l("div",{class:"text-center mb-10"},[l("h1",{class:"text-4xl font-extrabold text-gray-900 mb-3 animate__animated animate__fadeIn"},"Đăng ký tài khoản"),l("p",{class:"text-lg text-gray-600"},"Tạo tài khoản mới để sử dụng đầy đủ tính năng của JobHub")],-1)),l("div",L,[h(u).error?(p(),C(q,{key:0,variant:"error",message:h(u).error,show:!!h(u).error,class:"mb-6"},null,8,["message","show"])):k("",!0),x.value?(p(),C(q,{key:1,variant:"success",message:x.value,show:!!x.value,class:"mb-6"},null,8,["message","show"])):k("",!0),l("div",X,[e[13]||(e[13]=l("label",{class:"block text-sm font-semibold text-gray-700 mb-3"},"Bạn là?",-1)),l("div",F,[l("div",{class:y(["flex-1 rounded-lg border-2 p-5 cursor-pointer transition-all duration-200 transform hover:scale-105",{"border-blue-500 bg-blue-50 shadow-md":c.value==="applicant","border-gray-200 hover:border-blue-300":c.value!=="applicant"}]),onClick:e[0]||(e[0]=r=>c.value="applicant")},[l("div",G,[l("div",J,[s(n,{icon:"user",class:"text-blue-600 text-lg"})]),e[9]||(e[9]=l("h3",{class:"font-bold text-lg"},"Ứng viên",-1))]),e[10]||(e[10]=l("p",{class:"text-sm text-gray-600"},"Tìm kiếm công việc phù hợp từ nhà tuyển dụng uy tín",-1))],2),l("div",{class:y(["flex-1 rounded-lg border-2 p-5 cursor-pointer transition-all duration-200 transform hover:scale-105",{"border-blue-500 bg-blue-50 shadow-md":c.value==="recruiter","border-gray-200 hover:border-blue-300":c.value!=="recruiter"}]),onClick:e[1]||(e[1]=r=>c.value="recruiter")},[l("div",K,[l("div",Q,[s(n,{icon:"building",class:"text-blue-600 text-lg"})]),e[11]||(e[11]=l("h3",{class:"font-bold text-lg"},"Nhà tuyển dụng",-1))]),e[12]||(e[12]=l("p",{class:"text-sm text-gray-600"},"Đăng tin tuyển dụng và tìm kiếm ứng viên phù hợp",-1))],2)])]),l("form",{onSubmit:A(U,["prevent"]),class:"transform transition-all duration-300"},[l("div",W,[l("div",Y,[s(f,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=r=>d.value=r),label:"Tên đăng nhập",placeholder:"Tên đăng nhập",required:"",prefixIcon:"user",error:t.value.username,class:"transform transition-all duration-200 focus-within:scale-105"},null,8,["modelValue","error"]),s(f,{modelValue:a.value,"onUpdate:modelValue":e[3]||(e[3]=r=>a.value=r),type:"email",label:"Email",placeholder:"Email của bạn",autocomplete:"email",required:"",prefixIcon:"envelope",error:t.value.email,class:"transform transition-all duration-200 focus-within:scale-105"},null,8,["modelValue","error"])]),l("div",Z,[s(f,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=r=>m.value=r),label:"Họ và tên",placeholder:"Họ và tên đầy đủ",required:"",prefixIcon:"user",error:t.value.fullname,class:"transform transition-all duration-200 focus-within:scale-105"},null,8,["modelValue","error"]),l("div",null,[e[15]||(e[15]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Giới tính",-1)),l("div",ee,[E(l("select",{"onUpdate:modelValue":e[5]||(e[5]=r=>_.value=r),class:y(["appearance-none block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",{"border-red-500":t.value.gender}])},e[14]||(e[14]=[l("option",{value:"male"},"Nam",-1),l("option",{value:"female"},"Nữ",-1),l("option",{value:"other"},"Khác",-1)]),2),[[H,_.value]]),l("div",le,[s(n,{icon:"venus-mars",class:"text-gray-400"})]),l("div",te,[s(n,{icon:"chevron-down",class:"text-gray-400"})])]),t.value.gender?(p(),V("div",re,M(t.value.gender),1)):k("",!0)])]),l("div",se,[s(f,{modelValue:o.value,"onUpdate:modelValue":e[6]||(e[6]=r=>o.value=r),type:"password",label:"Mật khẩu",placeholder:"Tạo mật khẩu",autocomplete:"new-password",required:"",prefixIcon:"lock",error:t.value.password,class:"transform transition-all duration-200"},null,8,["modelValue","error"]),s(f,{modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=r=>v.value=r),type:"password",label:"Xác nhận mật khẩu",placeholder:"Xác nhận mật khẩu",autocomplete:"new-password",required:"",prefixIcon:"lock",error:t.value.confirmPassword,class:"transform transition-all duration-200"},null,8,["modelValue","error"])]),l("div",ae,[E(l("input",{id:"terms",type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=r=>b.value=r),class:y(["h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-all",{"border-red-500":t.value.acceptTerms}]),required:""},null,2),[[z,b.value]]),e[16]||(e[16]=l("label",{for:"terms",class:"ml-3 block text-sm text-gray-700"},[w(" Tôi đồng ý với "),l("a",{href:"#",class:"text-blue-600 hover:text-blue-800 font-medium"},"Điều khoản sử dụng"),w(" và "),l("a",{href:"#",class:"text-blue-600 hover:text-blue-800 font-medium"},"Chính sách bảo mật")],-1))]),t.value.acceptTerms?(p(),V("div",oe,M(t.value.acceptTerms),1)):k("",!0),l("div",ne,[s(O,{type:"submit",variant:"primary",size:"lg",label:"Đăng ký tài khoản",loading:h(u).loading,disabled:h(u).loading,class:"w-full transform transition-all duration-300 hover:shadow-lg hover:scale-105 rounded-lg py-4 text-lg font-bold"},null,8,["loading","disabled"])])])],32)]),l("div",ie,[l("p",ue,[e[18]||(e[18]=w(" Đã có tài khoản? ")),s($,{to:"/login",class:"font-bold text-blue-600 hover:text-blue-800 transition-colors duration-300 ml-1"},{default:D(()=>e[17]||(e[17]=[w(" Đăng nhập ngay ")])),_:1})])])])])}}};export{ge as default};
