import{I as d,C as o}from"./index-Hv-5ffem.js";const p=d("post",{state:()=>({posts:[],currentPost:null,loading:!1,error:null}),actions:{async fetchPosts(t=1,r=10,e="-created_at"){var s,a;try{return this.loading=!0,{success:!0,data:(await o.get(`/api/posts?page=${t}&page_size=${r}&sort=${e}`)).data}}catch(n){return console.error("Error fetching posts:",n),{success:!1,error:((a=(s=n.response)==null?void 0:s.data)==null?void 0:a.message)||"Có lỗi xảy ra khi tải danh sách tin tuyển dụng"}}finally{this.loading=!1}},async fetchPostByEmployer(t=1,r=10){var e,s;try{return this.loading=!0,{success:!0,data:(await o.get(`/api/posts/enterprise?page=${t}&page_size=${r}`)).data}}catch(a){return console.error("Error fetching posts:",a),{success:!1,error:((s=(e=a.response)==null?void 0:e.data)==null?void 0:s.message)||"Có lỗi xảy ra khi tải danh sách tin tuyển dụng"}}finally{this.loading=!1}},async createPost(t){var r;try{return this.loading=!0,{success:!0,...(await o.post("/api/posts/create/",t)).data}}catch(e){return console.error("Error creating post:",e),{success:!1,...((r=e.response)==null?void 0:r.data)||{message:"Có lỗi xảy ra khi tạo tin tuyển dụng"}}}finally{this.loading=!1}},async updatePost(t,r){var e,s;try{return this.loading=!0,{success:!0,data:(await o.put(`/api/posts/update/${t}/`,r)).data}}catch(a){return this.error=((s=(e=a.response)==null?void 0:e.data)==null?void 0:s.errors)||"Có lỗi xảy ra khi cập nhật tin tuyển dụng",{success:!1,error:this.error}}finally{this.loading=!1}},async deletePost(t){var r,e;try{const s=`/api/posts/delete/${t}/`;return console.log("DELETE URL:",s),{success:!0,data:(await o.delete(s)).data}}catch(s){return console.error("Error deleting post:",s),{success:!1,error:((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Có lỗi xảy ra khi xóa tin tuyển dụng"}}},async fetchPostById(t){var r,e;try{this.loading=!0;const s=await o.get(`/api/post/${t}`);return this.currentPost=s.data,{success:!0,data:s.data}}catch(s){return this.error=((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Có lỗi xảy ra khi tải thông tin tin tuyển dụng",{success:!1,error:this.error}}finally{this.loading=!1}},async togglePostStatus(t){var r,e;try{return{success:!0,data:(await o.put(`/api/post/${t}/toggle-status/`)).data}}catch(s){return console.error("Error toggling post status:",s),{success:!1,error:((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Có lỗi xảy ra khi thay đổi trạng thái bài đăng"}}},async fetchSavedPosts(){var t,r;try{return this.loading=!0,{success:!0,data:(await o.get("/api/saved-posts/")).data}}catch(e){return console.error("Error fetching saved posts:",e),{success:!1,error:((r=(t=e.response)==null?void 0:t.data)==null?void 0:r.message)||"Có lỗi xảy ra khi tải danh sách tin đã lưu"}}finally{this.loading=!1}},async savePost(t){var r,e;try{return{success:!0,data:(await o.post("/api/saved-posts/save/",{post_id:t})).data}}catch(s){return console.error("Error saving post:",s),{success:!1,error:((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Có lỗi xảy ra khi lưu tin tuyển dụng"}}},async deleteSavedPost(t){var r,e;try{return{success:!0,data:(await o.delete(`/api/saved-posts/${t}/delete/`)).data}}catch(s){return console.error("Error deleting saved post:",s),{success:!1,error:((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Có lỗi xảy ra khi xóa tin đã lưu"}}},async deleteSavedPostByPostId(t){var r,e;try{return{success:!0,data:(await o.delete(`/api/saved-posts/post/${t}/delete/`)).data}}catch(s){return console.error("Error deleting saved post:",s),{success:!1,error:((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Có lỗi xảy ra khi xóa tin đã lưu"}}},async fetchRecommendedPosts(t=1,r=10){var e,s,a,n,i,l;try{return this.loading=!0,{success:!0,data:(await o.get("/api/posts/recommended/",{params:{page:t,page_size:r}})).data}}catch(c){return console.error("Error fetching recommended posts:",c),((e=c.response)==null?void 0:e.status)===404&&((n=(a=(s=c.response)==null?void 0:s.data)==null?void 0:a.message)!=null&&n.includes("No criteria found"))?{success:!1,noCriteria:!0,error:"Không tìm thấy tiêu chí tìm việc"}:{success:!1,error:((l=(i=c.response)==null?void 0:i.data)==null?void 0:l.message)||"Có lỗi xảy ra khi tải danh sách việc làm gợi ý"}}finally{this.loading=!1}}}});export{p as u};
